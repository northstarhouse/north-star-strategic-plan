(()=>{var Q=Object.defineProperty,X=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(e,t,s)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))te.call(t,s)&&H(e,s,t[s]);if(_)for(var s of _(t))se.call(t,s)&&H(e,s,t[s]);return e},f=(e,t)=>X(e,ee(t));const{useState:p,useEffect:ae,useMemo:U}=React,$="nsh-strategy-cache-v1",re=300*1e3,B=()=>{try{const e=localStorage.getItem($);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},E=e=>{try{localStorage.setItem($,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},j=!0,D="https://script.google.com/macros/s/AKfycbwAGcXEtvH2joUHb0k1UxWSs8MYRqpUE-fn8wERcPxEQ9rK8hVGWcKnP7lpoWl7nNzM2A/exec",J=D,F=["Program Impact","Community Partnerships","Operations and Infrastructure","Financial Sustainability","Board and Leadership"],T=["Not started","On track","At risk","Behind","Complete"],oe=["Pending","Reviewed","Needs info"],O=[{id:"1",title:"Launch community listening series",pillar:"Community Partnerships",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",pillar:"Board and Leadership",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"}],g={isConfigured:()=>j&&D&&D.length>0,postJson:async(e,t)=>{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Request failed");return s.json()},fetchAll:async()=>{if(!j){const e=B();return(e==null?void 0:e.objects)||[]}if(!g.isConfigured())return console.log("Google Sheets not configured, using sample data"),O;try{const e=await fetch(`${D}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),O}},create:async e=>{if(!g.isConfigured())return console.log("Google Sheets not configured, saving locally only"),f(b({},e),{id:Date.now().toString()});try{return(await g.postJson(D,{action:"create",object:e})).result||f(b({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),f(b({},e),{id:Date.now().toString()})}},update:async e=>{if(!g.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await g.postJson(D,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!g.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await g.postJson(D,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:s})=>{if(!J)throw new Error("Drive upload not configured");const n={action:"uploadImage",filename:e,mimeType:t,data:s},a=await g.postJson(J,n);if(!a.success)throw new Error(a.error||"Upload failed");return a.result}},Z=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,z=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},A=e=>f(b({},e),{progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),le=e=>e.slice().sort((t,s)=>new Date(s.date)-new Date(t.date)),de=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-ocean text-white border-ocean";default:return"bg-stone-100 text-stone-600 border-stone-200"}},ne=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},ce=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"})),ie=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("circle",{cx:"12",cy:"12",r:"9"}),React.createElement("circle",{cx:"12",cy:"12",r:"5"}),React.createElement("circle",{cx:"12",cy:"12",r:"1"})),pe=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 5v14"}),React.createElement("path",{d:"M5 12h14"}));const q=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"})),ue=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M3 12a9 9 0 0 1 15.3-6.3"}),React.createElement("path",{d:"M21 12a9 9 0 0 1-15.3 6.3"}),React.createElement("path",{d:"M18 6v4h-4"}),React.createElement("path",{d:"M6 18v-4h4"})),W=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),K=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${de(e)}`},e),P=({label:e,value:t,helper:s})=>React.createElement("div",{className:"glass rounded-2xl p-4 md:p-5 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e),React.createElement("div",{className:"text-2xl font-display text-ink mt-2"},t),s&&React.createElement("div",{className:"text-xs text-steel mt-1"},s)),me=({initiative:e,onSelect:t})=>React.createElement("button",{onClick:t,className:"text-left bg-white rounded-2xl border border-stone-100 p-5 card-shadow hover:-translate-y-0.5 transition-transform"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.pillar),React.createElement("h3",{className:"font-display text-xl text-ink mt-1"},e.title)),React.createElement(K,{status:e.status})),React.createElement("p",{className:"text-sm text-stone-600 mt-3"},e.description),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,Math.round(e.progress),"% complete"),React.createElement("span",null,"Target: ",e.targetDate||"TBD")),React.createElement(W,{value:e.progress})),React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mt-4"},React.createElement("span",null,"Owner: ",e.owner||"Unassigned"),React.createElement("span",null,"Last update: ",z(e.lastUpdateAt)))),ge=({update:e,onReviewSave:t})=>{const[s,n]=p(e.reviewStatus||"Pending"),[a,d]=p(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},z(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${ne(s)}`},s)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-ocean"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:s,onChange:o=>n(o.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},oe.map(o=>React.createElement("option",{key:o,value:o},o))),React.createElement("input",{type:"text",value:a,onChange:o=>d(o.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,s,a),className:"px-4 py-2 bg-ocean text-white rounded-lg text-sm"},"Save review"))))},xe=({initiative:e,onSubmit:t})=>{const[s,n]=p(""),[a,d]=p(""),[o,x]=p(""),[r,u]=p(""),[k,S]=p(""),[l,C]=p(e.progress||0),[L,I]=p("");return React.createElement("form",{onSubmit:m=>{m.preventDefault();const R={id:Z(),date:new Date().toISOString(),author:s,summary:a,details:o,blockers:r,nextSteps:k,progress:Number(l)||0,links:L,reviewStatus:"Pending",reviewNotes:""};t(R),n(""),d(""),x(""),u(""),S(""),C(e.progress||0),I("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:s,onChange:m=>n(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:a,onChange:m=>d(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:o,onChange:m=>x(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:r,onChange:m=>u(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:k,onChange:m=>S(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress (%)"),React.createElement("input",{type:"number",min:"0",max:"100",value:l,onChange:m=>C(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:L,onChange:m=>I(m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},ve=({initiative:e,onSave:t,onCancel:s,isSaving:n})=>{const[a,d]=p(()=>({title:(e==null?void 0:e.title)||"",pillar:(e==null?void 0:e.pillar)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||T[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",notes:(e==null?void 0:e.notes)||""})),o=(r,u)=>{d(k=>f(b({},k),{[r]:u}))};return React.createElement("form",{onSubmit:r=>{r.preventDefault();const u=f(b(b({},e),a),{progress:Number(a.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(u)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:a.title,onChange:r=>o("title",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Pillar"),React.createElement("select",{value:a.pillar,onChange:r=>o("pillar",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select pillar"),F.map(r=>React.createElement("option",{key:r,value:r},r)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Owner"),React.createElement("input",{type:"text",value:a.owner,onChange:r=>o("owner",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:a.description,onChange:r=>o("description",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:a.coChampions,onChange:r=>o("coChampions",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:a.status,onChange:r=>o("status",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},T.map(r=>React.createElement("option",{key:r,value:r},r)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress (%)"),React.createElement("input",{type:"number",min:"0",max:"100",value:a.progress,onChange:r=>o("progress",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:a.targetDate,onChange:r=>o("targetDate",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:a.successMetrics,onChange:r=>o("successMetrics",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:a.notes,onChange:r=>o("notes",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:s,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:n,className:"px-5 py-2 bg-ocean text-white rounded-lg"},n?"Saving...":"Save initiative")))},he=({initiatives:e})=>{const t=e.length?Math.round(e.reduce((a,d)=>a+(Number(d.progress)||0),0)/e.length):0,s=T.reduce((a,d)=>(a[d]=e.filter(o=>o.status===d).length,a),{}),n=F.map(a=>({pillar:a,count:e.filter(d=>d.pillar===a).length}));return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-ocean"},React.createElement(ce,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Strategic plan overview")),React.createElement("h1",{className:"font-display text-3xl md:text-4xl text-ink mt-4"},"Keep the plan visible, updates flowing, and leadership aligned."),React.createElement("p",{className:"text-stone-600 mt-3"},"Track progress across strategic pillars, gather field updates, and review submissions in one shared space."),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Overall progress"),React.createElement("span",null,t,"%")),React.createElement(W,{value:t}))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},React.createElement(P,{label:"Active initiatives",value:e.length,helper:"Across all pillars"}),React.createElement(P,{label:"On track",value:s["On track"]||0,helper:"Healthy momentum"}),React.createElement(P,{label:"At risk",value:s["At risk"]||0,helper:"Needs attention"}),React.createElement(P,{label:"Behind",value:s.Behind||0,helper:"Escalate support"}))),React.createElement("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4"},n.map(a=>React.createElement("div",{key:a.pillar,className:"bg-white rounded-2xl p-4 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},a.pillar),React.createElement("div",{className:"font-display text-2xl mt-2"},a.count),React.createElement("div",{className:"text-xs text-stone-500"},"Initiatives tracked")))))},be=({initiatives:e,onSelect:t,onAdd:s,onRefresh:n,isLoading:a})=>{const[d,o]=p(""),[x,r]=p(""),[u,k]=p(""),S=U(()=>e.filter(l=>{const C=[l.title,l.description,l.owner,l.coChampions,l.pillar,l.status].join(" ").toLowerCase();return!(d&&!C.includes(d.toLowerCase())||x&&l.pillar!==x||u&&l.status!==u)}),[e,d,x,u]);return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Strategic initiatives"),React.createElement("p",{className:"text-stone-600"},"Browse progress, submit updates, and review action items.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:n,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:a},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(ue,{size:16})," Refresh")),React.createElement("button",{onClick:s,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(pe,{size:16})," Add initiative")))),React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-4 card-shadow mb-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("input",{type:"text",value:d,onChange:l=>o(l.target.value),placeholder:"Search initiatives",className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("select",{value:x,onChange:l=>r(l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"All pillars"),F.map(l=>React.createElement("option",{key:l,value:l},l))),React.createElement("select",{value:u,onChange:l=>k(l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"All statuses"),T.map(l=>React.createElement("option",{key:l,value:l},l))))),S.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"No initiatives found. Adjust filters or add a new initiative."):React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5"},S.map(l=>React.createElement(me,{key:l.id,initiative:l,onSelect:()=>t(l.id)}))))},we=({initiative:e,onBack:t,onEdit:s,onSubmitUpdate:n,onReviewUpdate:a})=>{const d=le(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(q,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.pillar),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(K,{status:e.status}),React.createElement("button",{onClick:s,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Owner"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(W,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet")))),React.createElement("div",{className:"mt-6"},React.createElement(xe,{initiative:e,onSubmit:o=>n(e,o)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},d.length," updates")),d.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},d.map(o=>React.createElement(ge,{key:o.id,update:o,onReviewSave:(x,r,u)=>a(e,x,r,u)})))))},fe=()=>{const[e,t]=p([]),[s,n]=p("dashboard"),[a,d]=p(null),[o,x]=p(null),[r,u]=p(!0),[k,S]=p(!1),[l,C]=p(!1),L=U(()=>e.find(i=>i.id===a)||null,[e,a]),I=U(()=>e.find(i=>i.id===o)||null,[e,o]);ae(()=>{M()},[]);const M=async({useCache:i=!0}={})=>{var v,N;if(!j){const w=B();t(((w==null?void 0:w.objects)||[]).map(A)),C(!1),u(!1);return}const c=i?B():null,y=c&&Date.now()-c.updatedAt<re;(v=c==null?void 0:c.objects)!=null&&v.length?(t(c.objects.map(A)),C(g.isConfigured()),u(!1)):u(!0);try{const h=(await g.fetchAll()||[]).map(A);t(h),C(g.isConfigured()),E(h)}catch(w){console.error("Failed to load data:",w),(N=c==null?void 0:c.objects)!=null&&N.length||t(O.map(A))}u(!1)},m=i=>{d(i),n("detail"),window.scrollTo(0,0)},R=()=>{x(null),n("add"),window.scrollTo(0,0)},Y=i=>{x(i.id),n("edit"),window.scrollTo(0,0)};return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-ocean text-white flex items-center justify-center"},React.createElement(ie,{size:20})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm"},React.createElement("button",{onClick:()=>{n("dashboard"),d(null)},className:`px-3 py-2 rounded-lg ${s==="dashboard"?"bg-stone-100":""}`},"Dashboard"),React.createElement("button",{onClick:()=>{n("list"),d(null)},className:`px-3 py-2 rounded-lg ${s==="list"?"bg-stone-100":""}`},"Initiatives"),React.createElement("span",{className:`text-xs ${l?"text-emerald-600":"text-steel"}`},l?"Synced":"Local"))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},r?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,s==="dashboard"&&React.createElement(he,{initiatives:e}),s==="list"&&React.createElement(be,{initiatives:e,onSelect:m,onAdd:R,onRefresh:()=>M({useCache:!1}),isLoading:r}),s==="detail"&&L&&React.createElement(we,{initiative:L,onBack:()=>n("list"),onEdit:()=>Y(L),onSubmitUpdate:async(i,c)=>{const y=[c,...i.updates||[]],v=f(b({},i),{updates:y,progress:c.progress,lastUpdateAt:c.date});try{await g.update(v),t(N=>{const w=N.map(h=>h.id===i.id?A(v):h);return E(w),w})}catch(N){console.error("Failed to submit update:",N),alert("Failed to submit update. Please try again.")}},onReviewUpdate:async(i,c,y,v)=>{const N=(i.updates||[]).map(h=>h.id===c?f(b({},h),{reviewStatus:y,reviewNotes:v}):h),w=f(b({},i),{updates:N});try{await g.update(w),t(h=>{const G=h.map(V=>V.id===i.id?A(w):V);return E(G),G})}catch(h){console.error("Failed to save review:",h),alert("Failed to save review. Please try again.")}}}),(s==="add"||s==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>n(I?"detail":"list"),className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(q,{size:18})," Cancel"),React.createElement(ve,{initiative:I,onSave:async i=>{S(!0);try{if(I){const c=await g.update(f(b({},i),{updates:i.updates||[]}));t(y=>{const v=y.map(N=>N.id===c.id?A(c):N);return E(v),v}),d(c.id),n("detail")}else{const c=await g.create(f(b({},i),{id:i.id||Z(),updates:i.updates||[]}));t(y=>{const v=[...y,A(c)];return E(v),v}),d(c.id),n("detail")}}catch(c){console.error("Failed to save initiative:",c),alert("Failed to save. Please try again.")}S(!1)},onCancel:()=>n(I?"detail":"list"),isSaving:k})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},Ne=ReactDOM.createRoot(document.getElementById("root"));Ne.render(React.createElement(fe,null));})();
