(()=>{var ct=Object.defineProperty,ut=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var Re=(e,t,s)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,b=(e,t)=>{for(var s in t||(t={}))je.call(t,s)&&Re(e,s,t[s]);if(ce)for(var s of ce(t))Me.call(t,s)&&Re(e,s,t[s]);return e},N=(e,t)=>ut(e,pt(t));var Ge=(e,t)=>{var s={};for(var c in e)je.call(e,c)&&t.indexOf(c)<0&&(s[c]=e[c]);if(e!=null&&ce)for(var c of ce(e))t.indexOf(c)<0&&Me.call(e,c)&&(s[c]=e[c]);return s};const{useState:h,useEffect:X,useMemo:pe}=React,_e="nsh-strategy-cache-v1",Ue="nsh-strategy-metrics-cache-v1",$e="nsh-strategy-sections-cache-v1",fe="nsh-strategy-quarterly-cache-v1",ye="nsh-strategy-vision-cache-v1",ue="nsh-strategy-focus-goals-cache-v1",mt=300*1e3,Ne=()=>{try{const e=localStorage.getItem(_e);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},se=e=>{try{localStorage.setItem(_e,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},ke=!0,Q="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",Ve=Q,oe=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],Ce=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fundraising",sheet:"Fundraising"},{key:"events",label:"Events",sheet:"Events"},{key:"marketing",label:"Marketing",sheet:"Marketing"},{key:"venue",label:"Venue",sheet:"Venue"}],ee=["Not started","On track","At risk","Behind","Complete"],gt=["Pending","Reviewed","Needs info"],Je=Array.from({length:11},(e,t)=>t*10),Se=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"We will have a clear set of documented programs and services that reinforce the House's role as a cultural historical gathering center and are well-organized, financially sustainable, and have clearly communicated teams of staff/volunteers that run each of the programs/services.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"A smooth-running organization that ensures the success of the Conservancy.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"},{id:"3",title:"Complete house restoration and grounds plan",focusArea:"House and Grounds Development",description:"Finish the first floor renovation, restore the second floor with a volunteer crew, install fire suppression, and clarify the grounds plan.",owner:"Facilities Lead",coChampions:"Volunteer Crew Lead, Board Liaison",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"First floor renovated, second floor restored, fire suppression installed, grounds plan approved.",threeYearVision:"Complete the first floor renovation. The 2nd floor of the house will be restored by a clearly-led and well-organized volunteer crew. A fire suppression system will be installed. Plans for the rest of the grounds will have been clarified.",annualGoals:"Confirm scope, recruit volunteer crew, secure fire suppression bids, draft grounds plan options.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"},{id:"4",title:"Staff and organize fund development plan",focusArea:"Fund Development",description:"Build staffing, systems, and campaign execution to accelerate fundraising.",owner:"Development Director",coChampions:"Board Treasurer, Capital Campaign Chair",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"Fund development staffing in place, $1M raised toward capital campaign.",threeYearVision:"Over the next three years we will have successfully staffed and organized our fund development plans and raised $1M of the $2M capital campaign.",annualGoals:"Hire development lead, finalize campaign plan, raise initial $250k.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"}],vt=[{id:"fg-1",focusArea:"Fund Development",goalTopic:"Annual goal",annualGoals:"Document the Conservancy\u2019s fund development plan.",annualGoalsItems:[],goalDetails:"",goalLead:"",futureGoals:"",startDate:"",dueDate:"",goalChampions:"Jeff, Haley",goalTeamMembers:"",progress:"Not Started",category:""}],f={isConfigured:()=>ke&&Q&&Q.length>0,postJson:async(e,t)=>{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Request failed");return s.json()},fetchAll:async()=>{if(!ke){const e=Ne();return(e==null?void 0:e.objects)||[]}if(!f.isConfigured())return console.log("Google Sheets not configured, using sample data"),Se;try{const e=await fetch(`${Q}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),Se}},create:async e=>{if(!f.isConfigured())return console.log("Google Sheets not configured, saving locally only"),N(b({},e),{id:Date.now().toString()});try{return(await f.postJson(Q,{action:"create",object:e})).result||N(b({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),N(b({},e),{id:Date.now().toString()})}},update:async e=>{if(!f.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await f.postJson(Q,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!f.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await f.postJson(Q,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:s})=>{if(!Ve)throw new Error("Drive upload not configured");const c={action:"uploadImage",filename:e,mimeType:t,data:s},x=await f.postJson(Ve,c);if(!x.success)throw new Error(x.error||"Upload failed");return x.result},fetchMetrics:async()=>{if(!f.isConfigured())return null;try{const e=await fetch(`${Q}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!f.isConfigured())throw new Error("Google Sheets not configured");const t=await f.postJson(Q,{action:"submitQuarterlyUpdate",form:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},submitReviewUpdate:async e=>{if(!f.isConfigured())throw new Error("Google Sheets not configured");const t=await f.postJson(Q,{action:"submitReviewUpdate",review:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},fetchVisionStatements:async()=>{if(!f.isConfigured())return[];try{const e=await fetch(`${Q}?action=getVisionStatements`);if(!e.ok)throw new Error("Failed to fetch vision statements");return(await e.json()).vision||[]}catch(e){return console.error("Error fetching vision statements:",e),[]}},updateVisionStatement:async e=>{if(!f.isConfigured())throw new Error("Google Sheets not configured");const t=await f.postJson(Q,{action:"updateVisionStatement",vision:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},fetchFocusAreaGoals:async()=>{if(!f.isConfigured())return[];try{const e=await fetch(`${Q}?action=getFocusAreaGoals`);if(!e.ok)throw new Error("Failed to fetch focus area goals");return(await e.json()).goals||[]}catch(e){return console.error("Error fetching focus area goals:",e),[]}},updateFocusAreaGoal:async e=>{if(!f.isConfigured())throw new Error("Google Sheets not configured");const t=await f.postJson(Q,{action:"updateFocusAreaGoal",goal:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},deleteFocusAreaGoal:async e=>{if(!f.isConfigured())throw new Error("Google Sheets not configured");const t=await f.postJson(Q,{action:"deleteFocusAreaGoal",id:e});if(!t.success)throw new Error(t.error||"Delete failed");return t.result},fetchQuarterlyUpdates:async()=>{if(!f.isConfigured())return[];try{const e=await fetch(`${Q}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!f.isConfigured())return null;try{const e=await fetch(`${Q}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},re=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read cache:",t),null}},_=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(s){console.warn("Failed to write cache:",s)}},Ye=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,Ae=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},xt=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const s=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),x=String(t.getFullYear());return`${s}-${c}-${x}`},ht=e=>{switch(e){case"Q1":return"Q2";case"Q2":return"Q3";case"Q3":return"Q4";case"Q4":return"Final";default:return null}},we=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),ze=e=>{if(e==null)return"N/A";const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)},Fe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},bt=(e,t=3)=>{const s=[];for(String(e||"").split(`
`).map(x=>x.trim()).filter(Boolean).forEach(x=>{const o=x.split("|").map(S=>S.trim()),[i="",A="",l=""]=o;s.push({action:i,owner:A,deadline:l})});s.length<t;)s.push({action:"",owner:"",deadline:""});return s.slice(0,t)},Le=e=>e.map(t=>[t.action,t.owner,t.deadline].map(s=>s.trim()).join(" | ")).filter(t=>t.replace(/\|/g,"").trim()!=="").join(`
`),W=e=>N(b({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),ft=e=>e.slice().sort((t,s)=>new Date(s.date)-new Date(t.date)),yt=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-gold text-white border-gold";default:return"bg-stone-100 text-stone-600 border-stone-200"}},wt=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},Nt=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const ne=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const He=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const kt=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),Ct=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${yt(e)}`},e);const St=({update:e,onReviewSave:t})=>{const[s,c]=h(e.reviewStatus||"Pending"),[x,o]=h(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Ae(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${wt(s)}`},s)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-gold"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:s,onChange:i=>c(i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},gt.map(i=>React.createElement("option",{key:i,value:i},i))),React.createElement("input",{type:"text",value:x,onChange:i=>o(i.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,s,x),className:"px-4 py-2 bg-gold text-white rounded-lg text-sm"},"Save review"))))},At=({initiative:e,onSubmit:t})=>{const[s,c]=h(""),[x,o]=h(""),[i,A]=h(""),[l,S]=h(""),[m,y]=h(""),[I,D]=h(e.progress||0),[P,U]=h("");return React.createElement("form",{onSubmit:g=>{g.preventDefault();const a={id:Ye(),date:new Date().toISOString(),author:s,summary:x,details:i,blockers:l,nextSteps:m,progress:Number(I)||0,links:P,reviewStatus:"Pending",reviewNotes:""};t(a),c(""),o(""),A(""),S(""),y(""),D(e.progress||0),U("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:s,onChange:g=>c(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:x,onChange:g=>o(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:i,onChange:g=>A(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:l,onChange:g=>S(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:m,onChange:g=>y(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:I,onChange:g=>D(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Je.map(g=>React.createElement("option",{key:g,value:g},g,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:P,onChange:g=>U(g.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Ft=({initiative:e,onSave:t,onCancel:s,isSaving:c})=>{const[x,o]=h(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||ee[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),i=(l,S)=>{o(m=>N(b({},m),{[l]:S}))};return React.createElement("form",{onSubmit:l=>{l.preventDefault();const S=N(b(b({},e),x),{progress:Number(x.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(S)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:x.title,onChange:l=>i("title",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:x.focusArea,onChange:l=>i("focusArea",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),oe.map(l=>React.createElement("option",{key:l,value:l},l)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:x.owner,onChange:l=>i("owner",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:x.description,onChange:l=>i("description",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:x.coChampions,onChange:l=>i("coChampions",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:x.status,onChange:l=>i("status",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ee.map(l=>React.createElement("option",{key:l,value:l},l)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:x.progress,onChange:l=>i("progress",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Je.map(l=>React.createElement("option",{key:l,value:l},l,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:x.targetDate,onChange:l=>i("targetDate",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:x.successMetrics,onChange:l=>i("successMetrics",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:x.threeYearVision,onChange:l=>i("threeYearVision",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:x.annualGoals,onChange:l=>i("annualGoals",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:x.notes,onChange:l=>i("notes",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:s,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:c,className:"px-5 py-2 bg-gold text-white rounded-lg"},c?"Saving...":"Save initiative")))},Be=()=>({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},nextPriorities:["","",""],finalTallyOverview:""}),Dt=({onSubmitted:e,initialData:t})=>{const[s,c]=h(Be),[x,o]=h(!1),[i,A]=h(!1),[l,S]=h([]),m=`nsh-quarterly-next-${s.focusArea||"area"}-${s.quarter||"quarter"}`,y=(a,v)=>{c(u=>N(b({},u),{[a]:v}))},I=(a,v,u)=>{c(F=>{const R=F.goals.map((j,L)=>L===a?N(b({},j),{[v]:u}):j);return N(b({},F),{goals:R})})},D=(a,v)=>{c(u=>N(b({},u),{challenges:N(b({},u.challenges),{[a]:v})}))},P=(a,v)=>{c(u=>N(b({},u),{supportTypes:N(b({},u.supportTypes),{[a]:v})}))},U=(a,v)=>{c(u=>{const F=u.nextPriorities.map((R,j)=>j===a?v:R);return N(b({},u),{nextPriorities:F})})};X(()=>{t&&(c(a=>N(b(b({},Be()),t),{challenges:b(b({},a.challenges),t.challenges||{}),supportTypes:b(b({},a.supportTypes),t.supportTypes||{})})),S(t.uploadedFiles||[]))},[t]),X(()=>{var v;if(t||!s.focusArea||!s.quarter||s.primaryFocus||(v=s.goals)!=null&&v.some(u=>u.goal))return;const a=localStorage.getItem(m);if(a)try{const u=JSON.parse(a);if(!u)return;c(F=>{var R;return N(b({},F),{primaryFocus:u.primaryFocus||F.primaryFocus,goals:(R=u.goals)!=null&&R.length?u.goals:F.goals})})}catch(u){console.warn("Failed to read quarterly suggestion:",u)}},[t,s.focusArea,s.quarter,s.primaryFocus,s.goals,m]);const J=async a=>{a.preventDefault(),A(!0);try{await f.submitQuarterlyUpdate(N(b({},s),{uploadedFiles:l}));const v=ht(s.quarter);if(v&&s.focusArea){const u=`nsh-quarterly-next-${s.focusArea}-${v}`,F=s.nextPriorities||[],R={primaryFocus:F[0]||"",goals:[{goal:F[0]||"",status:"On Track",summary:""},{goal:F[1]||"",status:"On Track",summary:""},{goal:F[2]||"",status:"On Track",summary:""}]};localStorage.setItem(u,JSON.stringify(R))}await(e==null?void 0:e())}catch(v){console.error("Quarterly update submit failed:",v),alert("Submission failed. Please try again.")}A(!1)},g=async a=>{const v=Array.from(a.target.files||[]);if(v.length){o(!0);try{const u=await Promise.all(v.map(F=>new Promise((R,j)=>{const L=new FileReader;L.onload=async()=>{const te=String(L.result||"").split(",")[1]||"";try{const ae=await f.uploadFile({filename:F.name,mimeType:F.type,data:te});R(ae)}catch(ae){j(ae)}},L.onerror=j,L.readAsDataURL(F)})));S(F=>[...F,...u])}catch(u){console.error("Failed to upload files:",u),alert("Failed to upload files. Please try again.")}o(!1),a.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:J,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:s.focusArea,onChange:a=>y("focusArea",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select area"),Ce.map(a=>React.createElement("option",{key:a.label,value:a.label},a.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:s.quarter,onChange:a=>y("quarter",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Q4","Final"].map(a=>React.createElement("option",{key:a,value:a},a==="Q1"?"Q1 (Jan 1 \u2013 Mar 31)":a==="Q2"?"Q2 (Apr 1 \u2013 Jun 30)":a==="Q3"?"Q3 (Jul 1 \u2013 Sep 30)":a==="Q4"?"Q4 (Oct 1 \u2013 Dec 31)":a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:s.year,onChange:a=>y("year",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:s.submittedDate,onChange:a=>y("submittedDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus and goals"),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Primary focus this quarter"),React.createElement("textarea",{value:s.primaryFocus,onChange:a=>y("primaryFocus",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Main priorities or themes."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Quarterly goals and status"),React.createElement("div",{className:"mt-3 space-y-4"},s.goals.map((a,v)=>React.createElement("div",{key:v,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:a.goal,onChange:u=>I(v,"goal",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${v+1}`}),React.createElement("select",{value:a.status,onChange:u=>I(v,"status",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(u=>React.createElement("option",{key:u,value:u},u))),React.createElement("input",{type:"text",value:a.summary,onChange:u=>I(v,"summary",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly reflection"),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"What went well"),React.createElement("textarea",{value:s.wins,onChange:a=>y("wins",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.capacity,onChange:a=>D("capacity",a.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.budget,onChange:a=>D("budget",a.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.scheduling,onChange:a=>D("scheduling",a.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.coordination,onChange:a=>D("coordination",a.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.external,onChange:a=>D("external",a.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.other,onChange:a=>D("other",a.target.checked)}),"Other")),s.challenges.other&&React.createElement("input",{type:"text",value:s.challenges.otherText,onChange:a=>D("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:s.challenges.details,onChange:a=>D("details",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Support needed to stay on track"),React.createElement("textarea",{value:s.supportNeeded,onChange:a=>y("supportNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.staff,onChange:a=>P("staff",a.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.marketing,onChange:a=>P("marketing",a.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.board,onChange:a=>P("board",a.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.funding,onChange:a=>P("funding",a.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.facilities,onChange:a=>P("facilities",a.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.other,onChange:a=>P("other",a.target.checked)}),"Other")),s.supportTypes.other&&React.createElement("input",{type:"text",value:s.supportTypes.otherText,onChange:a=>P("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Goals for next quarter"),React.createElement("div",{className:"mt-3 space-y-2"},s.nextPriorities.map((a,v)=>React.createElement("input",{key:v,type:"text",value:a,onChange:u=>U(v,u.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${v+1}.`})))),s.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:s.finalTallyOverview,onChange:a=>y("finalTallyOverview",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-gold text-white rounded-lg",disabled:i},i?"Submitting...":"Submit quarterly update")))))},Tt=({areaLabel:e,quarter:t,review:s,onSave:c})=>{const x=a=>({statusAfterReview:(a==null?void 0:a.statusAfterReview)||"",actionsRows:bt(a==null?void 0:a.actionsAssigned),crossAreaImpacts:(a==null?void 0:a.crossAreaImpacts)||"",areasImpacted:(a==null?void 0:a.areasImpacted)||"",coordinationNeeded:(a==null?void 0:a.coordinationNeeded)||"",priorityConfirmation:(a==null?void 0:a.priorityConfirmation)||"",escalationFlag:(a==null?void 0:a.escalationFlag)||"",reviewCompletedOn:Fe(a==null?void 0:a.reviewCompletedOn),nextCheckInDate:Fe(a==null?void 0:a.nextCheckInDate)}),[o,i]=h(()=>x(s)),[A,l]=h(!1),[S,m]=h(!1);X(()=>{i(x(s))},[s,e,t]),X(()=>{m(!1)},[e,t]);const y=(a,v)=>{i(u=>N(b({},u),{[a]:v}))},I=(a,v,u)=>{i(F=>{const R=F.actionsRows.map((j,L)=>L===a?N(b({},j),{[v]:u}):j);return N(b({},F),{actionsRows:R})})},D=async()=>{l(!0);const a=o.crossAreaImpacts==="Affects another area",v={focusArea:e,quarter:t,statusAfterReview:o.statusAfterReview,actionsAssigned:Le(o.actionsRows),crossAreaImpacts:o.crossAreaImpacts,areasImpacted:a?o.areasImpacted:"",coordinationNeeded:a?o.coordinationNeeded:"",priorityConfirmation:o.priorityConfirmation,escalationFlag:o.escalationFlag,reviewCompletedOn:o.reviewCompletedOn,nextCheckInDate:o.nextCheckInDate};try{await c(v)}catch(u){console.error("Failed to save review:",u),alert("Failed to save review. Please try again.")}l(!1)},P=["On track","Minor adjustments needed","Off track - intervention required"],U=["None","Affects another area"],J=["Approved","Adjusted","Replaced"],g=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];if(!S){const v=[{label:"Status After Review",value:o.statusAfterReview},{label:"Actions Assigned",value:Le(o.actionsRows)},{label:"Cross-Area Impacts",value:o.crossAreaImpacts},{label:"Area(s) impacted",value:o.areasImpacted},{label:"Coordination needed",value:o.coordinationNeeded},{label:"Priority Confirmation (Next Quarter)",value:o.priorityConfirmation},{label:"Escalation Flag",value:o.escalationFlag},{label:"Review completed on",value:o.reviewCompletedOn},{label:"Next check-in date",value:o.nextCheckInDate}].filter(u=>u.value);return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>m(!0),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Edit review")),v.length===0?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No review submitted yet."):React.createElement("div",{className:"mt-4 space-y-2 text-sm text-stone-700"},v.map(u=>React.createElement("div",{key:u.label},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.label),React.createElement("div",{className:"whitespace-pre-wrap"},u.value)))))}return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Close")),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},P.map(a=>React.createElement("label",{key:a,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-status`,value:a,checked:o.statusAfterReview===a,onChange:v=>y("statusAfterReview",v.target.value),className:"accent-clay"}),React.createElement("span",null,a))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},o.actionsRows.map((a,v)=>React.createElement("div",{key:v,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:a.action,onChange:u=>I(v,"action",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:a.owner,onChange:u=>I(v,"owner",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:a.deadline,onChange:u=>I(v,"deadline",u.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},U.map(a=>React.createElement("label",{key:a,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-impact`,value:a,checked:o.crossAreaImpacts===a,onChange:v=>y("crossAreaImpacts",v.target.value),className:"accent-clay"}),React.createElement("span",null,a)))),o.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:o.areasImpacted,onChange:a=>y("areasImpacted",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:o.coordinationNeeded,onChange:a=>y("coordinationNeeded",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},J.map(a=>React.createElement("label",{key:a,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-priority`,value:a,checked:o.priorityConfirmation===a,onChange:v=>y("priorityConfirmation",v.target.value),className:"accent-clay"}),React.createElement("span",null,a))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},g.map(a=>React.createElement("label",{key:a,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-escalation`,value:a,checked:o.escalationFlag===a,onChange:v=>y("escalationFlag",v.target.value),className:"accent-clay"}),React.createElement("span",null,a))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:o.reviewCompletedOn,onChange:a=>y("reviewCompletedOn",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:o.nextCheckInDate,onChange:a=>y("nextCheckInDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:D,disabled:A,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},A?"Saving...":"Save review")))},It=({focusArea:e,vision:t,onSave:s,isSaving:c})=>{const[x,o]=h(!1),[i,A]=h(t||"");return X(()=>{x||A(t||"")},[t,x]),React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e),React.createElement("div",{className:"flex items-center gap-2 text-xs"},x?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>{o(!1),A(t||"")},className:"px-2 py-1 border border-stone-200 rounded-lg",disabled:c},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{s(e,i),o(!1)},className:"px-2 py-1 bg-gold text-white rounded-lg",disabled:c},c?"Saving...":"Save")):React.createElement("button",{type:"button",onClick:()=>o(!0),className:"px-2 py-1 border border-stone-200 rounded-lg"},"Edit"))),x?React.createElement("textarea",{value:i,onChange:S=>A(S.target.value),className:"w-full mt-3 px-3 py-2 border border-stone-200 rounded-lg text-sm min-h-[120px]",placeholder:"Describe what success looks like in three years."}):React.createElement("div",{className:"text-sm text-stone-700 mt-2 space-y-1"},t?String(t).split(`
`).map(S=>S.trim()).filter(Boolean).map((S,m)=>React.createElement("div",{key:`${e}-vision-${m}`,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("span",{className:"whitespace-pre-wrap"},S))):React.createElement("span",null,"Add a three-year vision for this focus area.")))},Et=({focusArea:e,initialGoal:t,presetCategory:s,onSave:c,onCancel:x,isSaving:o})=>{const[i,A]=h(()=>({id:(t==null?void 0:t.id)||"",focusArea:e,goalTopic:"Annual goal",annualGoals:(t==null?void 0:t.annualGoals)||"",startDate:(t==null?void 0:t.startDate)||"",dueDate:(t==null?void 0:t.dueDate)||"",progress:(t==null?void 0:t.progress)||ee[0],category:(t==null?void 0:t.category)||s||"Annual goals",goalDetails:(t==null?void 0:t.goalDetails)||"",goalLead:(t==null?void 0:t.goalLead)||"",futureGoals:(t==null?void 0:t.futureGoals)||""})),l=(m,y)=>{A(I=>N(b({},I),{[m]:y}))};return React.createElement("form",{onSubmit:m=>{m.preventDefault(),c(N(b({},i),{goalTopic:"Annual goal",annualGoalsItems:[]}))},className:"mt-4 bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goal"),React.createElement("input",{type:"text",value:i.annualGoals,onChange:m=>l("annualGoals",m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:i.goalLead,onChange:m=>l("goalLead",m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("textarea",{value:i.goalDetails,onChange:m=>l("goalDetails",m.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[60px]",placeholder:"Add details, notes, or key steps."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Due date"),React.createElement("input",{type:"date",value:Fe(i.dueDate),onChange:m=>l("dueDate",m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:i.progress,onChange:m=>l("progress",m.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ee.map(m=>React.createElement("option",{key:m,value:m},m))))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:x,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:o},"Cancel"),React.createElement("button",{type:"submit",className:"px-4 py-2 bg-gold text-white rounded-lg text-sm",disabled:o},o?"Saving...":"Save goal")))},qe=({focusArea:e,goals:t,onSaveGoal:s,onDeleteGoal:c,isSaving:x,hideTitle:o})=>{const[i,A]=h(null),[l,S]=h(!1),[m,y]=h("Annual goals"),I=pe(()=>t.filter(g=>!g.category||g.category==="Annual goals"||g.category==="Goals"),[t]),D=pe(()=>t.filter(g=>g.category==="Future Goals"),[t]),P=g=>{S(!1),A(g),y(g.category||"Annual goals")},U=g=>{A(null),S(!0),y(g)},J=g=>{s(g),A(null),S(!1)};return React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},!o&&React.createElement("div",{className:"font-display text-xl text-ink"},e),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Annual goals"),React.createElement("button",{type:"button",onClick:()=>U("Annual goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),I.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No annual goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},I.map(g=>React.createElement("div",{key:g.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},g.annualGoals||"Untitled goal")),g.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},g.goalDetails)),React.createElement("button",{type:"button",onClick:()=>P(g),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,g.dueDate?`Due: ${Ae(g.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},g.progress||ee[0])))))),React.createElement("div",{className:"mt-6 border-t border-stone-200 pt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Future goals"),React.createElement("button",{type:"button",onClick:()=>U("Future Goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),D.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No future goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},D.map(g=>React.createElement("div",{key:g.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},g.annualGoals||"Untitled goal")),g.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},g.goalDetails)),React.createElement("button",{type:"button",onClick:()=>P(g),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,g.dueDate?`Due: ${Ae(g.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},g.progress||ee[0])))))),(l||i)&&React.createElement(Et,{focusArea:e,initialGoal:i,presetCategory:m,onSave:J,onCancel:()=>{S(!1),A(null)},isSaving:x}))},Ot=({goals:e,onSaveGoal:t,onDeleteGoal:s,isSaving:c,focusFilter:x})=>{const o=x?oe.filter(i=>i===x):oe;return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Focus areas"),React.createElement("p",{className:"text-stone-600 mt-1"},"Track goals by strategic focus area."))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},o.map(i=>React.createElement(qe,{key:i,focusArea:i,goals:e.filter(A=>A.focusArea===i),onSaveGoal:t,onDeleteGoal:s,isSaving:c}))))},Pt=({initiatives:e,metrics:t,visionStatements:s,onSaveVision:c,isSavingVision:x})=>{const[o,i]=h(null),A=e.length?Math.round(e.reduce((m,y)=>m+(Number(y.progress)||0),0)/e.length):0,l=oe.map(m=>({focusArea:m,count:e.filter(y=>y.focusArea===m).length})),S=oe.map(m=>{const y=s==null?void 0:s.find(D=>D.focusArea===m),I=e.find(D=>D.focusArea===m&&D.threeYearVision);return{focusArea:m,vision:(y==null?void 0:y.threeYearVision)||(I==null?void 0:I.threeYearVision)||""}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-gold"},React.createElement(Nt,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To revitalize North Star House as a cultural gathering place that connects people of all ages through the arts, theater, literature, history, and music\u2014fostering creativity, learning, and community for generations to come."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"},"Vision: [Add your vision statement here]")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:we(t==null?void 0:t.volunteersCount)},{label:"Events booked",value:we(t==null?void 0:t.eventsCount)},{label:"Donation total",value:ze(t==null?void 0:t.donationsTotal)},{label:"Sponsors",value:we(t==null?void 0:t.sponsorsCount)}].map(m=>React.createElement("div",{key:m.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},m.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},m.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},S.map(m=>React.createElement(It,{key:m.focusArea,focusArea:m.focusArea,vision:m.vision,onSave:c,isSaving:x})))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly focus"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"Tap to expand")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},["Q1","Q2","Q3","Q4","Final"].map(m=>{const y=o===m;return React.createElement("div",{key:m,className:"bg-white rounded-2xl border border-stone-100 card-shadow"},React.createElement("button",{type:"button",onClick:()=>i(y?null:m),className:"w-full flex items-center justify-between px-5 py-4 text-left"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("div",{className:"font-display text-xl text-ink"},m)),React.createElement("span",{className:"text-sm text-gold"},y?"Close":"Open")),y&&React.createElement("div",{className:"px-5 pb-5 text-sm text-stone-700"},"Add quarterly priorities, milestones, and key outcomes here."))}))))};const Qt=({initiative:e,onBack:t,onEdit:s,onSubmitUpdate:c,onReviewUpdate:x})=>{const o=ft(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(He,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(Ct,{status:e.status}),React.createElement("button",{onClick:s,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(kt,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(At,{initiative:e,onSubmit:i=>c(e,i)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},o.length," updates")),o.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},o.map(i=>React.createElement(St,{key:i.id,update:i,onReviewSave:(A,l,S)=>x(e,A,l,S)})))))},Rt=()=>{const[e,t]=h([]),[s,c]=h("dashboard"),[x,o]=h(null),[i,A]=h(null),[l,S]=h(!0),[m,y]=h(!1),[I,D]=h(!1),[P,U]=h({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[J,g]=h([]),[a,v]=h(!1),[u,F]=h([]),[R,j]=h(!1),[L,te]=h(null),[ae,De]=h(!1),[le,Te]=h(null),me={Construction:"House and Grounds Development",Grounds:"House and Grounds Development",Interiors:"House and Grounds Development",Fundraising:"Fund Development",Marketing:"Organizational Development",Venue:"Fund Development",Docents:"Programs and Events",Events:"Programs and Events"},[We,Ie]=h({Construction:null,Grounds:null,Interiors:null,Docents:null,Fundraising:null,Events:null,Marketing:null,Venue:null}),[de,ge]=h([]),[Ze,Ee]=h(null),[K,ve]=h(null),[Y,Z]=h(null),[xe,Oe]=h(!1),z=Ce.reduce((r,d)=>(r[d.key]={label:d.label,key:d.sheet},r),{}),he=pe(()=>e.find(r=>r.id===x)||null,[e,x]),ie=pe(()=>e.find(r=>r.id===i)||null,[e,i]);X(()=>{be()},[]);const be=async({useCache:r=!0}={})=>{var $,V;if(!ke){const M=Ne();t(((M==null?void 0:M.objects)||[]).map(W)),D(!1),F(vt),S(!1);return}const d=r?Ne():null,k=d&&Date.now()-d.updatedAt<mt,n=r?re(Ue):null,w=r?re($e):null,C=r?re(fe):null,p=r?re(ye):null,E=r?re(ue):null;($=d==null?void 0:d.objects)!=null&&$.length?(t(d.objects.map(W)),D(f.isConfigured()),S(!1)):S(!0),n&&U(n),w&&Ie(w),C&&ge(C),p&&g(p),E&&F(E);try{const q=(await f.fetchAll()||[]).map(W);t(q),D(f.isConfigured()),se(q)}catch(M){console.error("Failed to load data:",M),(V=d==null?void 0:d.objects)!=null&&V.length||t(Se.map(W))}S(!1);const G=await f.fetchMetrics();G&&(U(G),_(Ue,G));const B=await f.fetchSectionSnapshots();B&&(Ie(B),_($e,B));const H=await f.fetchQuarterlyUpdates();H.length&&(ge(H),_(fe,H));const T=await f.fetchVisionStatements();T.length&&(g(T),_(ye,T));const O=await f.fetchFocusAreaGoals();O.length&&(F(O),_(ue,O))},Mt=r=>{o(r),c("detail"),window.scrollTo(0,0)},Gt=()=>{A(null),c("add"),window.scrollTo(0,0)},Ke=r=>{A(r.id),c("edit"),window.scrollTo(0,0)},Xe=async r=>{y(!0);try{if(ie){const d=await f.update(N(b({},r),{updates:r.updates||[]}));t(k=>{const n=k.map(w=>w.id===d.id?W(d):w);return se(n),n}),o(d.id),c("detail")}else{const d=await f.create(N(b({},r),{id:r.id||Ye(),updates:r.updates||[]}));t(k=>{const n=[...k,W(d)];return se(n),n}),o(d.id),c("detail")}}catch(d){console.error("Failed to save initiative:",d),alert("Failed to save. Please try again.")}y(!1)},et=async(r,d)=>{const k=[d,...r.updates||[]],n=N(b({},r),{updates:k,progress:d.progress,lastUpdateAt:d.date});try{await f.update(n),t(w=>{const C=w.map(p=>p.id===r.id?W(n):p);return se(C),C})}catch(w){console.error("Failed to submit update:",w),alert("Failed to submit update. Please try again.")}},tt=async(r,d,k,n)=>{const w=(r.updates||[]).map(p=>p.id===d?N(b({},p),{reviewStatus:k,reviewNotes:n}):p),C=N(b({},r),{updates:w});try{await f.update(C),t(p=>{const E=p.map(G=>G.id===r.id?W(C):G);return se(E),E})}catch(p){console.error("Failed to save review:",p),alert("Failed to save review. Please try again.")}},at=async r=>{const w=r,{focusArea:d,quarter:k}=w,n=Ge(w,["focusArea","quarter"]);await f.submitReviewUpdate(r),ge(C=>{const p=C.findIndex(B=>B.focusArea===d&&B.quarter===k),E=p>=0?N(b({},C[p]),{payload:N(b({},C[p].payload||{}),{review:n})}):{focusArea:d,quarter:k,submittedDate:"",payload:{review:n}},G=p>=0?C.map((B,H)=>H===p?E:B):[...C,E];return _(fe,G),G})},st=(r,d)=>{const n=de.filter(E=>E.focusArea===r&&E.quarter===d).sort((E,G)=>new Date(G.submittedDate||G.createdAt)-new Date(E.submittedDate||E.createdAt))[0],w=(n==null?void 0:n.payload)||{},C=w.year||String(new Date().getFullYear()),p=w.submittedDate||(n==null?void 0:n.submittedDate)||new Date().toISOString().slice(0,10);Ee({focusArea:r,quarter:d,year:C,submittedDate:p,primaryFocus:w.primaryFocus||"",goals:w.goals&&w.goals.length?w.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:w.wins||"",challenges:w.challenges||{},supportNeeded:w.supportNeeded||"",supportTypes:w.supportTypes||{},nextPriorities:w.nextPriorities||["","",""],finalTallyOverview:w.finalTallyOverview||""}),c("quarterly"),window.scrollTo(0,0)},rt=(r,d,k,n)=>{if(d!=="Q1")return;const w=n.year||String(new Date().getFullYear()),C=n.submittedDate||(k==null?void 0:k.submittedDate)||new Date().toISOString().slice(0,10);ve({areaLabel:r,quarter:d}),Z({focusArea:r,quarter:d,year:w,submittedDate:C,primaryFocus:n.primaryFocus||"",goals:n.goals&&n.goals.length?n.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:n.wins||"",challenges:n.challenges||{},supportNeeded:n.supportNeeded||"",supportTypes:n.supportTypes||{},nextPriorities:n.nextPriorities||["","",""],finalTallyOverview:n.finalTallyOverview||"",uploadedFiles:n.uploadedFiles||[]})},ot=async()=>{if(Y){Oe(!0);try{await f.submitQuarterlyUpdate(Y),await be({useCache:!1}),ve(null),Z(null)}catch(r){console.error("Failed to save inline quarterly update:",r),alert("Failed to save. Please try again.")}Oe(!1)}},nt=async()=>{await be({useCache:!1}),Ee(null),c("dashboard")},lt=r=>{const d=me[r]||r;Te(d),De(!0)},dt=async(r,d)=>{v(!0);try{const k=await f.updateVisionStatement({focusArea:r,threeYearVision:d});g(n=>{const w=n.findIndex(p=>p.focusArea===r),C=w>=0?n.map((p,E)=>E===w?k:p):[...n,k];return _(ye,C),C})}catch(k){console.error("Failed to save vision statement:",k),alert("Failed to save. Please try again.")}v(!1)},Pe=async r=>{j(!0);try{const d=await f.updateFocusAreaGoal(r);F(k=>{const n=k.findIndex(C=>C.id===d.id),w=n>=0?k.map((C,p)=>p===n?d:C):[...k,d];return _(ue,w),w})}catch(d){console.error("Failed to save focus goal:",d),alert("Failed to save. Please try again.")}j(!1)},Qe=async r=>{j(!0);try{await f.deleteFocusAreaGoal(r),F(d=>{const k=d.filter(n=>n.id!==r);return _(ue,k),k})}catch(d){console.error("Failed to delete focus goal:",d),alert("Failed to delete. Please try again.")}j(!1)},it=s==="detail"&&he;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(ne,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{c("dashboard"),o(null),te(null)},className:`px-3 py-2 rounded-lg ${s==="dashboard"?"bg-stone-100":""}`},"Overview"),React.createElement("button",{onClick:()=>{c("quarterly"),o(null),te(null)},className:`px-3 py-2 rounded-lg ${s==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${I?"text-emerald-600":"text-steel"}`},I?"Synced":"Local"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("button",{onClick:()=>{c("focus"),o(null),te(null)},className:`tab-button text-sm ${s==="focus"?"active":""}`},"Focus Areas"),Ce.map(r=>React.createElement("button",{key:r.key,onClick:()=>{c(r.key),o(null)},className:`tab-button text-sm ${s===r.key?"active":""}`},r.label)))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},l?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,s==="dashboard"&&React.createElement(Pt,{initiatives:e,metrics:P,visionStatements:J,onSaveVision:dt,isSavingVision:a}),s==="focus"&&React.createElement(Ot,{goals:u,onSaveGoal:Pe,onDeleteGoal:Qe,isSaving:R,focusFilter:L}),s==="quarterly"&&React.createElement(Dt,{onSubmitted:nt,initialData:Ze}),["construction","grounds","interiors","docents","fund","events","marketing","venue"].includes(s)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h2",{className:"font-display text-3xl text-ink"},z[s].label),React.createElement("button",{type:"button",onClick:()=>lt(z[s].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},`Focus area: ${me[z[s].label]||z[s].label}`)),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const r=We[z[s].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(r==null?void 0:r.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},r!=null&&r.budget?ze(r.budget):"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(r==null?void 0:r.volunteers)||"N/A")))})())),ae&&le===me[z[s].label]&&React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-display text-2xl text-ink"},le),React.createElement("button",{type:"button",onClick:()=>{De(!1),Te(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Close")),React.createElement("div",{className:"mt-4"},React.createElement(qe,{focusArea:le,goals:u.filter(r=>r.focusArea===le),onSaveGoal:Pe,onDeleteGoal:Qe,isSaving:R,hideTitle:!0}))),(()=>{const r=[["Q1","Q2"],["Q3","Q4"]],d=z[s].label;return r.map(k=>React.createElement("div",{key:k.join("-"),className:"mt-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},k.map(n=>{var H;const C=de.filter(T=>T.focusArea===d&&T.quarter===n).sort((T,O)=>new Date(O.submittedDate||O.createdAt)-new Date(T.submittedDate||T.createdAt))[0],p=(C==null?void 0:C.payload)||{},E=p.goals&&p.goals.length?p.goals:[{},{},{}],G=p.nextPriorities&&p.nextPriorities.length?p.nextPriorities:["","",""],B=(K==null?void 0:K.areaLabel)===d&&(K==null?void 0:K.quarter)===n;return React.createElement("div",{key:n,className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},n==="Q1"?"Q1 (Jan 1 \u2013 Mar 31)":n==="Q2"?"Q2 (Apr 1 \u2013 Jun 30)":n==="Q3"?"Q3 (Jul 1 \u2013 Sep 30)":n==="Q4"?"Q4 (Oct 1 \u2013 Dec 31)":n),React.createElement("div",{className:"text-xs text-steel"},C!=null&&C.submittedDate?xt(C.submittedDate):"No submission yet")),n==="Q1"?React.createElement("button",{type:"button",onClick:()=>rt(d,n,C,p),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit"):React.createElement("button",{type:"button",onClick:()=>st(d,n),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),B?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("textarea",{value:(Y==null?void 0:Y.primaryFocus)||"",onChange:T=>Z(O=>N(b({},O),{primaryFocus:T.target.value})),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"mt-2 space-y-3"},((Y==null?void 0:Y.goals)||[]).map((T,O)=>React.createElement("div",{key:O,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:T.goal,onChange:$=>Z(V=>N(b({},V),{goals:V.goals.map((M,q)=>q===O?N(b({},M),{goal:$.target.value}):M)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${O+1}`}),React.createElement("select",{value:T.status,onChange:$=>Z(V=>N(b({},V),{goals:V.goals.map((M,q)=>q===O?N(b({},M),{status:$.target.value}):M)})),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map($=>React.createElement("option",{key:$,value:$},$))),React.createElement("input",{type:"text",value:T.summary,onChange:$=>Z(V=>N(b({},V),{goals:V.goals.map((M,q)=>q===O?N(b({},M),{summary:$.target.value}):M)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{ve(null),Z(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm",disabled:xe},"Cancel"),React.createElement("button",{type:"button",onClick:ot,className:"px-3 py-2 bg-gold text-white rounded-lg text-sm",disabled:xe},xe?"Saving...":"Save"))):React.createElement("div",{className:"mt-3 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("div",null,p.primaryFocus||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"space-y-1"},E.map((T,O)=>React.createElement("div",{key:O,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",null,React.createElement("strong",null,T.goal||`Goal ${O+1}`),T.status?` - ${T.status}`:"",T.summary?` (${T.summary})`:""))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",null,p.wins||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",null,((H=p.challenges)==null?void 0:H.details)||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges (checked)"),React.createElement("div",null,(p.challenges?[p.challenges.capacity?"Capacity":"",p.challenges.budget?"Budget":"",p.challenges.scheduling?"Scheduling":"",p.challenges.coordination?"Coordination":"",p.challenges.external?"External":"",p.challenges.other?`Other: ${p.challenges.otherText||""}`:""].filter(Boolean).join(", "):"")||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",null,p.supportNeeded||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support types"),React.createElement("div",null,(p.supportTypes?[p.supportTypes.staff?"Staff/Volunteer":"",p.supportTypes.marketing?"Marketing/Comms":"",p.supportTypes.board?"Board Guidance":"",p.supportTypes.funding?"Funding":"",p.supportTypes.facilities?"Facilities/Logistics":"",p.supportTypes.other?`Other: ${p.supportTypes.otherText||""}`:""].filter(Boolean).join(", "):"")||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next priorities"),React.createElement("div",{className:"space-y-1"},G.map((T,O)=>React.createElement("div",{key:O},T)))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions needed"),React.createElement("div",null,p.decisionsNeeded||""))))})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},k.map(n=>{var p;const w=de.find(E=>E.focusArea===d&&E.quarter===n),C=(p=w==null?void 0:w.payload)==null?void 0:p.review;return React.createElement(Tt,{key:`${n}-review`,areaLabel:d,quarter:n,review:C,onSave:at})}))))})(),React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("div",{className:"mt-3 text-sm text-stone-700"},(()=>{var k;const r=z[s].label,d=de.find(n=>n.focusArea===r&&n.quarter==="Final");return((k=d==null?void 0:d.payload)==null?void 0:k.finalTallyOverview)||"No final tally submitted yet."})()))),it&&React.createElement(Qt,{initiative:he,onBack:()=>c("list"),onEdit:()=>Ke(he),onSubmitUpdate:et,onReviewUpdate:tt}),(s==="add"||s==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>c(ie?"detail":"list"),className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(He,{size:18})," Cancel"),React.createElement(Ft,{initiative:ie,onSave:Xe,onCancel:()=>c(ie?"detail":"list"),isSaving:m})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},jt=ReactDOM.createRoot(document.getElementById("root"));jt.render(React.createElement(Rt,null));})();
