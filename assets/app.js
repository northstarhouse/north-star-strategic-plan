(()=>{var Dt=Object.defineProperty,Ft=Object.defineProperties;var It=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var qe=(e,t,o)=>t in e?Dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))He.call(t,o)&&qe(e,o,t[o]);if(Ce)for(var o of Ce(t))Ke.call(t,o)&&qe(e,o,t[o]);return e},N=(e,t)=>Ft(e,It(t));var Ze=(e,t)=>{var o={};for(var p in e)He.call(e,p)&&t.indexOf(p)<0&&(o[p]=e[p]);if(e!=null&&Ce)for(var p of Ce(e))t.indexOf(p)<0&&Ke.call(e,p)&&(o[p]=e[p]);return o};const{useState:h,useEffect:ce,useMemo:De}=React,ot="nsh-strategy-cache-v1",We="nsh-strategy-metrics-cache-v1",Xe="nsh-strategy-sections-cache-v1",Me="nsh-strategy-quarterly-cache-v1",Ge="nsh-strategy-vision-cache-v1",Se="nsh-strategy-focus-goals-cache-v1",Tt=300*1e3,nt=()=>{try{const e=localStorage.getItem(ot);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},ge=e=>{try{localStorage.setItem(ot,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},Le=!0,V="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",et=V,Fe=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],Ae=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fundraising",sheet:"Fundraising"},{key:"events",label:"Events",sheet:"Events"},{key:"marketing",label:"Marketing",sheet:"Marketing"},{key:"venue",label:"Venue",sheet:"Venue"}],tt={Construction:{},Grounds:{lead:"Paula Campbell",budget:"N/A",volunteers:17},Interiors:{},Docents:{},Fundraising:{},Events:{},Marketing:{},Venue:{}},ue=["Not started","On track","At risk","Behind","Complete"],Ot=["Pending","Reviewed","Needs info"],lt=Array.from({length:11},(e,t)=>t*10),Ie=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"We will have a clear set of documented programs and services that reinforce the House's role as a cultural historical gathering center and are well-organized, financially sustainable, and have clearly communicated teams of staff/volunteers that run each of the programs/services.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"A smooth-running organization that ensures the success of the Conservancy.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"},{id:"3",title:"Complete house restoration and grounds plan",focusArea:"House and Grounds Development",description:"Finish the first floor renovation, restore the second floor with a volunteer crew, install fire suppression, and clarify the grounds plan.",owner:"Facilities Lead",coChampions:"Volunteer Crew Lead, Board Liaison",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"First floor renovated, second floor restored, fire suppression installed, grounds plan approved.",threeYearVision:"Complete the first floor renovation. The 2nd floor of the house will be restored by a clearly-led and well-organized volunteer crew. A fire suppression system will be installed. Plans for the rest of the grounds will have been clarified.",annualGoals:"Confirm scope, recruit volunteer crew, secure fire suppression bids, draft grounds plan options.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"},{id:"4",title:"Staff and organize fund development plan",focusArea:"Fund Development",description:"Build staffing, systems, and campaign execution to accelerate fundraising.",owner:"Development Director",coChampions:"Board Treasurer, Capital Campaign Chair",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"Fund development staffing in place, $1M raised toward capital campaign.",threeYearVision:"Over the next three years we will have successfully staffed and organized our fund development plans and raised $1M of the $2M capital campaign.",annualGoals:"Hire development lead, finalize campaign plan, raise initial $250k.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"}],Et=[{id:"fg-1",focusArea:"Fund Development",goalTopic:"Annual goal",annualGoals:"Document the Conservancy\u2019s fund development plan.",annualGoalsItems:[],goalDetails:"",goalLead:"",futureGoals:"",startDate:"",dueDate:"",goalChampions:"Jeff, Haley",goalTeamMembers:"",progress:"Not Started",category:""}],b={isConfigured:()=>Le&&V&&V.length>0,postJson:async(e,t)=>{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Request failed");return o.json()},fetchAll:async()=>{if(!Le){const e=nt();return(e==null?void 0:e.objects)||[]}if(!b.isConfigured())return console.log("Google Sheets not configured, using sample data"),Ie;try{const e=await fetch(`${V}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),Ie}},create:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),N(x({},e),{id:Date.now().toString()});try{return(await b.postJson(V,{action:"create",object:e})).result||N(x({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),N(x({},e),{id:Date.now().toString()})}},update:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await b.postJson(V,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await b.postJson(V,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:o})=>{if(!et)throw new Error("Drive upload not configured");const p={action:"uploadImage",filename:e,mimeType:t,data:o},u=await b.postJson(et,p);if(!u.success)throw new Error(u.error||"Upload failed");return u.result},fetchMetrics:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${V}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(V,{action:"submitQuarterlyUpdate",form:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},submitReviewUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(V,{action:"submitReviewUpdate",review:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},fetchVisionStatements:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${V}?action=getVisionStatements`);if(!e.ok)throw new Error("Failed to fetch vision statements");return(await e.json()).vision||[]}catch(e){return console.error("Error fetching vision statements:",e),[]}},updateVisionStatement:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(V,{action:"updateVisionStatement",vision:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},fetchFocusAreaGoals:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${V}?action=getFocusAreaGoals`);if(!e.ok)throw new Error("Failed to fetch focus area goals");return(await e.json()).goals||[]}catch(e){return console.error("Error fetching focus area goals:",e),[]}},updateFocusAreaGoal:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(V,{action:"updateFocusAreaGoal",goal:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},deleteFocusAreaGoal:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(V,{action:"deleteFocusAreaGoal",id:e});if(!t.success)throw new Error(t.error||"Delete failed");return t.result},fetchQuarterlyUpdates:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${V}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${V}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},ve=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read cache:",t),null}},ae=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(o){console.warn("Failed to write cache:",o)}},dt=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,xe=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},st=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const o=String(t.getMonth()+1).padStart(2,"0"),p=String(t.getDate()).padStart(2,"0"),u=String(t.getFullYear());return`${o}-${p}-${u}`},Qt=e=>{switch(e){case"Q1":return"Q2";case"Q2":return"Q3";case"Q3":return"Q4";case"Q4":return"Final";default:return null}},Ue=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),it=e=>{if(e==null)return"N/A";const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)},Te=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},Pt=(e,t=3)=>{const o=[];for(String(e||"").split(`
`).map(u=>u.trim()).filter(Boolean).forEach(u=>{const s=u.split("|").map(f=>f.trim()),[i="",S="",d=""]=s;o.push({action:i,owner:S,deadline:d})});o.length<t;)o.push({action:"",owner:"",deadline:""});return o.slice(0,t)},at=e=>e.map(t=>[t.action,t.owner,t.deadline].map(o=>o.trim()).join(" | ")).filter(t=>t.replace(/\|/g,"").trim()!=="").join(`
`),le=e=>N(x({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),Rt=e=>e.slice().sort((t,o)=>new Date(o.date)-new Date(t.date)),jt=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-gold text-white border-gold";default:return"bg-stone-100 text-stone-600 border-stone-200"}},Mt=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},Gt=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const ie=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const ct=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const Ut=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),Vt=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${jt(e)}`},e);const Lt=({update:e,onReviewSave:t})=>{const[o,p]=h(e.reviewStatus||"Pending"),[u,s]=h(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},xe(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${Mt(o)}`},o)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-gold"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:o,onChange:i=>p(i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},Ot.map(i=>React.createElement("option",{key:i,value:i},i))),React.createElement("input",{type:"text",value:u,onChange:i=>s(i.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,o,u),className:"px-4 py-2 bg-gold text-white rounded-lg text-sm"},"Save review"))))},$t=({initiative:e,onSubmit:t})=>{const[o,p]=h(""),[u,s]=h(""),[i,S]=h(""),[d,f]=h(""),[v,T]=h(""),[P,j]=h(e.progress||0),[M,L]=h("");return React.createElement("form",{onSubmit:w=>{w.preventDefault();const n={id:dt(),date:new Date().toISOString(),author:o,summary:u,details:i,blockers:d,nextSteps:v,progress:Number(P)||0,links:M,reviewStatus:"Pending",reviewNotes:""};t(n),p(""),s(""),S(""),f(""),T(""),j(e.progress||0),L("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:o,onChange:w=>p(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:u,onChange:w=>s(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:i,onChange:w=>S(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:d,onChange:w=>f(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:v,onChange:w=>T(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:P,onChange:w=>j(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},lt.map(w=>React.createElement("option",{key:w,value:w},w,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:M,onChange:w=>L(w.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Bt=({initiative:e,onSave:t,onCancel:o,isSaving:p})=>{const[u,s]=h(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||ue[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),i=(d,f)=>{s(v=>N(x({},v),{[d]:f}))};return React.createElement("form",{onSubmit:d=>{d.preventDefault();const f=N(x(x({},e),u),{progress:Number(u.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(f)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:u.title,onChange:d=>i("title",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:u.focusArea,onChange:d=>i("focusArea",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),Fe.map(d=>React.createElement("option",{key:d,value:d},d)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:u.owner,onChange:d=>i("owner",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:u.description,onChange:d=>i("description",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:u.coChampions,onChange:d=>i("coChampions",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:u.status,onChange:d=>i("status",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ue.map(d=>React.createElement("option",{key:d,value:d},d)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:u.progress,onChange:d=>i("progress",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},lt.map(d=>React.createElement("option",{key:d,value:d},d,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:u.targetDate,onChange:d=>i("targetDate",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:u.successMetrics,onChange:d=>i("successMetrics",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:u.threeYearVision,onChange:d=>i("threeYearVision",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:u.annualGoals,onChange:d=>i("annualGoals",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:u.notes,onChange:d=>i("notes",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-gold text-white rounded-lg"},p?"Saving...":"Save initiative")))},rt=()=>({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},decisionsNeeded:"",nextQuarterFocus:"",nextPriorities:["","",""],finalTallyOverview:""}),_t=({onSubmitted:e,initialData:t,hidePrimaryGoals:o=!1,defaultFocusArea:p="",lockFocusArea:u=!1})=>{const[s,i]=h(()=>N(x({},rt()),{focusArea:p||""})),[S,d]=h(!1),[f,v]=h(!1),[T,P]=h([]),j=`nsh-quarterly-next-${s.focusArea||"area"}-${s.quarter||"quarter"}`,M=(a,D)=>{i(r=>N(x({},r),{[a]:D}))},L=(a,D,r)=>{i(R=>{const B=R.goals.map((H,K)=>K===a?N(x({},H),{[D]:r}):H);return N(x({},R),{goals:B})})},G=(a,D)=>{i(r=>N(x({},r),{challenges:N(x({},r.challenges),{[a]:D})}))},w=(a,D)=>{i(r=>N(x({},r),{supportTypes:N(x({},r.supportTypes),{[a]:D})}))},n=(a,D)=>{i(r=>{const R=r.nextPriorities.map((B,H)=>H===a?D:B);return N(x({},r),{nextPriorities:R})})};ce(()=>{t&&(i(a=>N(x(x({},rt()),t),{challenges:x(x({},a.challenges),t.challenges||{}),supportTypes:x(x({},a.supportTypes),t.supportTypes||{})})),P(t.uploadedFiles||[]))},[t]),ce(()=>{var D;if(t||!s.focusArea||!s.quarter||s.primaryFocus||(D=s.goals)!=null&&D.some(r=>r.goal))return;const a=localStorage.getItem(j);if(a)try{const r=JSON.parse(a);if(!r)return;i(R=>{var B;return N(x({},R),{primaryFocus:r.primaryFocus||R.primaryFocus,goals:(B=r.goals)!=null&&B.length?r.goals:R.goals})})}catch(r){console.warn("Failed to read quarterly suggestion:",r)}},[t,s.focusArea,s.quarter,s.primaryFocus,s.goals,j]);const I=async a=>{var D;a.preventDefault(),v(!0);try{const r=J=>String(J||"").trim()?J:"None noted",R=["capacity","budget","scheduling","coordination","external","other"],B=["staff","marketing","board","funding","facilities","other"],H=R.some(J=>{var q;return(q=s.challenges)==null?void 0:q[J]}),K=B.some(J=>{var q;return(q=s.supportTypes)==null?void 0:q[J]}),re=N(x({},s),{wins:r(s.wins),challenges:N(x({},s.challenges),{details:r((D=s.challenges)==null?void 0:D.details)}),supportNeeded:r(s.supportNeeded),decisionsNeeded:r(s.decisionsNeeded),nextQuarterFocus:r(s.nextQuarterFocus),challengesCheckedOverride:H?"":"None noted",supportTypesCheckedOverride:K?"":"None noted"});await b.submitQuarterlyUpdate(N(x({},re),{uploadedFiles:T}));const X=Qt(s.quarter);if(X&&s.focusArea){const J=`nsh-quarterly-next-${s.focusArea}-${X}`,q=s.nextPriorities||[],he={primaryFocus:s.nextQuarterFocus||q[0]||"",goals:[{goal:q[0]||"",status:"On Track",summary:""},{goal:q[1]||"",status:"On Track",summary:""},{goal:q[2]||"",status:"On Track",summary:""}]};localStorage.setItem(J,JSON.stringify(he))}await(e==null?void 0:e())}catch(r){console.error("Quarterly update submit failed:",r),alert("Submission failed. Please try again.")}v(!1)},E=async a=>{const D=Array.from(a.target.files||[]);if(D.length){d(!0);try{const r=await Promise.all(D.map(R=>new Promise((B,H)=>{const K=new FileReader;K.onload=async()=>{const re=String(K.result||"").split(",")[1]||"";try{const X=await b.uploadFile({filename:R.name,mimeType:R.type,data:re});B(X)}catch(X){H(X)}},K.onerror=H,K.readAsDataURL(R)})));P(R=>[...R,...r])}catch(r){console.error("Failed to upload files:",r),alert("Failed to upload files. Please try again.")}d(!1),a.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:I,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:s.focusArea,onChange:a=>M("focusArea",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0,disabled:u},React.createElement("option",{value:""},"Select area"),Ae.map(a=>React.createElement("option",{key:a.label,value:a.label},a.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:s.quarter,onChange:a=>M("quarter",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Q4","Final"].map(a=>React.createElement("option",{key:a,value:a},a==="Q1"?"Q1 (Jan 1 - Mar 31)":a==="Q2"?"Q2 (Apr 1 - Jun 30)":a==="Q3"?"Q3 (Jul 1 - Sep 30)":a==="Q4"?"Q4 (Oct 1 - Dec 31)":a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:s.year,onChange:a=>M("year",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:s.submittedDate,onChange:a=>M("submittedDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly reflection"),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Successes & Forward Movement"),React.createElement("textarea",{value:s.wins,onChange:a=>M("wins",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Goals achieved and measurable progress this quarter."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.capacity,onChange:a=>G("capacity",a.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.budget,onChange:a=>G("budget",a.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.scheduling,onChange:a=>G("scheduling",a.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.coordination,onChange:a=>G("coordination",a.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.external,onChange:a=>G("external",a.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.other,onChange:a=>G("other",a.target.checked)}),"Other")),s.challenges.other&&React.createElement("input",{type:"text",value:s.challenges.otherText,onChange:a=>G("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:s.challenges.details,onChange:a=>G("details",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Support needed to stay on track"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.staff,onChange:a=>w("staff",a.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.marketing,onChange:a=>w("marketing",a.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.board,onChange:a=>w("board",a.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.funding,onChange:a=>w("funding",a.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.facilities,onChange:a=>w("facilities",a.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.other,onChange:a=>w("other",a.target.checked)}),"Other")),s.supportTypes.other&&React.createElement("input",{type:"text",value:s.supportTypes.otherText,onChange:a=>w("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Other notes"),React.createElement("textarea",{value:s.decisionsNeeded,onChange:a=>M("decisionsNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Decisions or approvals needed."}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Next quarter focus area and goals"),React.createElement("input",{type:"text",value:s.nextQuarterFocus,onChange:a=>M("nextQuarterFocus",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Primary focus for next quarter"}),React.createElement("div",{className:"mt-3 space-y-2"},s.nextPriorities.map((a,D)=>React.createElement("input",{key:D,type:"text",value:a,onChange:r=>n(D,r.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${D+1}.`})))),s.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:s.finalTallyOverview,onChange:a=>M("finalTallyOverview",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-gold text-white rounded-lg",disabled:f},f?"Submitting...":"Submit quarterly update")))))},zt=({areaLabel:e,quarter:t,review:o,onSave:p})=>{const u=n=>({statusAfterReview:(n==null?void 0:n.statusAfterReview)||"",actionsRows:Pt(n==null?void 0:n.actionsAssigned),crossAreaImpacts:(n==null?void 0:n.crossAreaImpacts)||"",areasImpacted:(n==null?void 0:n.areasImpacted)||"",coordinationNeeded:(n==null?void 0:n.coordinationNeeded)||"",priorityConfirmation:(n==null?void 0:n.priorityConfirmation)||"",escalationFlag:(n==null?void 0:n.escalationFlag)||"",reviewCompletedOn:Te(n==null?void 0:n.reviewCompletedOn),nextCheckInDate:Te(n==null?void 0:n.nextCheckInDate)}),[s,i]=h(()=>u(o)),[S,d]=h(!1),[f,v]=h(!1);ce(()=>{i(u(o))},[o,e,t]),ce(()=>{v(!1)},[e,t]);const T=(n,I)=>{i(E=>N(x({},E),{[n]:I}))},P=(n,I,E)=>{i(a=>{const D=a.actionsRows.map((r,R)=>R===n?N(x({},r),{[I]:E}):r);return N(x({},a),{actionsRows:D})})},j=async()=>{d(!0);const n=s.crossAreaImpacts==="Affects another area",I={focusArea:e,quarter:t,statusAfterReview:s.statusAfterReview,actionsAssigned:at(s.actionsRows),crossAreaImpacts:s.crossAreaImpacts,areasImpacted:n?s.areasImpacted:"",coordinationNeeded:n?s.coordinationNeeded:"",priorityConfirmation:s.priorityConfirmation,escalationFlag:s.escalationFlag,reviewCompletedOn:s.reviewCompletedOn,nextCheckInDate:s.nextCheckInDate};try{await p(I)}catch(E){console.error("Failed to save review:",E),alert("Failed to save review. Please try again.")}d(!1)},M=["On track","Minor adjustments needed","Off track - intervention required"],L=["None","Affects another area"],G=["Approved","Adjusted","Replaced"],w=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];if(!f){const I=[{label:"Status After Review",value:s.statusAfterReview},{label:"Actions Assigned",value:at(s.actionsRows)},{label:"Cross-Area Impacts",value:s.crossAreaImpacts},{label:"Area(s) impacted",value:s.areasImpacted},{label:"Coordination needed",value:s.coordinationNeeded},{label:"Priority Confirmation (Next Quarter)",value:s.priorityConfirmation},{label:"Escalation Flag",value:s.escalationFlag},{label:"Review completed on",value:s.reviewCompletedOn},{label:"Next check-in date",value:s.nextCheckInDate}].filter(E=>E.value);return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>v(!0),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Edit review")),I.length===0?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No review submitted yet."):React.createElement("div",{className:"mt-4 space-y-2 text-sm text-stone-700"},I.map(E=>React.createElement("div",{key:E.label},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},E.label),React.createElement("div",{className:"whitespace-pre-wrap"},E.value)))))}return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>v(!1),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Close")),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},M.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-status`,value:n,checked:s.statusAfterReview===n,onChange:I=>T("statusAfterReview",I.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},s.actionsRows.map((n,I)=>React.createElement("div",{key:I,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:n.action,onChange:E=>P(I,"action",E.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:n.owner,onChange:E=>P(I,"owner",E.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:n.deadline,onChange:E=>P(I,"deadline",E.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},L.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-impact`,value:n,checked:s.crossAreaImpacts===n,onChange:I=>T("crossAreaImpacts",I.target.value),className:"accent-clay"}),React.createElement("span",null,n)))),s.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:s.areasImpacted,onChange:n=>T("areasImpacted",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:s.coordinationNeeded,onChange:n=>T("coordinationNeeded",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},G.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-priority`,value:n,checked:s.priorityConfirmation===n,onChange:I=>T("priorityConfirmation",I.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},w.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-escalation`,value:n,checked:s.escalationFlag===n,onChange:I=>T("escalationFlag",I.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:s.reviewCompletedOn,onChange:n=>T("reviewCompletedOn",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:s.nextCheckInDate,onChange:n=>T("nextCheckInDate",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:j,disabled:S,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},S?"Saving...":"Save review")))},Jt=({focusArea:e,vision:t,onSave:o,isSaving:p,hideLabel:u=!1,containerClass:s="",forceEditing:i,onEditToggle:S,hideEditButton:d=!1})=>{const[f,v]=h(!1),[T,P]=h(t||""),j=typeof i=="boolean"?i:f;ce(()=>{j||P(t||"")},[t,j]);const M=()=>{o(e,T),typeof i=="boolean"?S==null||S(!1):v(!1)};return React.createElement("div",{className:`bg-white rounded-2xl p-5 border border-stone-100 card-shadow ${s}`.trim()},React.createElement("div",{className:"flex items-start justify-between gap-3"},!u&&React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e),React.createElement("div",{className:"flex items-center gap-2 text-xs"},j?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>{typeof i=="boolean"?S==null||S(!1):v(!1),P(t||"")},className:"px-2 py-1 border border-stone-200 rounded-lg",disabled:p},"Cancel"),React.createElement("button",{type:"button",onClick:M,className:"px-2 py-1 bg-gold text-white rounded-lg",disabled:p},p?"Saving...":"Save")):!d&&React.createElement("button",{type:"button",onClick:()=>{typeof i=="boolean"?S==null||S(!0):v(!0)},className:"px-2 py-1 border border-stone-200 rounded-lg"},"Edit"))),j?React.createElement("textarea",{value:T,onChange:L=>P(L.target.value),className:"w-full mt-3 px-3 py-2 border border-stone-200 rounded-lg text-sm min-h-[120px]",placeholder:"Describe what success looks like in three years."}):React.createElement("div",{className:"text-sm text-stone-700 mt-2 space-y-1"},t?String(t).split(`
`).map(L=>L.trim()).filter(Boolean).map((L,G)=>React.createElement("div",{key:`${e}-vision-${G}`,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ie,{size:12})),React.createElement("span",{className:"whitespace-pre-wrap"},L))):React.createElement("span",null,"Add a three-year vision for this focus area.")))},Ve=({focusArea:e,initialGoal:t,presetCategory:o,onSave:p,onCancel:u,isSaving:s})=>{const[i,S]=h(()=>({id:(t==null?void 0:t.id)||"",focusArea:e,goalTopic:"Annual goal",annualGoals:(t==null?void 0:t.annualGoals)||"",startDate:(t==null?void 0:t.startDate)||"",dueDate:(t==null?void 0:t.dueDate)||"",progress:(t==null?void 0:t.progress)||ue[0],category:(t==null?void 0:t.category)||o||"Annual goals",goalDetails:(t==null?void 0:t.goalDetails)||"",goalLead:(t==null?void 0:t.goalLead)||"",futureGoals:(t==null?void 0:t.futureGoals)||""})),d=(v,T)=>{S(P=>N(x({},P),{[v]:T}))};return React.createElement("form",{onSubmit:v=>{v.preventDefault(),p(N(x({},i),{goalTopic:"Annual goal",annualGoalsItems:[]}))},className:"mt-4 bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goal"),React.createElement("input",{type:"text",value:i.annualGoals,onChange:v=>d("annualGoals",v.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:i.goalLead,onChange:v=>d("goalLead",v.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("textarea",{value:i.goalDetails,onChange:v=>d("goalDetails",v.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[60px]",placeholder:"Add details, notes, or key steps."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Start date"),React.createElement("input",{type:"date",value:Te(i.startDate),onChange:v=>d("startDate",v.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Due date"),React.createElement("input",{type:"date",value:Te(i.dueDate),onChange:v=>d("dueDate",v.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:i.progress,onChange:v=>d("progress",v.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ue.map(v=>React.createElement("option",{key:v,value:v},v))))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:u,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:s},"Cancel"),React.createElement("button",{type:"submit",className:"px-4 py-2 bg-gold text-white rounded-lg text-sm",disabled:s},s?"Saving...":"Save goal")))},ut=({focusArea:e,goals:t,vision:o,onSaveVision:p,isSavingVision:u,onSaveGoal:s,onDeleteGoal:i,isSaving:S,hideTitle:d})=>{const[f,v]=h(null),[T,P]=h(!1),[j,M]=h("Annual goals"),[L,G]=h(!1),w=De(()=>t.filter(r=>!r.category||r.category==="Annual goals"||r.category==="Goals"),[t]),n=De(()=>t.filter(r=>r.category==="Future Goals"),[t]),I=r=>{P(!1),v(r),M(r.category||"Annual goals")},E=r=>{v(null),P(!0),M(r)},a=r=>{s(r),v(null),P(!1)},D=r=>{const R=r==="annual"?w:n;if(R.length){I(R[0]);return}E(r==="annual"?"Annual goals":"Future Goals")};return React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},!d&&React.createElement("div",{className:"font-display text-xl text-ink"},e),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel font-semibold"},React.createElement("span",null,"Annual goals")),w.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No annual goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},w.map(r=>React.createElement("div",{key:r.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ie,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},r.annualGoals||"Untitled goal")),r.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},r.goalDetails))),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",{className:"space-x-2"},r.startDate?React.createElement("span",null,`Start: ${xe(r.startDate)}`):null,r.dueDate?React.createElement("span",null,`Due: ${xe(r.dueDate)}`):null),React.createElement("div",{className:"text-stone-600"},r.progress||ue[0])),(f==null?void 0:f.id)===r.id&&React.createElement(Ve,{focusArea:e,initialGoal:f,presetCategory:j,onSave:a,onCancel:()=>{P(!1),v(null)},isSaving:S})))),React.createElement("div",{className:"mt-3 flex items-center justify-start"},React.createElement("button",{type:"button",onClick:()=>D("annual"),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit"))),React.createElement("div",{className:"mt-6 border-t border-stone-200 pt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel font-semibold"},React.createElement("span",null,"Future goals")),n.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No future goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},n.map(r=>React.createElement("div",{key:r.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ie,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},r.annualGoals||"Untitled goal")),r.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},r.goalDetails))),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",{className:"space-x-2"},r.startDate?React.createElement("span",null,`Start: ${xe(r.startDate)}`):null,r.dueDate?React.createElement("span",null,`Due: ${xe(r.dueDate)}`):null),React.createElement("div",{className:"text-stone-600"},r.progress||ue[0])),(f==null?void 0:f.id)===r.id&&React.createElement(Ve,{focusArea:e,initialGoal:f,presetCategory:j,onSave:a,onCancel:()=>{P(!1),v(null)},isSaving:S})))),React.createElement("div",{className:"mt-3 flex items-center justify-start"},React.createElement("button",{type:"button",onClick:()=>D("future"),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit"))),React.createElement("div",{className:"mt-6 border-t border-stone-200 pt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel font-semibold"},React.createElement("span",null,"Three-year vision")),React.createElement("div",{className:"mt-3"},React.createElement(Jt,{focusArea:e,vision:o||"",onSave:p,isSaving:u,hideLabel:!0,hideEditButton:!0,forceEditing:L,onEditToggle:G,containerClass:"bg-stone-50 border border-stone-100 rounded-xl p-4 shadow-none"})),React.createElement("div",{className:"mt-3 flex items-center justify-start"},React.createElement("button",{type:"button",onClick:()=>G(!0),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit"))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("select",{value:j,onChange:r=>M(r.target.value),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs bg-white"},React.createElement("option",{value:"Annual goals"},"Annual goals"),React.createElement("option",{value:"Future Goals"},"Future goals")),React.createElement("button",{type:"button",onClick:()=>E(j),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Add goal")),T&&!f&&React.createElement(Ve,{focusArea:e,initialGoal:f,presetCategory:j,onSave:a,onCancel:()=>{P(!1),v(null)},isSaving:S}))},Yt=({goals:e,visionStatements:t,onSaveVision:o,isSavingVision:p,onSaveGoal:u,onDeleteGoal:s,isSaving:i,focusFilter:S})=>{const d=S?Fe.filter(f=>f===S):Fe;return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Strategic Focus Area Goals"))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},d.map(f=>{var v;return React.createElement(ut,{key:f,focusArea:f,goals:e.filter(T=>T.focusArea===f),vision:((v=t==null?void 0:t.find(T=>T.focusArea===f))==null?void 0:v.threeYearVision)||"",onSaveVision:o,isSavingVision:p,onSaveGoal:u,onDeleteGoal:s,isSaving:i})})))},qt=({initiatives:e,metrics:t})=>{const o=e.length?Math.round(e.reduce((u,s)=>u+(Number(s.progress)||0),0)/e.length):0,p=Fe.map(u=>({focusArea:u,count:e.filter(s=>s.focusArea===u).length}));return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-gold"},React.createElement(Gt,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To revitalize North Star House as a cultural gathering place that connects people of all ages through the arts, theater, literature, history, and music\u2014fostering creativity, learning, and community for generations to come."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"})),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:Ue(t==null?void 0:t.volunteersCount)},{label:"Events booked",value:Ue(t==null?void 0:t.eventsCount)},{label:"Donation total",value:it(t==null?void 0:t.donationsTotal)},{label:"Sponsors",value:Ue(t==null?void 0:t.sponsorsCount)}].map(u=>React.createElement("div",{key:u.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},u.value))))))};const Ht=({initiative:e,onBack:t,onEdit:o,onSubmitUpdate:p,onReviewUpdate:u})=>{const s=Rt(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(ct,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(Vt,{status:e.status}),React.createElement("button",{onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(Ut,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement($t,{initiative:e,onSubmit:i=>p(e,i)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},s.length," updates")),s.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},s.map(i=>React.createElement(Lt,{key:i.id,update:i,onReviewSave:(S,d,f)=>u(e,S,d,f)})))))},Kt=()=>{const[e,t]=h([]),[o,p]=h("dashboard"),[u,s]=h(null),[i,S]=h(null),[d,f]=h(!0),[v,T]=h(!1),[P,j]=h(!1),[M,L]=h({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[G,w]=h([]),[n,I]=h(!1),[E,a]=h([]),[D,r]=h(!1),[R,B]=h(null),[H,K]=h(!1),[re,X]=h(null),J={Construction:"House and Grounds Development",Grounds:"House and Grounds Development",Interiors:"House and Grounds Development",Fundraising:"Fund Development",Marketing:"Organizational Development",Venue:"Fund Development",Docents:"Programs and Events",Events:"Programs and Events"},[q,he]=h(tt),[$e,Oe]=h([]),[pt,Ee]=h(null),[de,Qe]=h(null),[oe,pe]=h(null),[Pe,Be]=h(!1),ee=Ae.reduce((l,c)=>(l[c.key]={label:c.label,key:c.sheet},l),{}),Re=De(()=>e.find(l=>l.id===u)||null,[e,u]),be=De(()=>e.find(l=>l.id===i)||null,[e,i]);ce(()=>{je()},[]);const je=async({useCache:l=!0}={})=>{var U,Z;const c=l?nt():null,k=(U=c==null?void 0:c.objects)!=null&&U.length?c.objects.map(le):null,m=l?ve(We):null,g=l?ve(Xe):null,F=l?ve(Me):null,y=l?ve(Ge):null,Q=l?ve(Se):null;if(k?(t(k),j(b.isConfigured()),f(!1)):f(!0),m&&L(m),g&&he(g),F&&Oe(F),y&&w(y),Q&&a(Q),!Le){t(k||Ie.map(le)),j(!1),Q||a(Et),f(!1);return}const _=c&&Date.now()-c.updatedAt<Tt;try{const ne=(await b.fetchAll()||[]).map(le);t(ne),j(b.isConfigured()),ge(ne)}catch(W){console.error("Failed to load data:",W),(Z=c==null?void 0:c.objects)!=null&&Z.length||t(Ie.map(le))}f(!1);const Y=await b.fetchMetrics();Y&&(L(Y),ae(We,Y));const te=await b.fetchSectionSnapshots();te&&(he(te),ae(Xe,te));const A=await b.fetchQuarterlyUpdates();A.length&&(Oe(A),ae(Me,A));const O=await b.fetchVisionStatements();O.length&&(w(O),ae(Ge,O));const C=await b.fetchFocusAreaGoals();C.length&&(a(C),ae(Se,C))},Wt=l=>{s(l),p("detail"),window.scrollTo(0,0)},Xt=()=>{S(null),p("add"),window.scrollTo(0,0)},mt=l=>{S(l.id),p("edit"),window.scrollTo(0,0)},gt=async l=>{T(!0);try{if(be){const c=await b.update(N(x({},l),{updates:l.updates||[]}));t(k=>{const m=k.map(g=>g.id===c.id?le(c):g);return ge(m),m}),s(c.id),p("detail")}else{const c=await b.create(N(x({},l),{id:l.id||dt(),updates:l.updates||[]}));t(k=>{const m=[...k,le(c)];return ge(m),m}),s(c.id),p("detail")}}catch(c){console.error("Failed to save initiative:",c),alert("Failed to save. Please try again.")}T(!1)},vt=async(l,c)=>{const k=[c,...l.updates||[]],m=N(x({},l),{updates:k,progress:c.progress,lastUpdateAt:c.date});try{await b.update(m),t(g=>{const F=g.map(y=>y.id===l.id?le(m):y);return ge(F),F})}catch(g){console.error("Failed to submit update:",g),alert("Failed to submit update. Please try again.")}},xt=async(l,c,k,m)=>{const g=(l.updates||[]).map(y=>y.id===c?N(x({},y),{reviewStatus:k,reviewNotes:m}):y),F=N(x({},l),{updates:g});try{await b.update(F),t(y=>{const Q=y.map(_=>_.id===l.id?le(F):_);return ge(Q),Q})}catch(y){console.error("Failed to save review:",y),alert("Failed to save review. Please try again.")}},ht=l=>{Ee({focusArea:l}),p("quarterly"),s(null),B(null),window.scrollTo(0,0)},bt=async l=>{const g=l,{focusArea:c,quarter:k}=g,m=Ze(g,["focusArea","quarter"]);await b.submitReviewUpdate(l),Oe(F=>{const y=F.findIndex(Y=>Y.focusArea===c&&Y.quarter===k),Q=y>=0?N(x({},F[y]),{payload:N(x({},F[y].payload||{}),{review:m})}):{focusArea:c,quarter:k,submittedDate:"",payload:{review:m}},_=y>=0?F.map((Y,te)=>te===y?Q:Y):[...F,Q];return ae(Me,_),_})},ft=(l,c)=>{const m=$e.filter(Q=>Q.focusArea===l&&Q.quarter===c).sort((Q,_)=>new Date(_.submittedDate||_.createdAt)-new Date(Q.submittedDate||Q.createdAt))[0],g=(m==null?void 0:m.payload)||{},F=g.year||String(new Date().getFullYear()),y=g.submittedDate||(m==null?void 0:m.submittedDate)||new Date().toISOString().slice(0,10);Ee({focusArea:l,quarter:c,year:F,submittedDate:y,primaryFocus:g.primaryFocus||"",goals:g.goals&&g.goals.length?g.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:g.wins||"",challenges:g.challenges||{},supportNeeded:g.supportNeeded||"",supportTypes:g.supportTypes||{},decisionsNeeded:g.decisionsNeeded||"",nextQuarterFocus:g.nextQuarterFocus||"",nextPriorities:g.nextPriorities||["","",""],finalTallyOverview:g.finalTallyOverview||""}),p("quarterly"),window.scrollTo(0,0)},yt=(l,c,k,m)=>{if(c!=="Q1")return;const g=m.year||String(new Date().getFullYear()),F=m.submittedDate||(k==null?void 0:k.submittedDate)||new Date().toISOString().slice(0,10);Qe({areaLabel:l,quarter:c}),pe({focusArea:l,quarter:c,year:g,submittedDate:F,primaryFocus:m.primaryFocus||"",goals:m.goals&&m.goals.length?m.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:m.wins||"",challenges:m.challenges||{},supportNeeded:m.supportNeeded||"",supportTypes:m.supportTypes||{},decisionsNeeded:m.decisionsNeeded||"",nextQuarterFocus:m.nextQuarterFocus||"",nextPriorities:m.nextPriorities||["","",""],finalTallyOverview:m.finalTallyOverview||"",uploadedFiles:m.uploadedFiles||[]})},wt=async()=>{if(oe){Be(!0);try{await b.submitQuarterlyUpdate(N(x({},oe),{primaryOnly:!0})),await je({useCache:!1}),Qe(null),pe(null)}catch(l){console.error("Failed to save inline quarterly update:",l),alert("Failed to save. Please try again.")}Be(!1)}},Nt=async()=>{await je({useCache:!1}),Ee(null),p("dashboard")},kt=l=>{const c=J[l]||l;X(c),K(!0)},Ct=async(l,c)=>{I(!0);try{const k=await b.updateVisionStatement({focusArea:l,threeYearVision:c});w(m=>{const g=m.findIndex(y=>y.focusArea===l),F=g>=0?m.map((y,Q)=>Q===g?k:y):[...m,k];return ae(Ge,F),F})}catch(k){console.error("Failed to save vision statement:",k),alert("Failed to save. Please try again.")}I(!1)},_e=async l=>{r(!0);try{const c=await b.updateFocusAreaGoal(l);a(k=>{const m=k.findIndex(F=>F.id===c.id),g=m>=0?k.map((F,y)=>y===m?c:F):[...k,c];return ae(Se,g),g})}catch(c){console.error("Failed to save focus goal:",c),alert("Failed to save. Please try again.")}r(!1)},ze=async l=>{r(!0);try{await b.deleteFocusAreaGoal(l),a(c=>{const k=c.filter(m=>m.id!==l);return ae(Se,k),k})}catch(c){console.error("Failed to delete focus goal:",c),alert("Failed to delete. Please try again.")}r(!1)},St=o==="detail"&&Re;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(ie,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"The North Star Framework"),React.createElement("div",{className:"text-xs text-steel"},"Progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{p("quarterly"),s(null),B(null)},className:`px-4 py-2.5 min-w-[160px] rounded-lg border ${o==="quarterly"?"bg-stone-100 border-stone-300":"border-stone-200"}`},"Quarterly Form"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("button",{onClick:()=>{p("dashboard"),s(null),B(null)},className:`tab-button text-sm min-w-[200px] ${o==="dashboard"?"active":""}`},"2026 Snapshot"),React.createElement("button",{onClick:()=>{p("focus"),s(null),B(null)},className:`tab-button text-sm min-w-[200px] ${o==="focus"?"active":""}`},"Strategic Plan Focus Areas"),React.createElement("select",{value:Ae.some(l=>l.key===o)?o:"",onChange:l=>{const c=l.target.value;c&&(p(c),s(null))},className:"tab-button tab-select text-sm bg-white min-w-[220px]"},React.createElement("option",{value:""},"Operational Areas"),Ae.map(l=>React.createElement("option",{key:l.key,value:l.key},l.label))))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},d?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,o==="dashboard"&&React.createElement(qt,{initiatives:e,metrics:M}),o==="focus"&&React.createElement(Yt,{goals:E,visionStatements:G,onSaveVision:Ct,isSavingVision:n,onSaveGoal:_e,onDeleteGoal:ze,isSaving:D,focusFilter:R}),o==="quarterly"&&React.createElement(_t,{onSubmitted:Nt,initialData:pt,hidePrimaryGoals:!0}),["construction","grounds","interiors","docents","fund","events","marketing","venue"].includes(o)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h2",{className:"font-display text-3xl text-ink"},ee[o].label),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ht(ee[o].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Quarterly form"),React.createElement("button",{type:"button",onClick:()=>kt(ee[o].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},`Focus area: ${J[ee[o].label]||ee[o].label}`))),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{var _,Y;const l=ee[o].label,c=ee[o].key,k=J[l]||l,m=q[c],g=x(x({},tt[c]||{}),m&&typeof m=="object"?m:{}),F=g.visionStatement||((_=G==null?void 0:G.find(te=>te.focusArea===k))==null?void 0:_.threeYearVision)||"N/A",y=g.budget,Q=y==null||y===""?"N/A":String(Number(y))===String(y)||typeof y=="number"?it(y):String(y);return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(g==null?void 0:g.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},Q)),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(Y=g==null?void 0:g.volunteers)!=null?Y:"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100 md:col-span-3"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Vision statement"),React.createElement("div",{className:"text-lg text-ink mt-2 whitespace-pre-line"},F)))})())),H&&re===J[ee[o].label]&&React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-display text-2xl text-ink"},re),React.createElement("button",{type:"button",onClick:()=>{K(!1),X(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Close")),React.createElement("div",{className:"mt-4"},React.createElement(ut,{focusArea:re,goals:E.filter(l=>l.focusArea===re),onSaveGoal:_e,onDeleteGoal:ze,isSaving:D,hideTitle:!0}))),(()=>{const l=ee[o].label,c=[["Q1","Q2"],["Q3","Q4"]],k={Q1:"Jan 1 - Mar 31",Q2:"Apr 1 - Jun 30",Q3:"Jul 1 - Sep 30",Q4:"Oct 1 - Dec 31"},m={Q1:"Due: March 30th",Q2:"Due: June 30th",Q3:"Due: September 30th",Q4:"Due: December 31st"},g={capacity:"Capacity or volunteer limitations",budget:"Budget or funding constraints",scheduling:"Scheduling or timing issues",coordination:"Cross-area coordination gaps",external:"External factors",other:"Other"},F={staff:"Staff or volunteer help",marketing:"Marketing or communications",board:"Board guidance or decision",funding:"Funding or fundraising support",facilities:"Facilities or logistics",other:"Other"},y=A=>{switch(A){case"Q2":return"Q1";case"Q3":return"Q2";case"Q4":return"Q3";default:return null}},Q=A=>$e.filter(C=>C.focusArea===l&&C.quarter===A).sort((C,U)=>new Date(U.submittedDate||U.createdAt)-new Date(C.submittedDate||C.createdAt))[0],_=A=>{const O=$=>String($||"").trim().toLowerCase()==="none noted",C=Q(A),U=(C==null?void 0:C.payload)||{},Z=y(A),W=Z?Q(Z):null,ne=(W==null?void 0:W.payload)||{},fe=(ne.nextPriorities||[]).map($=>({goal:$||"",status:"",summary:""})).filter($=>String($.goal||"").trim()&&!O($.goal)),ye=U.goals&&U.goals.length?U.goals:fe.length?fe:[{},{},{}],we=U.primaryFocus||(O(ne.nextQuarterFocus)?"":ne.nextQuarterFocus),Ne=(de==null?void 0:de.areaLabel)===l&&(de==null?void 0:de.quarter)===A,me=U.submittedDate||(C==null?void 0:C.submittedDate)||"",Je=A==="Q1";return React.createElement("div",{key:`primary-${A}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xl font-display text-ink"},`${A} Primary Focus and Goals`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},k[A])),Ne?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("textarea",{value:(oe==null?void 0:oe.primaryFocus)||"",onChange:$=>pe(se=>N(x({},se),{primaryFocus:$.target.value})),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"mt-2 space-y-3"},((oe==null?void 0:oe.goals)||[]).map(($,se)=>React.createElement("div",{key:se},React.createElement("input",{type:"text",value:$.goal,onChange:z=>pe(ke=>N(x({},ke),{goals:ke.goals.map((Ye,At)=>At===se?N(x({},Ye),{goal:z.target.value}):Ye)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${se+1}`}))))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{Qe(null),pe(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm",disabled:Pe},"Cancel"),React.createElement("button",{type:"button",onClick:wt,className:"px-3 py-2 bg-gold text-white rounded-lg text-sm",disabled:Pe},Pe?"Saving...":"Save"))):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("div",{className:"whitespace-pre-line"},we||"-")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"space-y-1"},ye.map(($,se)=>React.createElement("div",{key:se,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ie,{size:12})),React.createElement("div",null,React.createElement("span",null,$.goal||"-"))))))),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,me?st(me):"00-00-0000"),Je&&React.createElement("button",{type:"button",onClick:()=>yt(l,A,C,U),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},Y=A=>{const O=Q(A),C=(O==null?void 0:O.payload)||{},U=C.submittedDate||(O==null?void 0:O.submittedDate)||"",Z=C.challenges||{},W=C.supportTypes||{},ne=C.challengesChecked||"",fe=C.supportTypesChecked||"",ye=Object.keys(g).filter(z=>Z[z]).map(z=>z==="other"&&Z.otherText?`Other: ${Z.otherText}`:g[z]),we=Object.keys(F).filter(z=>W[z]).map(z=>z==="other"&&W.otherText?`Other: ${W.otherText}`:F[z]),Ne=ne||(ye.length?ye.join(", "):""),me=fe||(we.length?we.join(", "):""),$=(C.nextPriorities||[]).filter(z=>String(z||"").trim()),se=!!(C.wins||Z.details||Ne||C.supportNeeded||me||C.nextQuarterFocus||$.length||C.decisionsNeeded);return React.createElement("div",{key:`overview-${A}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-lg font-display text-ink"},`${A} Quarterly Reflection`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},k[A])),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},m[A]))),!O||!se?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No submission yet."):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",{className:"whitespace-pre-line"},C.wins||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",{className:"whitespace-pre-line"},Z.details||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges (checked)"),React.createElement("div",null,Ne||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",{className:"whitespace-pre-line"},C.supportNeeded||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support types"),React.createElement("div",null,me||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next quarter focus area and goals"),React.createElement("div",{className:"whitespace-pre-line"},C.nextQuarterFocus||"None noted"),React.createElement("div",{className:"mt-2 space-y-1"},$.length?$.map((z,ke)=>React.createElement("div",{key:ke,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ie,{size:12})),React.createElement("div",null,z||"-"))):React.createElement("div",null,"None noted"))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Other notes"),React.createElement("div",{className:"whitespace-pre-line"},C.decisionsNeeded||"None noted"))),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,U?st(U):"00-00-0000"),React.createElement("button",{type:"button",onClick:()=>ft(l,A),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},te=A=>{var U;const O=Q(A),C=((U=O==null?void 0:O.payload)==null?void 0:U.review)||null;return React.createElement(zt,{key:`review-${A}`,areaLabel:l,quarter:A,review:C,onSave:bt})};return React.createElement("div",{className:"mt-6 space-y-6"},c.map(A=>React.createElement("div",{key:A.join("-"),className:"space-y-6"},React.createElement("div",{className:"grid grid-cols-2 gap-4"},A.map(O=>_(O))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},A.map(O=>Y(O))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},A.map(O=>te(O))))))})()),St&&React.createElement(Ht,{initiative:Re,onBack:()=>p("list"),onEdit:()=>mt(Re),onSubmitUpdate:vt,onReviewUpdate:xt}),(o==="add"||o==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>p(be?"detail":"list"),className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(ct,{size:18})," Cancel"),React.createElement(Bt,{initiative:be,onSave:gt,onCancel:()=>p(be?"detail":"list"),isSaving:v})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},Zt=ReactDOM.createRoot(document.getElementById("root"));Zt.render(React.createElement(Kt,null));})();
