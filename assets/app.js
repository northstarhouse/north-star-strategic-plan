(()=>{var Ct=Object.defineProperty,St=Object.defineProperties;var At=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var ze=(e,t,r)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,b=(e,t)=>{for(var r in t||(t={}))Ye.call(t,r)&&ze(e,r,t[r]);if(fe)for(var r of fe(t))qe.call(t,r)&&ze(e,r,t[r]);return e},w=(e,t)=>St(e,At(t));var He=(e,t)=>{var r={};for(var c in e)Ye.call(e,c)&&t.indexOf(c)<0&&(r[c]=e[c]);if(e!=null&&fe)for(var c of fe(e))t.indexOf(c)<0&&qe.call(e,c)&&(r[c]=e[c]);return r};const{useState:g,useEffect:le,useMemo:we}=React,st="nsh-strategy-cache-v1",We="nsh-strategy-metrics-cache-v1",Ze="nsh-strategy-sections-cache-v1",Ee="nsh-strategy-quarterly-cache-v1",Oe="nsh-strategy-vision-cache-v1",ye="nsh-strategy-focus-goals-cache-v1",Dt=300*1e3,Pe=()=>{try{const e=localStorage.getItem(st);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},ce=e=>{try{localStorage.setItem(st,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},Re=!0,M="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",Ke=M,pe=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],je=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fundraising",sheet:"Fundraising"},{key:"events",label:"Events",sheet:"Events"},{key:"marketing",label:"Marketing",sheet:"Marketing"},{key:"venue",label:"Venue",sheet:"Venue"}],de=["Not started","On track","At risk","Behind","Complete"],Ft=["Pending","Reviewed","Needs info"],at=Array.from({length:11},(e,t)=>t*10),Me=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"We will have a clear set of documented programs and services that reinforce the House's role as a cultural historical gathering center and are well-organized, financially sustainable, and have clearly communicated teams of staff/volunteers that run each of the programs/services.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"A smooth-running organization that ensures the success of the Conservancy.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"},{id:"3",title:"Complete house restoration and grounds plan",focusArea:"House and Grounds Development",description:"Finish the first floor renovation, restore the second floor with a volunteer crew, install fire suppression, and clarify the grounds plan.",owner:"Facilities Lead",coChampions:"Volunteer Crew Lead, Board Liaison",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"First floor renovated, second floor restored, fire suppression installed, grounds plan approved.",threeYearVision:"Complete the first floor renovation. The 2nd floor of the house will be restored by a clearly-led and well-organized volunteer crew. A fire suppression system will be installed. Plans for the rest of the grounds will have been clarified.",annualGoals:"Confirm scope, recruit volunteer crew, secure fire suppression bids, draft grounds plan options.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"},{id:"4",title:"Staff and organize fund development plan",focusArea:"Fund Development",description:"Build staffing, systems, and campaign execution to accelerate fundraising.",owner:"Development Director",coChampions:"Board Treasurer, Capital Campaign Chair",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"Fund development staffing in place, $1M raised toward capital campaign.",threeYearVision:"Over the next three years we will have successfully staffed and organized our fund development plans and raised $1M of the $2M capital campaign.",annualGoals:"Hire development lead, finalize campaign plan, raise initial $250k.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"}],Tt=[{id:"fg-1",focusArea:"Fund Development",goalTopic:"Annual goal",annualGoals:"Document the Conservancy\u2019s fund development plan.",annualGoalsItems:[],goalDetails:"",goalLead:"",futureGoals:"",startDate:"",dueDate:"",goalChampions:"Jeff, Haley",goalTeamMembers:"",progress:"Not Started",category:""}],v={isConfigured:()=>Re&&M&&M.length>0,postJson:async(e,t)=>{const r=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Request failed");return r.json()},fetchAll:async()=>{if(!Re){const e=Pe();return(e==null?void 0:e.objects)||[]}if(!v.isConfigured())return console.log("Google Sheets not configured, using sample data"),Me;try{const e=await fetch(`${M}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),Me}},create:async e=>{if(!v.isConfigured())return console.log("Google Sheets not configured, saving locally only"),w(b({},e),{id:Date.now().toString()});try{return(await v.postJson(M,{action:"create",object:e})).result||w(b({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),w(b({},e),{id:Date.now().toString()})}},update:async e=>{if(!v.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await v.postJson(M,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!v.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await v.postJson(M,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:r})=>{if(!Ke)throw new Error("Drive upload not configured");const c={action:"uploadImage",filename:e,mimeType:t,data:r},u=await v.postJson(Ke,c);if(!u.success)throw new Error(u.error||"Upload failed");return u.result},fetchMetrics:async()=>{if(!v.isConfigured())return null;try{const e=await fetch(`${M}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!v.isConfigured())throw new Error("Google Sheets not configured");const t=await v.postJson(M,{action:"submitQuarterlyUpdate",form:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},submitReviewUpdate:async e=>{if(!v.isConfigured())throw new Error("Google Sheets not configured");const t=await v.postJson(M,{action:"submitReviewUpdate",review:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},fetchVisionStatements:async()=>{if(!v.isConfigured())return[];try{const e=await fetch(`${M}?action=getVisionStatements`);if(!e.ok)throw new Error("Failed to fetch vision statements");return(await e.json()).vision||[]}catch(e){return console.error("Error fetching vision statements:",e),[]}},updateVisionStatement:async e=>{if(!v.isConfigured())throw new Error("Google Sheets not configured");const t=await v.postJson(M,{action:"updateVisionStatement",vision:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},fetchFocusAreaGoals:async()=>{if(!v.isConfigured())return[];try{const e=await fetch(`${M}?action=getFocusAreaGoals`);if(!e.ok)throw new Error("Failed to fetch focus area goals");return(await e.json()).goals||[]}catch(e){return console.error("Error fetching focus area goals:",e),[]}},updateFocusAreaGoal:async e=>{if(!v.isConfigured())throw new Error("Google Sheets not configured");const t=await v.postJson(M,{action:"updateFocusAreaGoal",goal:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},deleteFocusAreaGoal:async e=>{if(!v.isConfigured())throw new Error("Google Sheets not configured");const t=await v.postJson(M,{action:"deleteFocusAreaGoal",id:e});if(!t.success)throw new Error(t.error||"Delete failed");return t.result},fetchQuarterlyUpdates:async()=>{if(!v.isConfigured())return[];try{const e=await fetch(`${M}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!v.isConfigured())return null;try{const e=await fetch(`${M}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},ue=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read cache:",t),null}},K=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn("Failed to write cache:",r)}},rt=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,Ge=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},Xe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const r=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),u=String(t.getFullYear());return`${r}-${c}-${u}`},It=e=>{switch(e){case"Q1":return"Q2";case"Q2":return"Q3";case"Q3":return"Q4";case"Q4":return"Final";default:return null}},Qe=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),ot=e=>{if(e==null)return"N/A";const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)},Ue=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},Et=(e,t=3)=>{const r=[];for(String(e||"").split(`
`).map(u=>u.trim()).filter(Boolean).forEach(u=>{const s=u.split("|").map(x=>x.trim()),[d="",S="",o=""]=s;r.push({action:d,owner:S,deadline:o})});r.length<t;)r.push({action:"",owner:"",deadline:""});return r.slice(0,t)},et=e=>e.map(t=>[t.action,t.owner,t.deadline].map(r=>r.trim()).join(" | ")).filter(t=>t.replace(/\|/g,"").trim()!=="").join(`
`),te=e=>w(b({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),Ot=e=>e.slice().sort((t,r)=>new Date(r.date)-new Date(t.date)),Qt=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-gold text-white border-gold";default:return"bg-stone-100 text-stone-600 border-stone-200"}},Pt=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},Rt=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const ne=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const nt=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const jt=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),Mt=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${Qt(e)}`},e);const Gt=({update:e,onReviewSave:t})=>{const[r,c]=g(e.reviewStatus||"Pending"),[u,s]=g(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Ge(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${Pt(r)}`},r)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-gold"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:r,onChange:d=>c(d.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},Ft.map(d=>React.createElement("option",{key:d,value:d},d))),React.createElement("input",{type:"text",value:u,onChange:d=>s(d.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,r,u),className:"px-4 py-2 bg-gold text-white rounded-lg text-sm"},"Save review"))))},Ut=({initiative:e,onSubmit:t})=>{const[r,c]=g(""),[u,s]=g(""),[d,S]=g(""),[o,x]=g(""),[f,I]=g(""),[j,L]=g(e.progress||0),[R,J]=g("");return React.createElement("form",{onSubmit:i=>{i.preventDefault();const l={id:rt(),date:new Date().toISOString(),author:r,summary:u,details:d,blockers:o,nextSteps:f,progress:Number(j)||0,links:R,reviewStatus:"Pending",reviewNotes:""};t(l),c(""),s(""),S(""),x(""),I(""),L(e.progress||0),J("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:r,onChange:i=>c(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:u,onChange:i=>s(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:d,onChange:i=>S(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:o,onChange:i=>x(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:f,onChange:i=>I(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:j,onChange:i=>L(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},at.map(i=>React.createElement("option",{key:i,value:i},i,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:R,onChange:i=>J(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},$t=({initiative:e,onSave:t,onCancel:r,isSaving:c})=>{const[u,s]=g(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||de[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),d=(o,x)=>{s(f=>w(b({},f),{[o]:x}))};return React.createElement("form",{onSubmit:o=>{o.preventDefault();const x=w(b(b({},e),u),{progress:Number(u.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(x)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:u.title,onChange:o=>d("title",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:u.focusArea,onChange:o=>d("focusArea",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),pe.map(o=>React.createElement("option",{key:o,value:o},o)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:u.owner,onChange:o=>d("owner",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:u.description,onChange:o=>d("description",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:u.coChampions,onChange:o=>d("coChampions",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:u.status,onChange:o=>d("status",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},de.map(o=>React.createElement("option",{key:o,value:o},o)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:u.progress,onChange:o=>d("progress",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},at.map(o=>React.createElement("option",{key:o,value:o},o,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:u.targetDate,onChange:o=>d("targetDate",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:u.successMetrics,onChange:o=>d("successMetrics",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:u.threeYearVision,onChange:o=>d("threeYearVision",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:u.annualGoals,onChange:o=>d("annualGoals",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:u.notes,onChange:o=>d("notes",o.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:r,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:c,className:"px-5 py-2 bg-gold text-white rounded-lg"},c?"Saving...":"Save initiative")))},tt=()=>({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},decisionsNeeded:"",nextQuarterFocus:"",nextPriorities:["","",""],finalTallyOverview:""}),Vt=({onSubmitted:e,initialData:t,hidePrimaryGoals:r=!1,defaultFocusArea:c="",lockFocusArea:u=!1})=>{const[s,d]=g(()=>w(b({},tt()),{focusArea:c||""})),[S,o]=g(!1),[x,f]=g(!1),[I,j]=g([]),L=`nsh-quarterly-next-${s.focusArea||"area"}-${s.quarter||"quarter"}`,R=(a,A)=>{d(y=>w(b({},y),{[a]:A}))},J=(a,A,y)=>{d(O=>{const U=O.goals.map((H,W)=>W===a?w(b({},H),{[A]:y}):H);return w(b({},O),{goals:U})})},G=(a,A)=>{d(y=>w(b({},y),{challenges:w(b({},y.challenges),{[a]:A})}))},i=(a,A)=>{d(y=>w(b({},y),{supportTypes:w(b({},y.supportTypes),{[a]:A})}))},l=(a,A)=>{d(y=>{const O=y.nextPriorities.map((U,H)=>H===a?A:U);return w(b({},y),{nextPriorities:O})})};le(()=>{t&&(d(a=>w(b(b({},tt()),t),{challenges:b(b({},a.challenges),t.challenges||{}),supportTypes:b(b({},a.supportTypes),t.supportTypes||{})})),j(t.uploadedFiles||[]))},[t]),le(()=>{var A;if(t||!s.focusArea||!s.quarter||s.primaryFocus||(A=s.goals)!=null&&A.some(y=>y.goal))return;const a=localStorage.getItem(L);if(a)try{const y=JSON.parse(a);if(!y)return;d(O=>{var U;return w(b({},O),{primaryFocus:y.primaryFocus||O.primaryFocus,goals:(U=y.goals)!=null&&U.length?y.goals:O.goals})})}catch(y){console.warn("Failed to read quarterly suggestion:",y)}},[t,s.focusArea,s.quarter,s.primaryFocus,s.goals,L]);const E=async a=>{a.preventDefault(),f(!0);try{await v.submitQuarterlyUpdate(w(b({},s),{uploadedFiles:I}));const A=It(s.quarter);if(A&&s.focusArea){const y=`nsh-quarterly-next-${s.focusArea}-${A}`,O=s.nextPriorities||[],U={primaryFocus:s.nextQuarterFocus||O[0]||"",goals:[{goal:O[0]||"",status:"On Track",summary:""},{goal:O[1]||"",status:"On Track",summary:""},{goal:O[2]||"",status:"On Track",summary:""}]};localStorage.setItem(y,JSON.stringify(U))}await(e==null?void 0:e())}catch(A){console.error("Quarterly update submit failed:",A),alert("Submission failed. Please try again.")}f(!1)},Q=async a=>{const A=Array.from(a.target.files||[]);if(A.length){o(!0);try{const y=await Promise.all(A.map(O=>new Promise((U,H)=>{const W=new FileReader;W.onload=async()=>{const ae=String(W.result||"").split(",")[1]||"";try{const re=await v.uploadFile({filename:O.name,mimeType:O.type,data:ae});U(re)}catch(re){H(re)}},W.onerror=H,W.readAsDataURL(O)})));j(O=>[...O,...y])}catch(y){console.error("Failed to upload files:",y),alert("Failed to upload files. Please try again.")}o(!1),a.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:E,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:s.focusArea,onChange:a=>R("focusArea",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0,disabled:u},React.createElement("option",{value:""},"Select area"),je.map(a=>React.createElement("option",{key:a.label,value:a.label},a.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:s.quarter,onChange:a=>R("quarter",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Q4","Final"].map(a=>React.createElement("option",{key:a,value:a},a==="Q1"?"Q1 (Jan 1 - Mar 31)":a==="Q2"?"Q2 (Apr 1 - Jun 30)":a==="Q3"?"Q3 (Jul 1 - Sep 30)":a==="Q4"?"Q4 (Oct 1 - Dec 31)":a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:s.year,onChange:a=>R("year",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:s.submittedDate,onChange:a=>R("submittedDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly reflection"),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"What went well"),React.createElement("textarea",{value:s.wins,onChange:a=>R("wins",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.capacity,onChange:a=>G("capacity",a.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.budget,onChange:a=>G("budget",a.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.scheduling,onChange:a=>G("scheduling",a.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.coordination,onChange:a=>G("coordination",a.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.external,onChange:a=>G("external",a.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.challenges.other,onChange:a=>G("other",a.target.checked)}),"Other")),s.challenges.other&&React.createElement("input",{type:"text",value:s.challenges.otherText,onChange:a=>G("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:s.challenges.details,onChange:a=>G("details",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Support needed to stay on track"),React.createElement("textarea",{value:s.supportNeeded,onChange:a=>R("supportNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.staff,onChange:a=>i("staff",a.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.marketing,onChange:a=>i("marketing",a.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.board,onChange:a=>i("board",a.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.funding,onChange:a=>i("funding",a.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.facilities,onChange:a=>i("facilities",a.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:s.supportTypes.other,onChange:a=>i("other",a.target.checked)}),"Other")),s.supportTypes.other&&React.createElement("input",{type:"text",value:s.supportTypes.otherText,onChange:a=>i("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Decisions needed"),React.createElement("textarea",{value:s.decisionsNeeded,onChange:a=>R("decisionsNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Decisions or approvals needed."}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Next quarter focus area and goals"),React.createElement("input",{type:"text",value:s.nextQuarterFocus,onChange:a=>R("nextQuarterFocus",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Primary focus for next quarter"}),React.createElement("div",{className:"mt-3 space-y-2"},s.nextPriorities.map((a,A)=>React.createElement("input",{key:A,type:"text",value:a,onChange:y=>l(A,y.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${A+1}.`})))),s.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:s.finalTallyOverview,onChange:a=>R("finalTallyOverview",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-gold text-white rounded-lg",disabled:x},x?"Submitting...":"Submit quarterly update")))))},Lt=({areaLabel:e,quarter:t,review:r,onSave:c})=>{const u=l=>({statusAfterReview:(l==null?void 0:l.statusAfterReview)||"",actionsRows:Et(l==null?void 0:l.actionsAssigned),crossAreaImpacts:(l==null?void 0:l.crossAreaImpacts)||"",areasImpacted:(l==null?void 0:l.areasImpacted)||"",coordinationNeeded:(l==null?void 0:l.coordinationNeeded)||"",priorityConfirmation:(l==null?void 0:l.priorityConfirmation)||"",escalationFlag:(l==null?void 0:l.escalationFlag)||"",reviewCompletedOn:Ue(l==null?void 0:l.reviewCompletedOn),nextCheckInDate:Ue(l==null?void 0:l.nextCheckInDate)}),[s,d]=g(()=>u(r)),[S,o]=g(!1),[x,f]=g(!1);le(()=>{d(u(r))},[r,e,t]),le(()=>{f(!1)},[e,t]);const I=(l,E)=>{d(Q=>w(b({},Q),{[l]:E}))},j=(l,E,Q)=>{d(a=>{const A=a.actionsRows.map((y,O)=>O===l?w(b({},y),{[E]:Q}):y);return w(b({},a),{actionsRows:A})})},L=async()=>{o(!0);const l=s.crossAreaImpacts==="Affects another area",E={focusArea:e,quarter:t,statusAfterReview:s.statusAfterReview,actionsAssigned:et(s.actionsRows),crossAreaImpacts:s.crossAreaImpacts,areasImpacted:l?s.areasImpacted:"",coordinationNeeded:l?s.coordinationNeeded:"",priorityConfirmation:s.priorityConfirmation,escalationFlag:s.escalationFlag,reviewCompletedOn:s.reviewCompletedOn,nextCheckInDate:s.nextCheckInDate};try{await c(E)}catch(Q){console.error("Failed to save review:",Q),alert("Failed to save review. Please try again.")}o(!1)},R=["On track","Minor adjustments needed","Off track - intervention required"],J=["None","Affects another area"],G=["Approved","Adjusted","Replaced"],i=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];if(!x){const E=[{label:"Status After Review",value:s.statusAfterReview},{label:"Actions Assigned",value:et(s.actionsRows)},{label:"Cross-Area Impacts",value:s.crossAreaImpacts},{label:"Area(s) impacted",value:s.areasImpacted},{label:"Coordination needed",value:s.coordinationNeeded},{label:"Priority Confirmation (Next Quarter)",value:s.priorityConfirmation},{label:"Escalation Flag",value:s.escalationFlag},{label:"Review completed on",value:s.reviewCompletedOn},{label:"Next check-in date",value:s.nextCheckInDate}].filter(Q=>Q.value);return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>f(!0),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Edit review")),E.length===0?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No review submitted yet."):React.createElement("div",{className:"mt-4 space-y-2 text-sm text-stone-700"},E.map(Q=>React.createElement("div",{key:Q.label},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Q.label),React.createElement("div",{className:"whitespace-pre-wrap"},Q.value)))))}return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>f(!1),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Close")),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},R.map(l=>React.createElement("label",{key:l,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-status`,value:l,checked:s.statusAfterReview===l,onChange:E=>I("statusAfterReview",E.target.value),className:"accent-clay"}),React.createElement("span",null,l))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},s.actionsRows.map((l,E)=>React.createElement("div",{key:E,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:l.action,onChange:Q=>j(E,"action",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:l.owner,onChange:Q=>j(E,"owner",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:l.deadline,onChange:Q=>j(E,"deadline",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},J.map(l=>React.createElement("label",{key:l,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-impact`,value:l,checked:s.crossAreaImpacts===l,onChange:E=>I("crossAreaImpacts",E.target.value),className:"accent-clay"}),React.createElement("span",null,l)))),s.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:s.areasImpacted,onChange:l=>I("areasImpacted",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:s.coordinationNeeded,onChange:l=>I("coordinationNeeded",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},G.map(l=>React.createElement("label",{key:l,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-priority`,value:l,checked:s.priorityConfirmation===l,onChange:E=>I("priorityConfirmation",E.target.value),className:"accent-clay"}),React.createElement("span",null,l))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},i.map(l=>React.createElement("label",{key:l,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-escalation`,value:l,checked:s.escalationFlag===l,onChange:E=>I("escalationFlag",E.target.value),className:"accent-clay"}),React.createElement("span",null,l))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:s.reviewCompletedOn,onChange:l=>I("reviewCompletedOn",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:s.nextCheckInDate,onChange:l=>I("nextCheckInDate",l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:L,disabled:S,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},S?"Saving...":"Save review")))},Bt=({focusArea:e,vision:t,onSave:r,isSaving:c})=>{const[u,s]=g(!1),[d,S]=g(t||"");return le(()=>{u||S(t||"")},[t,u]),React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e),React.createElement("div",{className:"flex items-center gap-2 text-xs"},u?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>{s(!1),S(t||"")},className:"px-2 py-1 border border-stone-200 rounded-lg",disabled:c},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{r(e,d),s(!1)},className:"px-2 py-1 bg-gold text-white rounded-lg",disabled:c},c?"Saving...":"Save")):React.createElement("button",{type:"button",onClick:()=>s(!0),className:"px-2 py-1 border border-stone-200 rounded-lg"},"Edit"))),u?React.createElement("textarea",{value:d,onChange:x=>S(x.target.value),className:"w-full mt-3 px-3 py-2 border border-stone-200 rounded-lg text-sm min-h-[120px]",placeholder:"Describe what success looks like in three years."}):React.createElement("div",{className:"text-sm text-stone-700 mt-2 space-y-1"},t?String(t).split(`
`).map(x=>x.trim()).filter(Boolean).map((x,f)=>React.createElement("div",{key:`${e}-vision-${f}`,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("span",{className:"whitespace-pre-wrap"},x))):React.createElement("span",null,"Add a three-year vision for this focus area.")))},_t=({focusArea:e,initialGoal:t,presetCategory:r,onSave:c,onCancel:u,isSaving:s})=>{const[d,S]=g(()=>({id:(t==null?void 0:t.id)||"",focusArea:e,goalTopic:"Annual goal",annualGoals:(t==null?void 0:t.annualGoals)||"",startDate:(t==null?void 0:t.startDate)||"",dueDate:(t==null?void 0:t.dueDate)||"",progress:(t==null?void 0:t.progress)||de[0],category:(t==null?void 0:t.category)||r||"Annual goals",goalDetails:(t==null?void 0:t.goalDetails)||"",goalLead:(t==null?void 0:t.goalLead)||"",futureGoals:(t==null?void 0:t.futureGoals)||""})),o=(f,I)=>{S(j=>w(b({},j),{[f]:I}))};return React.createElement("form",{onSubmit:f=>{f.preventDefault(),c(w(b({},d),{goalTopic:"Annual goal",annualGoalsItems:[]}))},className:"mt-4 bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goal"),React.createElement("input",{type:"text",value:d.annualGoals,onChange:f=>o("annualGoals",f.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:d.goalLead,onChange:f=>o("goalLead",f.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("textarea",{value:d.goalDetails,onChange:f=>o("goalDetails",f.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[60px]",placeholder:"Add details, notes, or key steps."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Due date"),React.createElement("input",{type:"date",value:Ue(d.dueDate),onChange:f=>o("dueDate",f.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:d.progress,onChange:f=>o("progress",f.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},de.map(f=>React.createElement("option",{key:f,value:f},f))))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:u,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:s},"Cancel"),React.createElement("button",{type:"submit",className:"px-4 py-2 bg-gold text-white rounded-lg text-sm",disabled:s},s?"Saving...":"Save goal")))},lt=({focusArea:e,goals:t,onSaveGoal:r,onDeleteGoal:c,isSaving:u,hideTitle:s})=>{const[d,S]=g(null),[o,x]=g(!1),[f,I]=g("Annual goals"),j=we(()=>t.filter(i=>!i.category||i.category==="Annual goals"||i.category==="Goals"),[t]),L=we(()=>t.filter(i=>i.category==="Future Goals"),[t]),R=i=>{x(!1),S(i),I(i.category||"Annual goals")},J=i=>{S(null),x(!0),I(i)},G=i=>{r(i),S(null),x(!1)};return React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},!s&&React.createElement("div",{className:"font-display text-xl text-ink"},e),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Annual goals"),React.createElement("button",{type:"button",onClick:()=>J("Annual goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),j.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No annual goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},j.map(i=>React.createElement("div",{key:i.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},i.annualGoals||"Untitled goal")),i.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},i.goalDetails)),React.createElement("button",{type:"button",onClick:()=>R(i),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,i.dueDate?`Due: ${Ge(i.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},i.progress||de[0])))))),React.createElement("div",{className:"mt-6 border-t border-stone-200 pt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Future goals"),React.createElement("button",{type:"button",onClick:()=>J("Future Goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),L.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No future goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},L.map(i=>React.createElement("div",{key:i.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},i.annualGoals||"Untitled goal")),i.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},i.goalDetails)),React.createElement("button",{type:"button",onClick:()=>R(i),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,i.dueDate?`Due: ${Ge(i.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},i.progress||de[0])))))),(o||d)&&React.createElement(_t,{focusArea:e,initialGoal:d,presetCategory:f,onSave:G,onCancel:()=>{x(!1),S(null)},isSaving:u}))},Jt=({goals:e,onSaveGoal:t,onDeleteGoal:r,isSaving:c,focusFilter:u})=>{const s=u?pe.filter(d=>d===u):pe;return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Focus areas"),React.createElement("p",{className:"text-stone-600 mt-1"},"Track goals by strategic focus area."))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.map(d=>React.createElement(lt,{key:d,focusArea:d,goals:e.filter(S=>S.focusArea===d),onSaveGoal:t,onDeleteGoal:r,isSaving:c}))))},zt=({initiatives:e,metrics:t,visionStatements:r,onSaveVision:c,isSavingVision:u})=>{const s=e.length?Math.round(e.reduce((o,x)=>o+(Number(x.progress)||0),0)/e.length):0,d=pe.map(o=>({focusArea:o,count:e.filter(x=>x.focusArea===o).length})),S=pe.map(o=>{const x=r==null?void 0:r.find(I=>I.focusArea===o),f=e.find(I=>I.focusArea===o&&I.threeYearVision);return{focusArea:o,vision:(x==null?void 0:x.threeYearVision)||(f==null?void 0:f.threeYearVision)||""}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-gold"},React.createElement(Rt,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To revitalize North Star House as a cultural gathering place that connects people of all ages through the arts, theater, literature, history, and music\u2014fostering creativity, learning, and community for generations to come."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"},"Vision: [Add your vision statement here]")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:Qe(t==null?void 0:t.volunteersCount)},{label:"Events booked",value:Qe(t==null?void 0:t.eventsCount)},{label:"Donation total",value:ot(t==null?void 0:t.donationsTotal)},{label:"Sponsors",value:Qe(t==null?void 0:t.sponsorsCount)}].map(o=>React.createElement("div",{key:o.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},o.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},o.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},S.map(o=>React.createElement(Bt,{key:o.focusArea,focusArea:o.focusArea,vision:o.vision,onSave:c,isSaving:u})))))};const Yt=({initiative:e,onBack:t,onEdit:r,onSubmitUpdate:c,onReviewUpdate:u})=>{const s=Ot(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(nt,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(Mt,{status:e.status}),React.createElement("button",{onClick:r,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(jt,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(Ut,{initiative:e,onSubmit:d=>c(e,d)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},s.length," updates")),s.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},s.map(d=>React.createElement(Gt,{key:d.id,update:d,onReviewSave:(S,o,x)=>u(e,S,o,x)})))))},qt=()=>{const[e,t]=g([]),[r,c]=g("dashboard"),[u,s]=g(null),[d,S]=g(null),[o,x]=g(!0),[f,I]=g(!1),[j,L]=g(!1),[R,J]=g({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[G,i]=g([]),[l,E]=g(!1),[Q,a]=g([]),[A,y]=g(!1),[O,U]=g(null),[H,W]=g(!1),[ae,re]=g(null),Ne={Construction:"House and Grounds Development",Grounds:"House and Grounds Development",Interiors:"House and Grounds Development",Fundraising:"Fund Development",Marketing:"Organizational Development",Venue:"Fund Development",Docents:"Programs and Events",Events:"Programs and Events"},[dt,$e]=g({Construction:null,Grounds:null,Interiors:null,Docents:null,Fundraising:null,Events:null,Marketing:null,Venue:null}),[Ve,ke]=g([]),[it,Ce]=g(null),[oe,Se]=g(null),[X,ie]=g(null),[Ae,Le]=g(!1),ee=je.reduce((n,p)=>(n[p.key]={label:p.label,key:p.sheet},n),{}),De=we(()=>e.find(n=>n.id===u)||null,[e,u]),me=we(()=>e.find(n=>n.id===d)||null,[e,d]);le(()=>{Fe()},[]);const Fe=async({useCache:n=!0}={})=>{var T,_;if(!Re){const $=Pe();t((($==null?void 0:$.objects)||[]).map(te)),L(!1),a(Tt),x(!1);return}const p=n?Pe():null,N=p&&Date.now()-p.updatedAt<Dt,m=n?ue(We):null,h=n?ue(Ze):null,F=n?ue(Ee):null,D=n?ue(Oe):null,P=n?ue(ye):null;(T=p==null?void 0:p.objects)!=null&&T.length?(t(p.objects.map(te)),L(v.isConfigured()),x(!1)):x(!0),m&&J(m),h&&$e(h),F&&ke(F),D&&i(D),P&&a(P);try{const Z=(await v.fetchAll()||[]).map(te);t(Z),L(v.isConfigured()),ce(Z)}catch($){console.error("Failed to load data:",$),(_=p==null?void 0:p.objects)!=null&&_.length||t(Me.map(te))}x(!1);const B=await v.fetchMetrics();B&&(J(B),K(We,B));const z=await v.fetchSectionSnapshots();z&&($e(z),K(Ze,z));const se=await v.fetchQuarterlyUpdates();se.length&&(ke(se),K(Ee,se));const k=await v.fetchVisionStatements();k.length&&(i(k),K(Oe,k));const C=await v.fetchFocusAreaGoals();C.length&&(a(C),K(ye,C))},Wt=n=>{s(n),c("detail"),window.scrollTo(0,0)},Zt=()=>{S(null),c("add"),window.scrollTo(0,0)},ct=n=>{S(n.id),c("edit"),window.scrollTo(0,0)},ut=async n=>{I(!0);try{if(me){const p=await v.update(w(b({},n),{updates:n.updates||[]}));t(N=>{const m=N.map(h=>h.id===p.id?te(p):h);return ce(m),m}),s(p.id),c("detail")}else{const p=await v.create(w(b({},n),{id:n.id||rt(),updates:n.updates||[]}));t(N=>{const m=[...N,te(p)];return ce(m),m}),s(p.id),c("detail")}}catch(p){console.error("Failed to save initiative:",p),alert("Failed to save. Please try again.")}I(!1)},pt=async(n,p)=>{const N=[p,...n.updates||[]],m=w(b({},n),{updates:N,progress:p.progress,lastUpdateAt:p.date});try{await v.update(m),t(h=>{const F=h.map(D=>D.id===n.id?te(m):D);return ce(F),F})}catch(h){console.error("Failed to submit update:",h),alert("Failed to submit update. Please try again.")}},mt=async(n,p,N,m)=>{const h=(n.updates||[]).map(D=>D.id===p?w(b({},D),{reviewStatus:N,reviewNotes:m}):D),F=w(b({},n),{updates:h});try{await v.update(F),t(D=>{const P=D.map(B=>B.id===n.id?te(F):B);return ce(P),P})}catch(D){console.error("Failed to save review:",D),alert("Failed to save review. Please try again.")}},gt=n=>{Ce({focusArea:n}),c("quarterly"),s(null),U(null),window.scrollTo(0,0)},vt=async n=>{const h=n,{focusArea:p,quarter:N}=h,m=He(h,["focusArea","quarter"]);await v.submitReviewUpdate(n),ke(F=>{const D=F.findIndex(z=>z.focusArea===p&&z.quarter===N),P=D>=0?w(b({},F[D]),{payload:w(b({},F[D].payload||{}),{review:m})}):{focusArea:p,quarter:N,submittedDate:"",payload:{review:m}},B=D>=0?F.map((z,se)=>se===D?P:z):[...F,P];return K(Ee,B),B})},xt=(n,p)=>{const m=Ve.filter(P=>P.focusArea===n&&P.quarter===p).sort((P,B)=>new Date(B.submittedDate||B.createdAt)-new Date(P.submittedDate||P.createdAt))[0],h=(m==null?void 0:m.payload)||{},F=h.year||String(new Date().getFullYear()),D=h.submittedDate||(m==null?void 0:m.submittedDate)||new Date().toISOString().slice(0,10);Ce({focusArea:n,quarter:p,year:F,submittedDate:D,primaryFocus:h.primaryFocus||"",goals:h.goals&&h.goals.length?h.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:h.wins||"",challenges:h.challenges||{},supportNeeded:h.supportNeeded||"",supportTypes:h.supportTypes||{},decisionsNeeded:h.decisionsNeeded||"",nextQuarterFocus:h.nextQuarterFocus||"",nextPriorities:h.nextPriorities||["","",""],finalTallyOverview:h.finalTallyOverview||""}),c("quarterly"),window.scrollTo(0,0)},ht=(n,p,N,m)=>{if(p!=="Q1")return;const h=m.year||String(new Date().getFullYear()),F=m.submittedDate||(N==null?void 0:N.submittedDate)||new Date().toISOString().slice(0,10);Se({areaLabel:n,quarter:p}),ie({focusArea:n,quarter:p,year:h,submittedDate:F,primaryFocus:m.primaryFocus||"",goals:m.goals&&m.goals.length?m.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:m.wins||"",challenges:m.challenges||{},supportNeeded:m.supportNeeded||"",supportTypes:m.supportTypes||{},decisionsNeeded:m.decisionsNeeded||"",nextQuarterFocus:m.nextQuarterFocus||"",nextPriorities:m.nextPriorities||["","",""],finalTallyOverview:m.finalTallyOverview||"",uploadedFiles:m.uploadedFiles||[]})},bt=async()=>{if(X){Le(!0);try{await v.submitQuarterlyUpdate(X),await Fe({useCache:!1}),Se(null),ie(null)}catch(n){console.error("Failed to save inline quarterly update:",n),alert("Failed to save. Please try again.")}Le(!1)}},ft=async()=>{await Fe({useCache:!1}),Ce(null),c("dashboard")},yt=n=>{const p=Ne[n]||n;re(p),W(!0)},wt=async(n,p)=>{E(!0);try{const N=await v.updateVisionStatement({focusArea:n,threeYearVision:p});i(m=>{const h=m.findIndex(D=>D.focusArea===n),F=h>=0?m.map((D,P)=>P===h?N:D):[...m,N];return K(Oe,F),F})}catch(N){console.error("Failed to save vision statement:",N),alert("Failed to save. Please try again.")}E(!1)},Be=async n=>{y(!0);try{const p=await v.updateFocusAreaGoal(n);a(N=>{const m=N.findIndex(F=>F.id===p.id),h=m>=0?N.map((F,D)=>D===m?p:F):[...N,p];return K(ye,h),h})}catch(p){console.error("Failed to save focus goal:",p),alert("Failed to save. Please try again.")}y(!1)},_e=async n=>{y(!0);try{await v.deleteFocusAreaGoal(n),a(p=>{const N=p.filter(m=>m.id!==n);return K(ye,N),N})}catch(p){console.error("Failed to delete focus goal:",p),alert("Failed to delete. Please try again.")}y(!1)},Nt=r==="detail"&&De;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(ne,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{c("dashboard"),s(null),U(null)},className:`px-3 py-2 rounded-lg ${r==="dashboard"?"bg-stone-100":""}`},"Overview"),React.createElement("button",{onClick:()=>{c("quarterly"),s(null),U(null)},className:`px-3 py-2 rounded-lg ${r==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${j?"text-emerald-600":"text-steel"}`},j?"Synced":"Local"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("button",{onClick:()=>{c("focus"),s(null),U(null)},className:`tab-button text-sm ${r==="focus"?"active":""}`},"Focus Areas"),je.map(n=>React.createElement("button",{key:n.key,onClick:()=>{c(n.key),s(null)},className:`tab-button text-sm ${r===n.key?"active":""}`},n.label)))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},o?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,r==="dashboard"&&React.createElement(zt,{initiatives:e,metrics:R,visionStatements:G,onSaveVision:wt,isSavingVision:l}),r==="focus"&&React.createElement(Jt,{goals:Q,onSaveGoal:Be,onDeleteGoal:_e,isSaving:A,focusFilter:O}),r==="quarterly"&&React.createElement(Vt,{onSubmitted:ft,initialData:it,hidePrimaryGoals:!0}),["construction","grounds","interiors","docents","fund","events","marketing","venue"].includes(r)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h2",{className:"font-display text-3xl text-ink"},ee[r].label),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>gt(ee[r].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Quarterly form"),React.createElement("button",{type:"button",onClick:()=>yt(ee[r].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},`Focus area: ${Ne[ee[r].label]||ee[r].label}`))),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const n=dt[ee[r].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(n==null?void 0:n.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},n!=null&&n.budget?ot(n.budget):"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(n==null?void 0:n.volunteers)||"N/A")))})())),H&&ae===Ne[ee[r].label]&&React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-display text-2xl text-ink"},ae),React.createElement("button",{type:"button",onClick:()=>{W(!1),re(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Close")),React.createElement("div",{className:"mt-4"},React.createElement(lt,{focusArea:ae,goals:Q.filter(n=>n.focusArea===ae),onSaveGoal:Be,onDeleteGoal:_e,isSaving:A,hideTitle:!0}))),(()=>{const n=ee[r].label,p=[["Q1","Q2"],["Q3","Q4"]],N={Q1:"Jan 1 - Mar 31",Q2:"Apr 1 - Jun 30",Q3:"Jul 1 - Sep 30",Q4:"Oct 1 - Dec 31"},m={Q1:"Due: March 30th",Q2:"Due: June 30th",Q3:"Due: September 30th",Q4:"Due: December 31st"},h={capacity:"Capacity or volunteer limitations",budget:"Budget or funding constraints",scheduling:"Scheduling or timing issues",coordination:"Cross-area coordination gaps",external:"External factors",other:"Other"},F={staff:"Staff or volunteer help",marketing:"Marketing or communications",board:"Board guidance or decision",funding:"Funding or fundraising support",facilities:"Facilities or logistics",other:"Other"},D=k=>{switch(k){case"Q2":return"Q1";case"Q3":return"Q2";case"Q4":return"Q3";default:return null}},P=k=>Ve.filter(T=>T.focusArea===n&&T.quarter===k).sort((T,_)=>new Date(_.submittedDate||_.createdAt)-new Date(T.submittedDate||T.createdAt))[0],B=k=>{const C=P(k),T=(C==null?void 0:C.payload)||{},_=D(k),$=_?P(_):null,Z=($==null?void 0:$.payload)||{},ge=(Z.nextPriorities||[]).map(Y=>({goal:Y||"",status:"",summary:""})).filter(Y=>String(Y.goal||"").trim()),Te=T.goals&&T.goals.length?T.goals:ge.length?ge:[{},{},{}],ve=T.primaryFocus||Z.nextQuarterFocus||"",xe=(oe==null?void 0:oe.areaLabel)===n&&(oe==null?void 0:oe.quarter)===k,he=T.submittedDate||(C==null?void 0:C.submittedDate)||"",Ie=k==="Q1";return React.createElement("div",{key:`primary-${k}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xl font-display text-ink"},`${k} Primary Focus and Goals`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},N[k])),xe?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("textarea",{value:(X==null?void 0:X.primaryFocus)||"",onChange:Y=>ie(q=>w(b({},q),{primaryFocus:Y.target.value})),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"mt-2 space-y-3"},((X==null?void 0:X.goals)||[]).map((Y,q)=>React.createElement("div",{key:q},React.createElement("input",{type:"text",value:Y.goal,onChange:V=>ie(be=>w(b({},be),{goals:be.goals.map((Je,kt)=>kt===q?w(b({},Je),{goal:V.target.value}):Je)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${q+1}`}))))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{Se(null),ie(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm",disabled:Ae},"Cancel"),React.createElement("button",{type:"button",onClick:bt,className:"px-3 py-2 bg-gold text-white rounded-lg text-sm",disabled:Ae},Ae?"Saving...":"Save"))):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Primary focus"),React.createElement("div",{className:"whitespace-pre-line"},ve||"-")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel font-semibold"},"Goals"),React.createElement("div",{className:"space-y-1"},Te.map((Y,q)=>React.createElement("div",{key:q,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",null,React.createElement("span",null,Y.goal||"-"))))))),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,he?Xe(he):"00-00-0000"),Ie&&React.createElement("button",{type:"button",onClick:()=>ht(n,k,C,T),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},z=k=>{const C=P(k),T=(C==null?void 0:C.payload)||{},_=T.submittedDate||(C==null?void 0:C.submittedDate)||"",$=T.challenges||{},Z=T.supportTypes||{},ge=T.challengesChecked||"",Te=T.supportTypesChecked||"",ve=Object.keys(h).filter(V=>$[V]).map(V=>V==="other"&&$.otherText?`Other: ${$.otherText}`:h[V]),xe=Object.keys(F).filter(V=>Z[V]).map(V=>V==="other"&&Z.otherText?`Other: ${Z.otherText}`:F[V]),he=ge||(ve.length?ve.join(", "):""),Ie=Te||(xe.length?xe.join(", "):""),q=(T.nextPriorities||[]).filter(V=>String(V||"").trim());return React.createElement("div",{key:`overview-${k}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card flex flex-col"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-lg font-display text-ink"},`${k} Quarterly Reflection`),React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},N[k])),React.createElement("div",{className:"text-right"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},m[k]))),C?React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",{className:"whitespace-pre-line"},T.wins||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",{className:"whitespace-pre-line"},$.details||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges (checked)"),React.createElement("div",null,he||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",{className:"whitespace-pre-line"},T.supportNeeded||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support types"),React.createElement("div",null,Ie||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next quarter focus area and goals"),React.createElement("div",{className:"whitespace-pre-line"},T.nextQuarterFocus||"None noted"),React.createElement("div",{className:"mt-2 space-y-1"},q.length?q.map((V,be)=>React.createElement("div",{key:be,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ne,{size:12})),React.createElement("div",null,V||"-"))):React.createElement("div",null,"None noted"))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions needed"),React.createElement("div",{className:"whitespace-pre-line"},T.decisionsNeeded||"None noted"))):React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No submission yet."),React.createElement("div",{className:"mt-4 flex items-center justify-between text-xs text-steel"},React.createElement("div",null,_?Xe(_):"00-00-0000"),React.createElement("button",{type:"button",onClick:()=>xt(n,k),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")))},se=k=>{var _;const C=P(k),T=((_=C==null?void 0:C.payload)==null?void 0:_.review)||null;return React.createElement(Lt,{key:`review-${k}`,areaLabel:n,quarter:k,review:T,onSave:vt})};return React.createElement("div",{className:"mt-6 space-y-6"},p.map(k=>React.createElement("div",{key:k.join("-"),className:"space-y-6"},React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(C=>B(C))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(C=>z(C))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(C=>se(C))))))})()),Nt&&React.createElement(Yt,{initiative:De,onBack:()=>c("list"),onEdit:()=>ct(De),onSubmitUpdate:pt,onReviewUpdate:mt}),(r==="add"||r==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>c(me?"detail":"list"),className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(nt,{size:18})," Cancel"),React.createElement($t,{initiative:me,onSave:ut,onCancel:()=>c(me?"detail":"list"),isSaving:f})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},Ht=ReactDOM.createRoot(document.getElementById("root"));Ht.render(React.createElement(qt,null));})();
