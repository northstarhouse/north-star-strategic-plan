(()=>{var he=Object.defineProperty,be=Object.defineProperties;var fe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ee=(e,s,o)=>s in e?he(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,h=(e,s)=>{for(var o in s||(s={}))we.call(s,o)&&ee(e,o,s[o]);if(X)for(var o of X(s))ye.call(s,o)&&ee(e,o,s[o]);return e},b=(e,s)=>be(e,fe(s));const{useState:v,useEffect:Ne,useMemo:te}=React,ne="nsh-strategy-cache-v1",se="nsh-strategy-metrics-cache-v1",ae="nsh-strategy-sections-cache-v1",re="nsh-strategy-quarterly-cache-v1",ke=300*1e3,$=()=>{try{const e=localStorage.getItem(ne);if(!e)return null;const s=JSON.parse(e);return!s||!Array.isArray(s.objects)?null:s}catch(e){return console.warn("Failed to read cache:",e),null}},B=e=>{try{localStorage.setItem(ne,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(s){console.warn("Failed to write cache:",s)}},H=!0,O="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",oe=O,Y=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],z=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fund Development",sheet:"Fund Development"},{key:"org",label:"Organizational Development",sheet:"Organizational Development"},{key:"venue",label:"Venue",sheet:"Venue"}],le=["Not started","On track","At risk","Behind","Complete"],Se=["Pending","Reviewed","Needs info"],de=Array.from({length:11},(e,s)=>s*10),W=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"A consistent community-informed events calendar with sustained attendance growth.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"Succession plan is routine, leadership bench is stable and supported.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"}],x={isConfigured:()=>H&&O&&O.length>0,postJson:async(e,s)=>{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(s)});if(!o.ok)throw new Error("Request failed");return o.json()},fetchAll:async()=>{if(!H){const e=$();return(e==null?void 0:e.objects)||[]}if(!x.isConfigured())return console.log("Google Sheets not configured, using sample data"),W;try{const e=await fetch(`${O}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),W}},create:async e=>{if(!x.isConfigured())return console.log("Google Sheets not configured, saving locally only"),b(h({},e),{id:Date.now().toString()});try{return(await x.postJson(O,{action:"create",object:e})).result||b(h({},e),{id:Date.now().toString()})}catch(s){return console.error("Error creating in Google Sheets:",s),b(h({},e),{id:Date.now().toString()})}},update:async e=>{if(!x.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await x.postJson(O,{action:"update",object:e}),e}catch(s){return console.error("Error updating from Google Sheets:",s),e}},delete:async e=>{if(!x.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await x.postJson(O,{action:"delete",id:e}),!0}catch(s){return console.error("Error deleting from Google Sheets:",s),!1}},uploadFile:async({filename:e,mimeType:s,data:o})=>{if(!oe)throw new Error("Drive upload not configured");const m={action:"uploadImage",filename:e,mimeType:s,data:o},p=await x.postJson(oe,m);if(!p.success)throw new Error(p.error||"Upload failed");return p.result},fetchMetrics:async()=>{if(!x.isConfigured())return null;try{const e=await fetch(`${O}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!x.isConfigured())throw new Error("Google Sheets not configured");const s=await x.postJson(O,{action:"submitQuarterlyUpdate",form:e});if(!s.success)throw new Error(s.error||"Submission failed");return s.result},fetchQuarterlyUpdates:async()=>{if(!x.isConfigured())return[];try{const e=await fetch(`${O}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!x.isConfigured())return null;try{const e=await fetch(`${O}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},V=e=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):null}catch(s){return console.warn("Failed to read cache:",s),null}},_=(e,s)=>{try{localStorage.setItem(e,JSON.stringify(s))}catch(o){console.warn("Failed to write cache:",o)}},ie=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,Ce=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(s){return e}},q=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),Ae=e=>{if(e==null)return"N/A";const s=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s)},U=e=>b(h({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),De=e=>e.slice().sort((s,o)=>new Date(o.date)-new Date(s.date)),Te=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-ocean text-white border-ocean";default:return"bg-stone-100 text-stone-600 border-stone-200"}},Fe=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},Ee=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const Ie=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const ce=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const pe=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),Oe=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${Te(e)}`},e);const Ue=({update:e,onReviewSave:s})=>{const[o,m]=v(e.reviewStatus||"Pending"),[p,f]=v(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Ce(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${Fe(o)}`},o)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-ocean"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:o,onChange:d=>m(d.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},Se.map(d=>React.createElement("option",{key:d,value:d},d))),React.createElement("input",{type:"text",value:p,onChange:d=>f(d.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>s(e.id,o,p),className:"px-4 py-2 bg-ocean text-white rounded-lg text-sm"},"Save review"))))},Pe=({initiative:e,onSubmit:s})=>{const[o,m]=v(""),[p,f]=v(""),[d,u]=v(""),[a,w]=v(""),[S,A]=v(""),[P,L]=v(e.progress||0),[j,M]=v("");return React.createElement("form",{onSubmit:n=>{n.preventDefault();const i={id:ie(),date:new Date().toISOString(),author:o,summary:p,details:d,blockers:a,nextSteps:S,progress:Number(P)||0,links:j,reviewStatus:"Pending",reviewNotes:""};s(i),m(""),f(""),u(""),w(""),A(""),L(e.progress||0),M("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:o,onChange:n=>m(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:p,onChange:n=>f(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:d,onChange:n=>u(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:a,onChange:n=>w(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:S,onChange:n=>A(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:P,onChange:n=>L(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},de.map(n=>React.createElement("option",{key:n,value:n},n,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:j,onChange:n=>M(n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Le=({initiative:e,onSave:s,onCancel:o,isSaving:m})=>{const[p,f]=v(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||le[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),d=(a,w)=>{f(S=>b(h({},S),{[a]:w}))};return React.createElement("form",{onSubmit:a=>{a.preventDefault();const w=b(h(h({},e),p),{progress:Number(p.progress)||0,updates:(e==null?void 0:e.updates)||[]});s(w)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:p.title,onChange:a=>d("title",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:p.focusArea,onChange:a=>d("focusArea",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),Y.map(a=>React.createElement("option",{key:a,value:a},a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:p.owner,onChange:a=>d("owner",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:p.description,onChange:a=>d("description",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:p.coChampions,onChange:a=>d("coChampions",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:p.status,onChange:a=>d("status",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},le.map(a=>React.createElement("option",{key:a,value:a},a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:p.progress,onChange:a=>d("progress",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},de.map(a=>React.createElement("option",{key:a,value:a},a,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:p.targetDate,onChange:a=>d("targetDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:p.successMetrics,onChange:a=>d("successMetrics",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:p.threeYearVision,onChange:a=>d("threeYearVision",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:p.annualGoals,onChange:a=>d("annualGoals",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:p.notes,onChange:a=>d("notes",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:m,className:"px-5 py-2 bg-ocean text-white rounded-lg"},m?"Saving...":"Save initiative")))},Me=()=>{const[e,s]=v({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportAreas:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},crossHelp:"",nextPriorities:["","",""],decisionsNeeded:"",strategicAlignment:"",review:{assessment:"",actions:"",followUps:"",reviewDate:"",leadSignature:"",championSignature:""},finalTallyOverview:""}),[o,m]=v(!1),[p,f]=v(!1),[d,u]=v([]),a=(t,n)=>{s(i=>b(h({},i),{[t]:n}))},w=(t,n,i)=>{s(D=>{const F=D.goals.map((E,I)=>I===t?b(h({},E),{[n]:i}):E);return b(h({},D),{goals:F})})},S=(t,n)=>{s(i=>b(h({},i),{challenges:b(h({},i.challenges),{[t]:n})}))},A=(t,n)=>{s(i=>b(h({},i),{supportTypes:b(h({},i.supportTypes),{[t]:n})}))},P=(t,n)=>{s(i=>{const D=i.nextPriorities.map((F,E)=>E===t?n:F);return b(h({},i),{nextPriorities:D})})},L=(t,n)=>{s(i=>b(h({},i),{review:b(h({},i.review),{[t]:n})}))},j=async t=>{t.preventDefault(),f(!0);try{await x.submitQuarterlyUpdate(b(h({},e),{uploadedFiles:d})),alert("Quarterly update submitted.")}catch(n){console.error("Quarterly update submit failed:",n),alert("Submission failed. Please try again.")}f(!1)},M=async t=>{const n=Array.from(t.target.files||[]);if(n.length){m(!0);try{const i=await Promise.all(n.map(D=>new Promise((F,E)=>{const I=new FileReader;I.onload=async()=>{const G=String(I.result||"").split(",")[1]||"";try{const Q=await x.uploadFile({filename:D.name,mimeType:D.type,data:G});F(Q)}catch(Q){E(Q)}},I.onerror=E,I.readAsDataURL(D)})));u(D=>[...D,...i])}catch(i){console.error("Failed to upload files:",i),alert("Failed to upload files. Please try again.")}m(!1),t.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:j,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:e.focusArea,onChange:t=>a("focusArea",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select area"),z.map(t=>React.createElement("option",{key:t.label,value:t.label},t.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:e.quarter,onChange:t=>a("quarter",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Final"].map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:e.year,onChange:t=>a("year",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:e.submittedDate,onChange:t=>a("submittedDate",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus this quarter"),React.createElement("textarea",{value:e.primaryFocus,onChange:t=>a("primaryFocus",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly goals and status"),React.createElement("div",{className:"mt-3 space-y-4"},e.goals.map((t,n)=>React.createElement("div",{key:n,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:t.goal,onChange:i=>w(n,"goal",i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${n+1}`}),React.createElement("select",{value:t.status,onChange:i=>w(n,"status",i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(i=>React.createElement("option",{key:i,value:i},i))),React.createElement("input",{type:"text",value:t.summary,onChange:i=>w(n,"summary",i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("textarea",{value:e.wins,onChange:t=>a("wins",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."})),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.capacity,onChange:t=>S("capacity",t.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.budget,onChange:t=>S("budget",t.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.scheduling,onChange:t=>S("scheduling",t.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.coordination,onChange:t=>S("coordination",t.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.external,onChange:t=>S("external",t.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.other,onChange:t=>S("other",t.target.checked)}),"Other")),e.challenges.other&&React.createElement("input",{type:"text",value:e.challenges.otherText,onChange:t=>S("otherText",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:e.challenges.details,onChange:t=>S("details",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed to stay on track"),React.createElement("textarea",{value:e.supportNeeded,onChange:t=>a("supportNeeded",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."})),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas that could assist"),React.createElement("input",{type:"text",value:e.supportAreas,onChange:t=>a("supportAreas",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other focus areas"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.staff,onChange:t=>A("staff",t.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.marketing,onChange:t=>A("marketing",t.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.board,onChange:t=>A("board",t.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.funding,onChange:t=>A("funding",t.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.facilities,onChange:t=>A("facilities",t.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.other,onChange:t=>A("other",t.target.checked)}),"Other")),e.supportTypes.other&&React.createElement("input",{type:"text",value:e.supportTypes.otherText,onChange:t=>A("otherText",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas this team can help"),React.createElement("textarea",{value:e.crossHelp,onChange:t=>a("crossHelp",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Expertise, capacity, collaboration opportunities."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Top 3 priorities for next quarter"),React.createElement("div",{className:"mt-3 space-y-2"},e.nextPriorities.map((t,n)=>React.createElement("input",{key:n,type:"text",value:t,onChange:i=>P(n,i.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${n+1}.`})))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions or approvals needed"),React.createElement("textarea",{value:e.decisionsNeeded,onChange:t=>a("decisionsNeeded",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Strategic alignment"),React.createElement("textarea",{value:e.strategicAlignment,onChange:t=>a("strategicAlignment",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"How this work supports broader goals."})),e.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:e.finalTallyOverview,onChange:t=>a("finalTallyOverview",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"border-t border-stone-200 pt-6"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly documents"),React.createElement("p",{className:"text-sm text-stone-600 mt-1"},"Upload supporting files to keep everything in one place."),React.createElement("div",{className:"mt-4"},React.createElement("input",{type:"file",multiple:!0,onChange:M,className:"block w-full text-sm text-stone-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-stone-100 file:text-stone-700 hover:file:bg-stone-200"}),o&&React.createElement("div",{className:"text-sm text-steel mt-2"},"Uploading files..."),d.length>0&&React.createElement("div",{className:"mt-3 space-y-2 text-sm"},d.map(t=>React.createElement("a",{key:t.id,href:t.url,target:"_blank",rel:"noreferrer",className:"block text-ocean underline"},t.name))))),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-ocean text-white rounded-lg",disabled:p},p?"Submitting...":"Submit quarterly update")))))},je=({initiatives:e,metrics:s})=>{const[o,m]=v(null),p=e.length?Math.round(e.reduce((u,a)=>u+(Number(a.progress)||0),0)/e.length):0,f=Y.map(u=>({focusArea:u,count:e.filter(a=>a.focusArea===u).length})),d=Y.map(u=>{const a=e.find(w=>w.focusArea===u&&w.threeYearVision);return{focusArea:u,vision:(a==null?void 0:a.threeYearVision)||"Add a three-year vision for this focus area."}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-ocean"},React.createElement(Ee,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To restore North Star House as a cultural gathering center, bringing the magic of the arts, theater, literature, history and music to generations of children, youth, and adults as well as providing a unique environment that nourishes the creative spirit."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"},"Vision: [Add your vision statement here]"),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Overall progress"),React.createElement("span",null,p,"%")),React.createElement(pe,{value:p}))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:q(s==null?void 0:s.volunteersCount)},{label:"Events booked",value:q(s==null?void 0:s.eventsCount)},{label:"Donation total",value:Ae(s==null?void 0:s.donationsTotal)},{label:"Sponsors",value:q(s==null?void 0:s.sponsorsCount)}].map(u=>React.createElement("div",{key:u.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},u.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},d.map(u=>React.createElement("div",{key:u.focusArea,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},u.focusArea),React.createElement("p",{className:"text-sm text-stone-700 mt-2"},u.vision))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly focus"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"Tap to expand")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},["Q1","Q2","Q3","Final"].map(u=>{const a=o===u;return React.createElement("div",{key:u,className:"bg-white rounded-2xl border border-stone-100 card-shadow"},React.createElement("button",{type:"button",onClick:()=>m(a?null:u),className:"w-full flex items-center justify-between px-5 py-4 text-left"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("div",{className:"font-display text-xl text-ink"},u)),React.createElement("span",{className:"text-sm text-ocean"},a?"Close":"Open")),a&&React.createElement("div",{className:"px-5 pb-5 text-sm text-stone-700"},"Add quarterly priorities, milestones, and key outcomes here."))}))))};const Re=({initiative:e,onBack:s,onEdit:o,onSubmitUpdate:m,onReviewUpdate:p})=>{const f=De(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:s,className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ce,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(Oe,{status:e.status}),React.createElement("button",{onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(pe,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(Pe,{initiative:e,onSubmit:d=>m(e,d)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},f.length," updates")),f.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},f.map(d=>React.createElement(Ue,{key:d.id,update:d,onReviewSave:(u,a,w)=>p(e,u,a,w)})))))},Be=()=>{const[e,s]=v([]),[o,m]=v("dashboard"),[p,f]=v(null),[d,u]=v(null),[a,w]=v(!0),[S,A]=v(!1),[P,L]=v(!1),[j,M]=v({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[t,n]=v({Construction:null,Grounds:null,Interiors:null,Docents:null,"Fund Development":null,"Organizational Development":null,Venue:null}),[i,D]=v([]),F=z.reduce((r,c)=>(r[c.key]={label:c.label,key:c.sheet},r),{}),E=te(()=>e.find(r=>r.id===p)||null,[e,p]),I=te(()=>e.find(r=>r.id===d)||null,[e,d]);Ne(()=>{G()},[]);const G=async({useCache:r=!0}={})=>{var J,Z;if(!H){const R=$();s(((R==null?void 0:R.objects)||[]).map(U)),L(!1),w(!1);return}const c=r?$():null,y=c&&Date.now()-c.updatedAt<ke,l=r?V(se):null,N=r?V(ae):null,C=r?V(re):null;(J=c==null?void 0:c.objects)!=null&&J.length?(s(c.objects.map(U)),L(x.isConfigured()),w(!1)):w(!0),l&&M(l),N&&n(N),C&&D(C);try{const K=(await x.fetchAll()||[]).map(U);s(K),L(x.isConfigured()),B(K)}catch(R){console.error("Failed to load data:",R),(Z=c==null?void 0:c.objects)!=null&&Z.length||s(W.map(U))}w(!1);const k=await x.fetchMetrics();k&&(M(k),_(se,k));const g=await x.fetchSectionSnapshots();g&&(n(g),_(ae,g));const T=await x.fetchQuarterlyUpdates();T.length&&(D(T),_(re,T))},Q=r=>{f(r),m("detail"),window.scrollTo(0,0)},Ge=()=>{u(null),m("add"),window.scrollTo(0,0)},ue=r=>{u(r.id),m("edit"),window.scrollTo(0,0)},me=async r=>{A(!0);try{if(I){const c=await x.update(b(h({},r),{updates:r.updates||[]}));s(y=>{const l=y.map(N=>N.id===c.id?U(c):N);return B(l),l}),f(c.id),m("detail")}else{const c=await x.create(b(h({},r),{id:r.id||ie(),updates:r.updates||[]}));s(y=>{const l=[...y,U(c)];return B(l),l}),f(c.id),m("detail")}}catch(c){console.error("Failed to save initiative:",c),alert("Failed to save. Please try again.")}A(!1)},ge=async(r,c)=>{const y=[c,...r.updates||[]],l=b(h({},r),{updates:y,progress:c.progress,lastUpdateAt:c.date});try{await x.update(l),s(N=>{const C=N.map(k=>k.id===r.id?U(l):k);return B(C),C})}catch(N){console.error("Failed to submit update:",N),alert("Failed to submit update. Please try again.")}},xe=async(r,c,y,l)=>{const N=(r.updates||[]).map(k=>k.id===c?b(h({},k),{reviewStatus:y,reviewNotes:l}):k),C=b(h({},r),{updates:N});try{await x.update(C),s(k=>{const g=k.map(T=>T.id===r.id?U(C):T);return B(g),g})}catch(k){console.error("Failed to save review:",k),alert("Failed to save review. Please try again.")}},ve=o==="detail"&&E;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(Ie,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{m("dashboard"),f(null)},className:`px-3 py-2 rounded-lg ${o==="dashboard"?"bg-stone-100":""}`},"Overview"),React.createElement("button",{onClick:()=>{m("quarterly"),f(null)},className:`px-3 py-2 rounded-lg ${o==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${P?"text-emerald-600":"text-steel"}`},P?"Synced":"Local"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},z.map(r=>React.createElement("button",{key:r.key,onClick:()=>{m(r.key),f(null)},className:`tab-button text-sm ${o===r.key?"active":""}`},r.label)))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},a?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,o==="dashboard"&&React.createElement(je,{initiatives:e,metrics:j}),o==="quarterly"&&React.createElement(Me,null),["construction","grounds","interiors","docents","fund","org","venue"].includes(o)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h2",{className:"font-display text-3xl text-ink"},F[o].label),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const r=t[F[o].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(r==null?void 0:r.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},(r==null?void 0:r.budget)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(r==null?void 0:r.volunteers)||"N/A")))})())),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},["Q1","Q2","Q3"].map(r=>{var N,C,k;const c=F[o].label,l=((N=i.filter(g=>g.focusArea===c&&g.quarter===r).sort((g,T)=>new Date(T.submittedDate||T.createdAt)-new Date(g.submittedDate||g.createdAt))[0])==null?void 0:N.payload)||null;return React.createElement("div",{key:r,className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},r),React.createElement("div",{className:"text-xs text-steel"},(l==null?void 0:l.submittedDate)||"No submission yet")),l?React.createElement("div",{className:"mt-3 space-y-3 text-sm text-stone-700"},l.primaryFocus&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("div",null,l.primaryFocus)),(l.goals||[]).some(g=>g.goal||g.summary||g.status)&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"space-y-1"},(l.goals||[]).map((g,T)=>React.createElement("div",{key:T},React.createElement("strong",null,g.goal||`Goal ${T+1}`),g.status?` \u2014 ${g.status}`:"",g.summary?` (${g.summary})`:"")))),l.wins&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",null,l.wins)),((C=l.challenges)==null?void 0:C.details)&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",null,l.challenges.details)),l.supportNeeded&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",null,l.supportNeeded)),(l.nextPriorities||[]).filter(Boolean).length>0&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next priorities"),React.createElement("div",null,(l.nextPriorities||[]).filter(Boolean).join(", "))),l.decisionsNeeded&&React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions needed"),React.createElement("div",null,l.decisionsNeeded)),!l.primaryFocus&&!(l.goals||[]).some(g=>g.goal||g.summary||g.status)&&!l.wins&&!((k=l.challenges)!=null&&k.details)&&!l.supportNeeded&&(l.nextPriorities||[]).filter(Boolean).length===0&&!l.decisionsNeeded&&React.createElement("div",{className:"text-sm text-stone-600"},"No details submitted yet.")):React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No quarterly update submitted yet."))})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},["Q1","Q2","Q3"].map(r=>{var N;const c=F[o].label,y=i.find(C=>C.focusArea===c&&C.quarter===r),l=((N=y==null?void 0:y.payload)==null?void 0:N.review)||null;return React.createElement("div",{key:r,className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},r," review"),l?React.createElement("div",{className:"mt-3 space-y-2 text-sm text-stone-700"},React.createElement("div",null,React.createElement("strong",null,"Assessment:")," ",l.assessment||"Not provided"),React.createElement("div",null,React.createElement("strong",null,"Actions:")," ",l.actions||"Not provided"),React.createElement("div",null,React.createElement("strong",null,"Follow-ups:")," ",l.followUps||"Not provided"),React.createElement("div",null,React.createElement("strong",null,"Review date:")," ",l.reviewDate||"Not provided"),React.createElement("div",null,React.createElement("strong",null,"Lead sign-off:")," ",l.leadSignature||"Not provided"),React.createElement("div",null,React.createElement("strong",null,"Co-champion:")," ",l.championSignature||"Not provided")):React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No review submitted yet."))})),React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("div",{className:"mt-3 text-sm text-stone-700"},(()=>{var y;const r=F[o].label,c=i.find(l=>l.focusArea===r&&l.quarter==="Final");return((y=c==null?void 0:c.payload)==null?void 0:y.finalTallyOverview)||"No final tally submitted yet."})()))),ve&&React.createElement(Re,{initiative:E,onBack:()=>m("list"),onEdit:()=>ue(E),onSubmitUpdate:ge,onReviewUpdate:xe}),(o==="add"||o==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>m(I?"detail":"list"),className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ce,{size:18})," Cancel"),React.createElement(Le,{initiative:I,onSave:me,onCancel:()=>m(I?"detail":"list"),isSaving:S})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},Qe=ReactDOM.createRoot(document.getElementById("root"));Qe.render(React.createElement(Be,null));})();
