(()=>{var ae=Object.defineProperty,se=Object.defineProperties;var re=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var W=(e,a,l)=>a in e?ae(e,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[a]=l,b=(e,a)=>{for(var l in a||(a={}))le.call(a,l)&&W(e,l,a[l]);if($)for(var l of $(a))oe.call(a,l)&&W(e,l,a[l]);return e},f=(e,a)=>se(e,re(a));const{useState:x,useEffect:ne,useMemo:G}=React,J="nsh-strategy-cache-v1",de=300*1e3,V=()=>{try{const e=localStorage.getItem(J);if(!e)return null;const a=JSON.parse(e);return!a||!Array.isArray(a.objects)?null:a}catch(e){return console.warn("Failed to read cache:",e),null}},L=e=>{try{localStorage.setItem(J,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(a){console.warn("Failed to write cache:",a)}},Q=!0,M="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",z=M,P=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],_=["Not started","On track","At risk","Behind","Complete"],ce=["Pending","Reviewed","Needs info"],Z=Array.from({length:11},(e,a)=>a*10),q=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"A consistent community-informed events calendar with sustained attendance growth.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"Succession plan is routine, leadership bench is stable and supported.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"}],w={isConfigured:()=>Q&&M&&M.length>0,postJson:async(e,a)=>{const l=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(a)});if(!l.ok)throw new Error("Request failed");return l.json()},fetchAll:async()=>{if(!Q){const e=V();return(e==null?void 0:e.objects)||[]}if(!w.isConfigured())return console.log("Google Sheets not configured, using sample data"),q;try{const e=await fetch(`${M}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),q}},create:async e=>{if(!w.isConfigured())return console.log("Google Sheets not configured, saving locally only"),f(b({},e),{id:Date.now().toString()});try{return(await w.postJson(M,{action:"create",object:e})).result||f(b({},e),{id:Date.now().toString()})}catch(a){return console.error("Error creating in Google Sheets:",a),f(b({},e),{id:Date.now().toString()})}},update:async e=>{if(!w.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await w.postJson(M,{action:"update",object:e}),e}catch(a){return console.error("Error updating from Google Sheets:",a),e}},delete:async e=>{if(!w.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await w.postJson(M,{action:"delete",id:e}),!0}catch(a){return console.error("Error deleting from Google Sheets:",a),!1}},uploadFile:async({filename:e,mimeType:a,data:l})=>{if(!z)throw new Error("Drive upload not configured");const p={action:"uploadImage",filename:e,mimeType:a,data:l},n=await w.postJson(z,p);if(!n.success)throw new Error(n.error||"Upload failed");return n.result},fetchMetrics:async()=>{if(!w.isConfigured())return null;try{const e=await fetch(`${M}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}}},K=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,X=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(a){return e}},B=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),ie=e=>{if(e==null)return"N/A";const a=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a)},U=e=>f(b({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),pe=e=>e.slice().sort((a,l)=>new Date(l.date)-new Date(a.date)),ue=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-ocean text-white border-ocean";default:return"bg-stone-100 text-stone-600 border-stone-200"}},me=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},ge=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const xe=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"})),he=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 5v14"}),React.createElement("path",{d:"M5 12h14"}));const ee=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"})),ve=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M3 12a9 9 0 0 1 15.3-6.3"}),React.createElement("path",{d:"M21 12a9 9 0 0 1-15.3 6.3"}),React.createElement("path",{d:"M18 6v4h-4"}),React.createElement("path",{d:"M6 18v-4h4"})),H=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),te=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${ue(e)}`},e);const be=({initiative:e,onSelect:a})=>React.createElement("button",{onClick:a,className:"text-left bg-white rounded-2xl border border-stone-100 p-5 card-shadow hover:-translate-y-0.5 transition-transform"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h3",{className:"font-display text-xl text-ink mt-1"},e.title)),React.createElement(te,{status:e.status})),React.createElement("p",{className:"text-sm text-stone-600 mt-3"},e.description),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,Math.round(e.progress),"% complete"),React.createElement("span",null,"Target: ",e.targetDate||"TBD")),React.createElement(H,{value:e.progress})),React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mt-4"},React.createElement("span",null,"Goal lead: ",e.owner||"Unassigned"),React.createElement("span",null,"Last update: ",X(e.lastUpdateAt)))),fe=({update:e,onReviewSave:a})=>{const[l,p]=x(e.reviewStatus||"Pending"),[n,g]=x(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},X(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${me(l)}`},l)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-ocean"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:l,onChange:r=>p(r.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},ce.map(r=>React.createElement("option",{key:r,value:r},r))),React.createElement("input",{type:"text",value:n,onChange:r=>g(r.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>a(e.id,l,n),className:"px-4 py-2 bg-ocean text-white rounded-lg text-sm"},"Save review"))))},we=({initiative:e,onSubmit:a})=>{const[l,p]=x(""),[n,g]=x(""),[r,o]=x(""),[s,u]=x(""),[S,y]=x(""),[i,A]=x(e.progress||0),[t,m]=x("");return React.createElement("form",{onSubmit:c=>{c.preventDefault();const T={id:K(),date:new Date().toISOString(),author:l,summary:n,details:r,blockers:s,nextSteps:S,progress:Number(i)||0,links:t,reviewStatus:"Pending",reviewNotes:""};a(T),p(""),g(""),o(""),u(""),y(""),A(e.progress||0),m("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:l,onChange:c=>p(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:n,onChange:c=>g(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:r,onChange:c=>o(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:s,onChange:c=>u(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:S,onChange:c=>y(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:i,onChange:c=>A(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Z.map(c=>React.createElement("option",{key:c,value:c},c,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:t,onChange:c=>m(c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Ne=({initiative:e,onSave:a,onCancel:l,isSaving:p})=>{const[n,g]=x(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||_[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),r=(s,u)=>{g(S=>f(b({},S),{[s]:u}))};return React.createElement("form",{onSubmit:s=>{s.preventDefault();const u=f(b(b({},e),n),{progress:Number(n.progress)||0,updates:(e==null?void 0:e.updates)||[]});a(u)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:n.title,onChange:s=>r("title",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:n.focusArea,onChange:s=>r("focusArea",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),P.map(s=>React.createElement("option",{key:s,value:s},s)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:n.owner,onChange:s=>r("owner",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:n.description,onChange:s=>r("description",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:n.coChampions,onChange:s=>r("coChampions",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:n.status,onChange:s=>r("status",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},_.map(s=>React.createElement("option",{key:s,value:s},s)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:n.progress,onChange:s=>r("progress",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Z.map(s=>React.createElement("option",{key:s,value:s},s,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:n.targetDate,onChange:s=>r("targetDate",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:n.successMetrics,onChange:s=>r("successMetrics",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:n.threeYearVision,onChange:s=>r("threeYearVision",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:n.annualGoals,onChange:s=>r("annualGoals",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:n.notes,onChange:s=>r("notes",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:l,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-ocean text-white rounded-lg"},p?"Saving...":"Save initiative")))},ye=()=>{const[e,a]=x({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportAreas:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},crossHelp:"",nextPriorities:["","",""],decisionsNeeded:"",strategicAlignment:"",review:{assessment:"",actions:"",followUps:"",reviewDate:"",leadSignature:"",championSignature:""}}),[l,p]=x(!1),[n,g]=x([]),r=(t,m)=>{a(d=>f(b({},d),{[t]:m}))},o=(t,m,d)=>{a(c=>{const T=c.goals.map((D,I)=>I===t?f(b({},D),{[m]:d}):D);return f(b({},c),{goals:T})})},s=(t,m)=>{a(d=>f(b({},d),{challenges:f(b({},d.challenges),{[t]:m})}))},u=(t,m)=>{a(d=>f(b({},d),{supportTypes:f(b({},d.supportTypes),{[t]:m})}))},S=(t,m)=>{a(d=>{const c=d.nextPriorities.map((T,D)=>D===t?m:T);return f(b({},d),{nextPriorities:c})})},y=(t,m)=>{a(d=>f(b({},d),{review:f(b({},d.review),{[t]:m})}))},i=t=>{t.preventDefault(),alert("Quarterly update submitted.")},A=async t=>{const m=Array.from(t.target.files||[]);if(m.length){p(!0);try{const d=await Promise.all(m.map(c=>new Promise((T,D)=>{const I=new FileReader;I.onload=async()=>{const R=String(I.result||"").split(",")[1]||"";try{const j=await w.uploadFile({filename:c.name,mimeType:c.type,data:R});T(j)}catch(j){D(j)}},I.onerror=D,I.readAsDataURL(c)})));g(c=>[...c,...d])}catch(d){console.error("Failed to upload files:",d),alert("Failed to upload files. Please try again.")}p(!1),t.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:i,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:e.focusArea,onChange:t=>r("focusArea",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select area"),P.map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:e.quarter,onChange:t=>r("quarter",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Q4"].map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:e.year,onChange:t=>r("year",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:e.submittedDate,onChange:t=>r("submittedDate",t.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus this quarter"),React.createElement("textarea",{value:e.primaryFocus,onChange:t=>r("primaryFocus",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly goals and status"),React.createElement("div",{className:"mt-3 space-y-4"},e.goals.map((t,m)=>React.createElement("div",{key:m,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:t.goal,onChange:d=>o(m,"goal",d.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${m+1}`}),React.createElement("select",{value:t.status,onChange:d=>o(m,"status",d.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(d=>React.createElement("option",{key:d,value:d},d))),React.createElement("input",{type:"text",value:t.summary,onChange:d=>o(m,"summary",d.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("textarea",{value:e.wins,onChange:t=>r("wins",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."})),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.capacity,onChange:t=>s("capacity",t.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.budget,onChange:t=>s("budget",t.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.scheduling,onChange:t=>s("scheduling",t.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.coordination,onChange:t=>s("coordination",t.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.external,onChange:t=>s("external",t.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.other,onChange:t=>s("other",t.target.checked)}),"Other")),e.challenges.other&&React.createElement("input",{type:"text",value:e.challenges.otherText,onChange:t=>s("otherText",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:e.challenges.details,onChange:t=>s("details",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed to stay on track"),React.createElement("textarea",{value:e.supportNeeded,onChange:t=>r("supportNeeded",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."})),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas that could assist"),React.createElement("input",{type:"text",value:e.supportAreas,onChange:t=>r("supportAreas",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other focus areas"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.staff,onChange:t=>u("staff",t.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.marketing,onChange:t=>u("marketing",t.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.board,onChange:t=>u("board",t.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.funding,onChange:t=>u("funding",t.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.facilities,onChange:t=>u("facilities",t.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.other,onChange:t=>u("other",t.target.checked)}),"Other")),e.supportTypes.other&&React.createElement("input",{type:"text",value:e.supportTypes.otherText,onChange:t=>u("otherText",t.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas this team can help"),React.createElement("textarea",{value:e.crossHelp,onChange:t=>r("crossHelp",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Expertise, capacity, collaboration opportunities."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Top 3 priorities for next quarter"),React.createElement("div",{className:"mt-3 space-y-2"},e.nextPriorities.map((t,m)=>React.createElement("input",{key:m,type:"text",value:t,onChange:d=>S(m,d.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${m+1}.`})))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions or approvals needed"),React.createElement("textarea",{value:e.decisionsNeeded,onChange:t=>r("decisionsNeeded",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Strategic alignment"),React.createElement("textarea",{value:e.strategicAlignment,onChange:t=>r("strategicAlignment",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"How this work supports broader goals."})),React.createElement("div",{className:"border-t border-stone-200 pt-6"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Co-champion review"),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Overall assessment"),React.createElement("select",{value:e.review.assessment,onChange:t=>y("assessment",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select"),["On Track","Needs Attention","Major Adjustment Needed"].map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review date"),React.createElement("input",{type:"date",value:e.review.reviewDate,onChange:t=>y("reviewDate",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Agreed-upon actions"),React.createElement("textarea",{value:e.review.actions,onChange:t=>y("actions",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Assigned follow-ups and owners"),React.createElement("textarea",{value:e.review.followUps,onChange:t=>y("followUps",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area lead signature"),React.createElement("input",{type:"text",value:e.review.leadSignature,onChange:t=>y("leadSignature",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion signature"),React.createElement("input",{type:"text",value:e.review.championSignature,onChange:t=>y("championSignature",t.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name"})))),React.createElement("div",{className:"border-t border-stone-200 pt-6"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly documents"),React.createElement("p",{className:"text-sm text-stone-600 mt-1"},"Upload supporting files to keep everything in one place."),React.createElement("div",{className:"mt-4"},React.createElement("input",{type:"file",multiple:!0,onChange:A,className:"block w-full text-sm text-stone-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-stone-100 file:text-stone-700 hover:file:bg-stone-200"}),l&&React.createElement("div",{className:"text-sm text-steel mt-2"},"Uploading files..."),n.length>0&&React.createElement("div",{className:"mt-3 space-y-2 text-sm"},n.map(t=>React.createElement("a",{key:t.id,href:t.url,target:"_blank",rel:"noreferrer",className:"block text-ocean underline"},t.name))))),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-ocean text-white rounded-lg"},"Submit quarterly update")))))},ke=({initiatives:e,metrics:a})=>{const[l,p]=x(null),n=e.length?Math.round(e.reduce((o,s)=>o+(Number(s.progress)||0),0)/e.length):0,g=P.map(o=>({focusArea:o,count:e.filter(s=>s.focusArea===o).length})),r=P.map(o=>{const s=e.find(u=>u.focusArea===o&&u.threeYearVision);return{focusArea:o,vision:(s==null?void 0:s.threeYearVision)||"Add a three-year vision for this focus area."}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-ocean"},React.createElement(ge,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-3xl md:text-4xl text-ink mt-4"},"Mission: To restore North Star House as a cultural gathering center, bringing the magic of the arts, theater, literature, history and music to generations of children, youth, and adults as well as providing a unique environment that nourishes the creative spirit."),React.createElement("p",{className:"text-stone-600 mt-3"},"Vision: [Add your vision statement here]"),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Overall progress"),React.createElement("span",null,n,"%")),React.createElement(H,{value:n}))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:B(a==null?void 0:a.volunteersCount)},{label:"Events booked",value:B(a==null?void 0:a.eventsCount)},{label:"Donation total",value:ie(a==null?void 0:a.donationsTotal)},{label:"Sponsors",value:B(a==null?void 0:a.sponsorsCount)}].map(o=>React.createElement("div",{key:o.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},o.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},o.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},r.map(o=>React.createElement("div",{key:o.focusArea,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},o.focusArea),React.createElement("p",{className:"text-sm text-stone-700 mt-2"},o.vision))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly focus"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"Tap to expand")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},["Q1","Q2","Q3","Q4"].map(o=>{const s=l===o;return React.createElement("div",{key:o,className:"bg-white rounded-2xl border border-stone-100 card-shadow"},React.createElement("button",{type:"button",onClick:()=>p(s?null:o),className:"w-full flex items-center justify-between px-5 py-4 text-left"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("div",{className:"font-display text-xl text-ink"},o)),React.createElement("span",{className:"text-sm text-ocean"},s?"Close":"Open")),s&&React.createElement("div",{className:"px-5 pb-5 text-sm text-stone-700"},"Add quarterly priorities, milestones, and key outcomes here."))}))))},Ce=({initiatives:e,onSelect:a,onAdd:l,onRefresh:p,isLoading:n})=>{const[g,r]=x(""),[o,s]=x(""),[u,S]=x(""),y=G(()=>e.filter(i=>{const A=[i.title,i.description,i.owner,i.coChampions,i.focusArea,i.status].join(" ").toLowerCase();return!(g&&!A.includes(g.toLowerCase())||o&&i.focusArea!==o||u&&i.status!==u)}),[e,g,o,u]);return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Strategic initiatives"),React.createElement("p",{className:"text-stone-600"},"Browse progress, submit updates, and review action items.")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:p,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:n},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(ve,{size:16})," Refresh")),React.createElement("button",{onClick:l,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},React.createElement("span",{className:"inline-flex items-center gap-2"},React.createElement(he,{size:16})," Add initiative")))),React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-4 card-shadow mb-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3"},React.createElement("input",{type:"text",value:g,onChange:i=>r(i.target.value),placeholder:"Search initiatives",className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("select",{value:o,onChange:i=>s(i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"All focus areas"),P.map(i=>React.createElement("option",{key:i,value:i},i))),React.createElement("select",{value:u,onChange:i=>S(i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"All statuses"),_.map(i=>React.createElement("option",{key:i,value:i},i))))),y.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"No initiatives found. Adjust filters or add a new initiative."):React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5"},y.map(i=>React.createElement(be,{key:i.id,initiative:i,onSelect:()=>a(i.id)}))))},Se=({initiative:e,onBack:a,onEdit:l,onSubmitUpdate:p,onReviewUpdate:n})=>{const g=pe(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:a,className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ee,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(te,{status:e.status}),React.createElement("button",{onClick:l,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(H,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(we,{initiative:e,onSubmit:r=>p(e,r)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},g.length," updates")),g.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},g.map(r=>React.createElement(fe,{key:r.id,update:r,onReviewSave:(o,s,u)=>n(e,o,s,u)})))))},Ae=()=>{const[e,a]=x([]),[l,p]=x("dashboard"),[n,g]=x(null),[r,o]=x(null),[s,u]=x(!0),[S,y]=x(!1),[i,A]=x(!1),[t,m]=x({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),d=G(()=>e.find(v=>v.id===n)||null,[e,n]),c=G(()=>e.find(v=>v.id===r)||null,[e,r]);ne(()=>{T()},[]);const T=async({useCache:v=!0}={})=>{var C,E;if(!Q){const N=V();a(((N==null?void 0:N.objects)||[]).map(U)),A(!1),u(!1);return}const h=v?V():null,F=h&&Date.now()-h.updatedAt<de;(C=h==null?void 0:h.objects)!=null&&C.length?(a(h.objects.map(U)),A(w.isConfigured()),u(!1)):u(!0);try{const O=(await w.fetchAll()||[]).map(U);a(O),A(w.isConfigured()),L(O)}catch(N){console.error("Failed to load data:",N),(E=h==null?void 0:h.objects)!=null&&E.length||a(q.map(U))}u(!1);const k=await w.fetchMetrics();k&&m(k)},D=v=>{g(v),p("detail"),window.scrollTo(0,0)},I=()=>{o(null),p("add"),window.scrollTo(0,0)},R=v=>{o(v.id),p("edit"),window.scrollTo(0,0)};return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(xe,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm"},React.createElement("button",{onClick:()=>{p("dashboard"),g(null)},className:`px-3 py-2 rounded-lg ${l==="dashboard"?"bg-stone-100":""}`},"Dashboard"),React.createElement("button",{onClick:()=>{p("list"),g(null)},className:`px-3 py-2 rounded-lg ${l==="list"?"bg-stone-100":""}`},"Initiatives"),React.createElement("button",{onClick:()=>{p("quarterly"),g(null)},className:`px-3 py-2 rounded-lg ${l==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${i?"text-emerald-600":"text-steel"}`},i?"Synced":"Local"))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},s?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,l==="dashboard"&&React.createElement(ke,{initiatives:e,metrics:t}),l==="quarterly"&&React.createElement(ye,null),l==="list"&&React.createElement(Ce,{initiatives:e,onSelect:D,onAdd:I,onRefresh:()=>T({useCache:!1}),isLoading:s}),l==="detail"&&d&&React.createElement(Se,{initiative:d,onBack:()=>p("list"),onEdit:()=>R(d),onSubmitUpdate:async(v,h)=>{const F=[h,...v.updates||[]],k=f(b({},v),{updates:F,progress:h.progress,lastUpdateAt:h.date});try{await w.update(k),a(C=>{const E=C.map(N=>N.id===v.id?U(k):N);return L(E),E})}catch(C){console.error("Failed to submit update:",C),alert("Failed to submit update. Please try again.")}},onReviewUpdate:async(v,h,F,k)=>{const C=(v.updates||[]).map(N=>N.id===h?f(b({},N),{reviewStatus:F,reviewNotes:k}):N),E=f(b({},v),{updates:C});try{await w.update(E),a(N=>{const O=N.map(Y=>Y.id===v.id?U(E):Y);return L(O),O})}catch(N){console.error("Failed to save review:",N),alert("Failed to save review. Please try again.")}}}),(l==="add"||l==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>p(c?"detail":"list"),className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ee,{size:18})," Cancel"),React.createElement(Ne,{initiative:c,onSave:async v=>{y(!0);try{if(c){const h=await w.update(f(b({},v),{updates:v.updates||[]}));a(F=>{const k=F.map(C=>C.id===h.id?U(h):C);return L(k),k}),g(h.id),p("detail")}else{const h=await w.create(f(b({},v),{id:v.id||K(),updates:v.updates||[]}));a(F=>{const k=[...F,U(h)];return L(k),k}),g(h.id),p("detail")}}catch(h){console.error("Failed to save initiative:",h),alert("Failed to save. Please try again.")}y(!1)},onCancel:()=>p(c?"detail":"list"),isSaving:S})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},Te=ReactDOM.createRoot(document.getElementById("root"));Te.render(React.createElement(Ae,null));})();
