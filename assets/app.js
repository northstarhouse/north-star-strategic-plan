(()=>{var Ne=Object.defineProperty,ke=Object.defineProperties;var Ce=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var ee=(e,t,o)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))te.call(t,o)&&ee(e,o,t[o]);if(_)for(var o of _(t))ae.call(t,o)&&ee(e,o,t[o]);return e},w=(e,t)=>ke(e,Ce(t));var se=(e,t)=>{var o={};for(var p in e)te.call(e,p)&&t.indexOf(p)<0&&(o[p]=e[p]);if(e!=null&&_)for(var p of _(e))t.indexOf(p)<0&&ae.call(e,p)&&(o[p]=e[p]);return o};const{useState:y,useEffect:ce,useMemo:re}=React,pe="nsh-strategy-cache-v1",le="nsh-strategy-metrics-cache-v1",oe="nsh-strategy-sections-cache-v1",q="nsh-strategy-quarterly-cache-v1",Se=300*1e3,z=()=>{try{const e=localStorage.getItem(pe);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},B=e=>{try{localStorage.setItem(pe,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},J=!0,R="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",ne=R,W=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],Z=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fund Development",sheet:"Fund Development"},{key:"org",label:"Organizational Development",sheet:"Organizational Development"},{key:"venue",label:"Venue",sheet:"Venue"}],de=["Not started","On track","At risk","Behind","Complete"],Ae=["Pending","Reviewed","Needs info"],ue=Array.from({length:11},(e,t)=>t*10),K=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"A consistent community-informed events calendar with sustained attendance growth.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"Succession plan is routine, leadership bench is stable and supported.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"}],b={isConfigured:()=>J&&R&&R.length>0,postJson:async(e,t)=>{const o=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Request failed");return o.json()},fetchAll:async()=>{if(!J){const e=z();return(e==null?void 0:e.objects)||[]}if(!b.isConfigured())return console.log("Google Sheets not configured, using sample data"),K;try{const e=await fetch(`${R}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),K}},create:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),w(f({},e),{id:Date.now().toString()});try{return(await b.postJson(R,{action:"create",object:e})).result||w(f({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),w(f({},e),{id:Date.now().toString()})}},update:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await b.postJson(R,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await b.postJson(R,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:o})=>{if(!ne)throw new Error("Drive upload not configured");const p={action:"uploadImage",filename:e,mimeType:t,data:o},c=await b.postJson(ne,p);if(!c.success)throw new Error(c.error||"Upload failed");return c.result},fetchMetrics:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${R}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(R,{action:"submitQuarterlyUpdate",form:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},submitReviewUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson(R,{action:"submitReviewUpdate",review:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},fetchQuarterlyUpdates:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${R}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${R}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},H=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read cache:",t),null}},$=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(o){console.warn("Failed to write cache:",o)}},me=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,De=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},Y=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),Ie=e=>{if(e==null)return"N/A";const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)},ie=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},Te=(e,t=3)=>{const o=[];for(String(e||"").split(`
`).map(c=>c.trim()).filter(Boolean).forEach(c=>{const d=c.split("|").map(g=>g.trim()),[i="",m="",r=""]=d;o.push({action:i,owner:m,deadline:r})});o.length<t;)o.push({action:"",owner:"",deadline:""});return o.slice(0,t)},Fe=e=>e.map(t=>[t.action,t.owner,t.deadline].map(o=>o.trim()).join(" | ")).filter(t=>t.replace(/\|/g,"").trim()!=="").join(`
`),L=e=>w(f({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),Ee=e=>e.slice().sort((t,o)=>new Date(o.date)-new Date(t.date)),Oe=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-ocean text-white border-ocean";default:return"bg-stone-100 text-stone-600 border-stone-200"}},Re=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},Ue=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const Pe=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const ge=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const xe=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),je=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${Oe(e)}`},e);const Me=({update:e,onReviewSave:t})=>{const[o,p]=y(e.reviewStatus||"Pending"),[c,d]=y(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},De(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${Re(o)}`},o)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-ocean"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:o,onChange:i=>p(i.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},Ae.map(i=>React.createElement("option",{key:i,value:i},i))),React.createElement("input",{type:"text",value:c,onChange:i=>d(i.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,o,c),className:"px-4 py-2 bg-ocean text-white rounded-lg text-sm"},"Save review"))))},Le=({initiative:e,onSubmit:t})=>{const[o,p]=y(""),[c,d]=y(""),[i,m]=y(""),[r,g]=y(""),[S,D]=y(""),[P,U]=y(e.progress||0),[j,a]=y("");return React.createElement("form",{onSubmit:l=>{l.preventDefault();const v={id:me(),date:new Date().toISOString(),author:o,summary:c,details:i,blockers:r,nextSteps:S,progress:Number(P)||0,links:j,reviewStatus:"Pending",reviewNotes:""};t(v),p(""),d(""),m(""),g(""),D(""),U(e.progress||0),a("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:o,onChange:l=>p(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:c,onChange:l=>d(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:i,onChange:l=>m(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:r,onChange:l=>g(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:S,onChange:l=>D(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:P,onChange:l=>U(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ue.map(l=>React.createElement("option",{key:l,value:l},l,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:j,onChange:l=>a(l.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Qe=({initiative:e,onSave:t,onCancel:o,isSaving:p})=>{const[c,d]=y(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||de[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),i=(r,g)=>{d(S=>w(f({},S),{[r]:g}))};return React.createElement("form",{onSubmit:r=>{r.preventDefault();const g=w(f(f({},e),c),{progress:Number(c.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(g)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:c.title,onChange:r=>i("title",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:c.focusArea,onChange:r=>i("focusArea",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),W.map(r=>React.createElement("option",{key:r,value:r},r)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:c.owner,onChange:r=>i("owner",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:c.description,onChange:r=>i("description",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:c.coChampions,onChange:r=>i("coChampions",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:c.status,onChange:r=>i("status",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},de.map(r=>React.createElement("option",{key:r,value:r},r)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:c.progress,onChange:r=>i("progress",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},ue.map(r=>React.createElement("option",{key:r,value:r},r,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:c.targetDate,onChange:r=>i("targetDate",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:c.successMetrics,onChange:r=>i("successMetrics",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:c.threeYearVision,onChange:r=>i("threeYearVision",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:c.annualGoals,onChange:r=>i("annualGoals",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:c.notes,onChange:r=>i("notes",r.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-ocean text-white rounded-lg"},p?"Saving...":"Save initiative")))},Ge=()=>{const[e,t]=y({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportAreas:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},crossHelp:"",nextPriorities:["","",""],decisionsNeeded:"",strategicAlignment:"",finalTallyOverview:""}),[o,p]=y(!1),[c,d]=y(!1),[i,m]=y([]),r=(a,s)=>{t(l=>w(f({},l),{[a]:s}))},g=(a,s,l)=>{t(v=>{const E=v.goals.map((I,F)=>F===a?w(f({},I),{[s]:l}):I);return w(f({},v),{goals:E})})},S=(a,s)=>{t(l=>w(f({},l),{challenges:w(f({},l.challenges),{[a]:s})}))},D=(a,s)=>{t(l=>w(f({},l),{supportTypes:w(f({},l.supportTypes),{[a]:s})}))},P=(a,s)=>{t(l=>{const v=l.nextPriorities.map((E,I)=>I===a?s:E);return w(f({},l),{nextPriorities:v})})},U=async a=>{a.preventDefault(),d(!0);try{await b.submitQuarterlyUpdate(w(f({},e),{uploadedFiles:i})),alert("Quarterly update submitted.")}catch(s){console.error("Quarterly update submit failed:",s),alert("Submission failed. Please try again.")}d(!1)},j=async a=>{const s=Array.from(a.target.files||[]);if(s.length){p(!0);try{const l=await Promise.all(s.map(v=>new Promise((E,I)=>{const F=new FileReader;F.onload=async()=>{const M=String(F.result||"").split(",")[1]||"";try{const G=await b.uploadFile({filename:v.name,mimeType:v.type,data:M});E(G)}catch(G){I(G)}},F.onerror=I,F.readAsDataURL(v)})));m(v=>[...v,...l])}catch(l){console.error("Failed to upload files:",l),alert("Failed to upload files. Please try again.")}p(!1),a.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:U,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:e.focusArea,onChange:a=>r("focusArea",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select area"),Z.map(a=>React.createElement("option",{key:a.label,value:a.label},a.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:e.quarter,onChange:a=>r("quarter",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Final"].map(a=>React.createElement("option",{key:a,value:a},a)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:e.year,onChange:a=>r("year",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:e.submittedDate,onChange:a=>r("submittedDate",a.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus this quarter"),React.createElement("textarea",{value:e.primaryFocus,onChange:a=>r("primaryFocus",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarterly goals and status"),React.createElement("div",{className:"mt-3 space-y-4"},e.goals.map((a,s)=>React.createElement("div",{key:s,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:a.goal,onChange:l=>g(s,"goal",l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${s+1}`}),React.createElement("select",{value:a.status,onChange:l=>g(s,"status",l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(l=>React.createElement("option",{key:l,value:l},l))),React.createElement("input",{type:"text",value:a.summary,onChange:l=>g(s,"summary",l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("textarea",{value:e.wins,onChange:a=>r("wins",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."})),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.capacity,onChange:a=>S("capacity",a.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.budget,onChange:a=>S("budget",a.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.scheduling,onChange:a=>S("scheduling",a.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.coordination,onChange:a=>S("coordination",a.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.external,onChange:a=>S("external",a.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.challenges.other,onChange:a=>S("other",a.target.checked)}),"Other")),e.challenges.other&&React.createElement("input",{type:"text",value:e.challenges.otherText,onChange:a=>S("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:e.challenges.details,onChange:a=>S("details",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed to stay on track"),React.createElement("textarea",{value:e.supportNeeded,onChange:a=>r("supportNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."})),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas that could assist"),React.createElement("input",{type:"text",value:e.supportAreas,onChange:a=>r("supportAreas",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other focus areas"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.staff,onChange:a=>D("staff",a.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.marketing,onChange:a=>D("marketing",a.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.board,onChange:a=>D("board",a.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.funding,onChange:a=>D("funding",a.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.facilities,onChange:a=>D("facilities",a.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:e.supportTypes.other,onChange:a=>D("other",a.target.checked)}),"Other")),e.supportTypes.other&&React.createElement("input",{type:"text",value:e.supportTypes.otherText,onChange:a=>D("otherText",a.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Areas this team can help"),React.createElement("textarea",{value:e.crossHelp,onChange:a=>r("crossHelp",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Expertise, capacity, collaboration opportunities."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Top 3 priorities for next quarter"),React.createElement("div",{className:"mt-3 space-y-2"},e.nextPriorities.map((a,s)=>React.createElement("input",{key:s,type:"text",value:a,onChange:l=>P(s,l.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${s+1}.`})))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions or approvals needed"),React.createElement("textarea",{value:e.decisionsNeeded,onChange:a=>r("decisionsNeeded",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Strategic alignment"),React.createElement("textarea",{value:e.strategicAlignment,onChange:a=>r("strategicAlignment",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"How this work supports broader goals."})),e.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:e.finalTallyOverview,onChange:a=>r("finalTallyOverview",a.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"border-t border-stone-200 pt-6"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly documents"),React.createElement("p",{className:"text-sm text-stone-600 mt-1"},"Upload supporting files to keep everything in one place."),React.createElement("div",{className:"mt-4"},React.createElement("input",{type:"file",multiple:!0,onChange:j,className:"block w-full text-sm text-stone-600 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-stone-100 file:text-stone-700 hover:file:bg-stone-200"}),o&&React.createElement("div",{className:"text-sm text-steel mt-2"},"Uploading files..."),i.length>0&&React.createElement("div",{className:"mt-3 space-y-2 text-sm"},i.map(a=>React.createElement("a",{key:a.id,href:a.url,target:"_blank",rel:"noreferrer",className:"block text-ocean underline"},a.name))))),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-ocean text-white rounded-lg",disabled:c},c?"Submitting...":"Submit quarterly update")))))},Be=({areaLabel:e,quarter:t,review:o,onSave:p})=>{const c=s=>({statusAfterReview:(s==null?void 0:s.statusAfterReview)||"",actionsRows:Te(s==null?void 0:s.actionsAssigned),crossAreaImpacts:(s==null?void 0:s.crossAreaImpacts)||"",areasImpacted:(s==null?void 0:s.areasImpacted)||"",coordinationNeeded:(s==null?void 0:s.coordinationNeeded)||"",priorityConfirmation:(s==null?void 0:s.priorityConfirmation)||"",escalationFlag:(s==null?void 0:s.escalationFlag)||"",reviewCompletedOn:ie(s==null?void 0:s.reviewCompletedOn),nextCheckInDate:ie(s==null?void 0:s.nextCheckInDate)}),[d,i]=y(()=>c(o)),[m,r]=y(!1);ce(()=>{i(c(o))},[o,e,t]);const g=(s,l)=>{i(v=>w(f({},v),{[s]:l}))},S=(s,l,v)=>{i(E=>{const I=E.actionsRows.map((F,M)=>M===s?w(f({},F),{[l]:v}):F);return w(f({},E),{actionsRows:I})})},D=async()=>{r(!0);const s=d.crossAreaImpacts==="Affects another area",l={focusArea:e,quarter:t,statusAfterReview:d.statusAfterReview,actionsAssigned:Fe(d.actionsRows),crossAreaImpacts:d.crossAreaImpacts,areasImpacted:s?d.areasImpacted:"",coordinationNeeded:s?d.coordinationNeeded:"",priorityConfirmation:d.priorityConfirmation,escalationFlag:d.escalationFlag,reviewCompletedOn:d.reviewCompletedOn,nextCheckInDate:d.nextCheckInDate};try{await p(l)}catch(v){console.error("Failed to save review:",v),alert("Failed to save review. Please try again.")}r(!1)},P=["On track","Minor adjustments needed","Off track - intervention required"],U=["None","Affects another area"],j=["Approved","Adjusted","Replaced"],a=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},P.map(s=>React.createElement("label",{key:s,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-status`,value:s,checked:d.statusAfterReview===s,onChange:l=>g("statusAfterReview",l.target.value),className:"accent-clay"}),React.createElement("span",null,s))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},d.actionsRows.map((s,l)=>React.createElement("div",{key:l,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:s.action,onChange:v=>S(l,"action",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:s.owner,onChange:v=>S(l,"owner",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:s.deadline,onChange:v=>S(l,"deadline",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},U.map(s=>React.createElement("label",{key:s,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-impact`,value:s,checked:d.crossAreaImpacts===s,onChange:l=>g("crossAreaImpacts",l.target.value),className:"accent-clay"}),React.createElement("span",null,s)))),d.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:d.areasImpacted,onChange:s=>g("areasImpacted",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:d.coordinationNeeded,onChange:s=>g("coordinationNeeded",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},j.map(s=>React.createElement("label",{key:s,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-priority`,value:s,checked:d.priorityConfirmation===s,onChange:l=>g("priorityConfirmation",l.target.value),className:"accent-clay"}),React.createElement("span",null,s))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},a.map(s=>React.createElement("label",{key:s,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-escalation`,value:s,checked:d.escalationFlag===s,onChange:l=>g("escalationFlag",l.target.value),className:"accent-clay"}),React.createElement("span",null,s))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:d.reviewCompletedOn,onChange:s=>g("reviewCompletedOn",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:d.nextCheckInDate,onChange:s=>g("nextCheckInDate",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:D,disabled:m,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},m?"Saving...":"Save review")))},Ve=({initiatives:e,metrics:t})=>{const[o,p]=y(null),c=e.length?Math.round(e.reduce((m,r)=>m+(Number(r.progress)||0),0)/e.length):0,d=W.map(m=>({focusArea:m,count:e.filter(r=>r.focusArea===m).length})),i=W.map(m=>{const r=e.find(g=>g.focusArea===m&&g.threeYearVision);return{focusArea:m,vision:(r==null?void 0:r.threeYearVision)||"Add a three-year vision for this focus area."}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-ocean"},React.createElement(Ue,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To restore North Star House as a cultural gathering center, bringing the magic of the arts, theater, literature, history and music to generations of children, youth, and adults as well as providing a unique environment that nourishes the creative spirit."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"},"Vision: [Add your vision statement here]"),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Overall progress"),React.createElement("span",null,c,"%")),React.createElement(xe,{value:c}))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:Y(t==null?void 0:t.volunteersCount)},{label:"Events booked",value:Y(t==null?void 0:t.eventsCount)},{label:"Donation total",value:Ie(t==null?void 0:t.donationsTotal)},{label:"Sponsors",value:Y(t==null?void 0:t.sponsorsCount)}].map(m=>React.createElement("div",{key:m.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},m.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},m.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},i.map(m=>React.createElement("div",{key:m.focusArea,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},m.focusArea),React.createElement("p",{className:"text-sm text-stone-700 mt-2"},m.vision))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly focus"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"Tap to expand")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},["Q1","Q2","Q3","Final"].map(m=>{const r=o===m;return React.createElement("div",{key:m,className:"bg-white rounded-2xl border border-stone-100 card-shadow"},React.createElement("button",{type:"button",onClick:()=>p(r?null:m),className:"w-full flex items-center justify-between px-5 py-4 text-left"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("div",{className:"font-display text-xl text-ink"},m)),React.createElement("span",{className:"text-sm text-ocean"},r?"Close":"Open")),r&&React.createElement("div",{className:"px-5 pb-5 text-sm text-stone-700"},"Add quarterly priorities, milestones, and key outcomes here."))}))))};const _e=({initiative:e,onBack:t,onEdit:o,onSubmitUpdate:p,onReviewUpdate:c})=>{const d=Ee(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ge,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(je,{status:e.status}),React.createElement("button",{onClick:o,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(xe,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(Le,{initiative:e,onSubmit:i=>p(e,i)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},d.length," updates")),d.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},d.map(i=>React.createElement(Me,{key:i.id,update:i,onReviewSave:(m,r,g)=>c(e,m,r,g)})))))},$e=()=>{const[e,t]=y([]),[o,p]=y("dashboard"),[c,d]=y(null),[i,m]=y(null),[r,g]=y(!0),[S,D]=y(!1),[P,U]=y(!1),[j,a]=y({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[s,l]=y({Construction:null,Grounds:null,Interiors:null,Docents:null,"Fund Development":null,"Organizational Development":null,Venue:null}),[v,E]=y([]),I=Z.reduce((n,u)=>(n[u.key]={label:u.label,key:u.sheet},n),{}),F=re(()=>e.find(n=>n.id===c)||null,[e,c]),M=re(()=>e.find(n=>n.id===i)||null,[e,i]);ce(()=>{G()},[]);const G=async({useCache:n=!0}={})=>{var T,V;if(!J){const Q=z();t(((Q==null?void 0:Q.objects)||[]).map(L)),U(!1),g(!1);return}const u=n?z():null,C=u&&Date.now()-u.updatedAt<Se,h=n?H(le):null,x=n?H(oe):null,A=n?H(q):null;(T=u==null?void 0:u.objects)!=null&&T.length?(t(u.objects.map(L)),U(b.isConfigured()),g(!1)):g(!0),h&&a(h),x&&l(x),A&&E(A);try{const X=(await b.fetchAll()||[]).map(L);t(X),U(b.isConfigured()),B(X)}catch(Q){console.error("Failed to load data:",Q),(V=u==null?void 0:u.objects)!=null&&V.length||t(K.map(L))}g(!1);const k=await b.fetchMetrics();k&&(a(k),$(le,k));const O=await b.fetchSectionSnapshots();O&&(l(O),$(oe,O));const N=await b.fetchQuarterlyUpdates();N.length&&(E(N),$(q,N))},He=n=>{d(n),p("detail"),window.scrollTo(0,0)},Ye=()=>{m(null),p("add"),window.scrollTo(0,0)},ve=n=>{m(n.id),p("edit"),window.scrollTo(0,0)},he=async n=>{D(!0);try{if(M){const u=await b.update(w(f({},n),{updates:n.updates||[]}));t(C=>{const h=C.map(x=>x.id===u.id?L(u):x);return B(h),h}),d(u.id),p("detail")}else{const u=await b.create(w(f({},n),{id:n.id||me(),updates:n.updates||[]}));t(C=>{const h=[...C,L(u)];return B(h),h}),d(u.id),p("detail")}}catch(u){console.error("Failed to save initiative:",u),alert("Failed to save. Please try again.")}D(!1)},be=async(n,u)=>{const C=[u,...n.updates||[]],h=w(f({},n),{updates:C,progress:u.progress,lastUpdateAt:u.date});try{await b.update(h),t(x=>{const A=x.map(k=>k.id===n.id?L(h):k);return B(A),A})}catch(x){console.error("Failed to submit update:",x),alert("Failed to submit update. Please try again.")}},fe=async(n,u,C,h)=>{const x=(n.updates||[]).map(k=>k.id===u?w(f({},k),{reviewStatus:C,reviewNotes:h}):k),A=w(f({},n),{updates:x});try{await b.update(A),t(k=>{const O=k.map(N=>N.id===n.id?L(A):N);return B(O),O})}catch(k){console.error("Failed to save review:",k),alert("Failed to save review. Please try again.")}},ye=async n=>{const x=n,{focusArea:u,quarter:C}=x,h=se(x,["focusArea","quarter"]);await b.submitReviewUpdate(n),E(A=>{const k=A.findIndex(T=>T.focusArea===u&&T.quarter===C),O=k>=0?w(f({},A[k]),{payload:w(f({},A[k].payload||{}),{review:h})}):{focusArea:u,quarter:C,submittedDate:"",payload:{review:h}},N=k>=0?A.map((T,V)=>V===k?O:T):[...A,O];return $(q,N),N})},we=o==="detail"&&F;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(Pe,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{p("dashboard"),d(null)},className:`px-3 py-2 rounded-lg ${o==="dashboard"?"bg-stone-100":""}`},"Overview"),React.createElement("button",{onClick:()=>{p("quarterly"),d(null)},className:`px-3 py-2 rounded-lg ${o==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${P?"text-emerald-600":"text-steel"}`},P?"Synced":"Local"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},Z.map(n=>React.createElement("button",{key:n.key,onClick:()=>{p(n.key),d(null)},className:`tab-button text-sm ${o===n.key?"active":""}`},n.label)))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},r?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,o==="dashboard"&&React.createElement(Ve,{initiatives:e,metrics:j}),o==="quarterly"&&React.createElement(Ge,null),["construction","grounds","interiors","docents","fund","org","venue"].includes(o)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h2",{className:"font-display text-3xl text-ink"},I[o].label),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const n=s[I[o].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(n==null?void 0:n.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},(n==null?void 0:n.budget)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(n==null?void 0:n.volunteers)||"N/A")))})())),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},["Q1","Q2","Q3"].map(n=>{var O;const u=I[o].label,h=v.filter(N=>N.focusArea===u&&N.quarter===n).sort((N,T)=>new Date(T.submittedDate||T.createdAt)-new Date(N.submittedDate||N.createdAt))[0],x=(h==null?void 0:h.payload)||{},A=x.goals&&x.goals.length?x.goals:[{},{},{}],k=x.nextPriorities&&x.nextPriorities.length?x.nextPriorities:["","",""];return React.createElement("div",{key:n,className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},n),React.createElement("div",{className:"text-xs text-steel"},(h==null?void 0:h.submittedDate)||"No submission yet")),React.createElement("div",{className:"mt-3 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("div",null,x.primaryFocus||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"space-y-1"},A.map((N,T)=>React.createElement("div",{key:T},React.createElement("strong",null,N.goal||`Goal ${T+1}`),N.status?` - ${N.status}`:"",N.summary?` (${N.summary})`:"")))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",null,x.wins||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",null,((O=x.challenges)==null?void 0:O.details)||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",null,x.supportNeeded||"")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next priorities"),React.createElement("div",{className:"space-y-1"},k.map((N,T)=>React.createElement("div",{key:T},N)))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions needed"),React.createElement("div",null,x.decisionsNeeded||""))))})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},["Q1","Q2","Q3"].map(n=>{var x;const u=I[o].label,C=v.find(A=>A.focusArea===u&&A.quarter===n),h=(x=C==null?void 0:C.payload)==null?void 0:x.review;return React.createElement(Be,{key:n,areaLabel:u,quarter:n,review:h,onSave:ye})})),React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("div",{className:"mt-3 text-sm text-stone-700"},(()=>{var C;const n=I[o].label,u=v.find(h=>h.focusArea===n&&h.quarter==="Final");return((C=u==null?void 0:u.payload)==null?void 0:C.finalTallyOverview)||"No final tally submitted yet."})()))),we&&React.createElement(_e,{initiative:F,onBack:()=>p("list"),onEdit:()=>ve(F),onSubmitUpdate:be,onReviewUpdate:fe}),(o==="add"||o==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>p(M?"detail":"list"),className:"flex items-center gap-2 text-sm text-ocean mb-4"},React.createElement(ge,{size:18})," Cancel"),React.createElement(Qe,{initiative:M,onSave:he,onCancel:()=>p(M?"detail":"list"),isSaving:S})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},qe=ReactDOM.createRoot(document.getElementById("root"));qe.render(React.createElement($e,null));})();
