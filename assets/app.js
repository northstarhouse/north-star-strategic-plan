(()=>{var ft=Object.defineProperty,yt=Object.defineProperties;var wt=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var Le=(e,t,r)=>t in e?ft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))Be.call(t,r)&&Le(e,r,t[r]);if(he)for(var r of he(t))_e.call(t,r)&&Le(e,r,t[r]);return e},y=(e,t)=>yt(e,wt(t));var Je=(e,t)=>{var r={};for(var u in e)Be.call(e,u)&&t.indexOf(u)<0&&(r[u]=e[u]);if(e!=null&&he)for(var u of he(e))t.indexOf(u)<0&&_e.call(e,u)&&(r[u]=e[u]);return r};const{useState:x,useEffect:ue,useMemo:fe}=React,Ke="nsh-strategy-cache-v1",Ye="nsh-strategy-metrics-cache-v1",ze="nsh-strategy-sections-cache-v1",Fe="nsh-strategy-quarterly-cache-v1",De="nsh-strategy-vision-cache-v1",be="nsh-strategy-focus-goals-cache-v1",Nt=300*1e3,Ie=()=>{try{const e=localStorage.getItem(Ke);if(!e)return null;const t=JSON.parse(e);return!t||!Array.isArray(t.objects)?null:t}catch(e){return console.warn("Failed to read cache:",e),null}},me=e=>{try{localStorage.setItem(Ke,JSON.stringify({objects:e,updatedAt:Date.now()}))}catch(t){console.warn("Failed to write cache:",t)}},Ee=!0,$="https://script.google.com/macros/s/AKfycbwceVcGLuTCKp_GjlzYERa1OyhUcQQw6jnKhG2cmn4_AgSZjPEE8CWaO698S-lEtlk1/exec",qe=$,ve=["Fund Development","House and Grounds Development","Programs and Events","Organizational Development"],Oe=[{key:"construction",label:"Construction",sheet:"Construction"},{key:"grounds",label:"Grounds",sheet:"Grounds"},{key:"interiors",label:"Interiors",sheet:"Interiors"},{key:"docents",label:"Docents",sheet:"Docents"},{key:"fund",label:"Fundraising",sheet:"Fundraising"},{key:"events",label:"Events",sheet:"Events"},{key:"marketing",label:"Marketing",sheet:"Marketing"},{key:"venue",label:"Venue",sheet:"Venue"}],pe=["Not started","On track","At risk","Behind","Complete"],kt=["Pending","Reviewed","Needs info"],Xe=Array.from({length:11},(e,t)=>t*10),Pe=[{id:"1",title:"Launch community listening series",focusArea:"Programs and Events",description:"Host quarterly listening sessions to guide program priorities and gather feedback.",owner:"Community Outreach Lead",coChampions:"Program Director, Board Liaison",status:"On track",progress:60,targetDate:"2026-03-31",successMetrics:"4 sessions held, 120 participants, report delivered to board",threeYearVision:"We will have a clear set of documented programs and services that reinforce the House's role as a cultural historical gathering center and are well-organized, financially sustainable, and have clearly communicated teams of staff/volunteers that run each of the programs/services.",annualGoals:"Host 4 sessions, publish summary report, build annual outreach playbook.",notes:"Align session topics with strategic planning themes.",lastUpdateAt:"2026-01-12T18:30:00.000Z",updates:[{id:"up-1",date:"2026-01-12T18:30:00.000Z",author:"Community Outreach Lead",summary:"Secured first three locations",details:"Libraries and partner agencies confirmed for January and February sessions.",blockers:"Waiting on translation support budget confirmation.",nextSteps:"Finalize outreach materials and RSVP form.",progress:60,links:"https://example.com/agenda",reviewStatus:"Pending",reviewNotes:""}],createdAt:"2025-11-15T12:00:00.000Z",updatedAt:"2026-01-12T18:30:00.000Z"},{id:"2",title:"Build leadership succession pipeline",focusArea:"Organizational Development",description:"Create leadership development plan and identify emerging leaders for key roles.",owner:"Executive Director",coChampions:"Board Chair, HR Committee",status:"At risk",progress:35,targetDate:"2026-09-30",successMetrics:"Pipeline matrix completed, two leaders in shadow roles",threeYearVision:"A smooth-running organization that ensures the success of the Conservancy.",annualGoals:"Finalize competencies, identify 2 shadow roles, launch mentoring cadence.",notes:"Need agreement on competencies and mentorship structure.",lastUpdateAt:"2025-12-18T17:05:00.000Z",updates:[{id:"up-2",date:"2025-12-18T17:05:00.000Z",author:"Executive Director",summary:"Drafted role competency framework",details:"Outlined core competencies for leadership roles; awaiting committee review.",blockers:"Committee schedule conflict in January.",nextSteps:"Hold workshop to finalize framework.",progress:35,links:"",reviewStatus:"Needs info",reviewNotes:"Please add timeline impact for delayed workshop."}],createdAt:"2025-10-01T09:00:00.000Z",updatedAt:"2025-12-18T17:05:00.000Z"},{id:"3",title:"Complete house restoration and grounds plan",focusArea:"House and Grounds Development",description:"Finish the first floor renovation, restore the second floor with a volunteer crew, install fire suppression, and clarify the grounds plan.",owner:"Facilities Lead",coChampions:"Volunteer Crew Lead, Board Liaison",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"First floor renovated, second floor restored, fire suppression installed, grounds plan approved.",threeYearVision:"Complete the first floor renovation. The 2nd floor of the house will be restored by a clearly-led and well-organized volunteer crew. A fire suppression system will be installed. Plans for the rest of the grounds will have been clarified.",annualGoals:"Confirm scope, recruit volunteer crew, secure fire suppression bids, draft grounds plan options.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"},{id:"4",title:"Staff and organize fund development plan",focusArea:"Fund Development",description:"Build staffing, systems, and campaign execution to accelerate fundraising.",owner:"Development Director",coChampions:"Board Treasurer, Capital Campaign Chair",status:"Not started",progress:0,targetDate:"2028-12-31",successMetrics:"Fund development staffing in place, $1M raised toward capital campaign.",threeYearVision:"Over the next three years we will have successfully staffed and organized our fund development plans and raised $1M of the $2M capital campaign.",annualGoals:"Hire development lead, finalize campaign plan, raise initial $250k.",notes:"",lastUpdateAt:"2026-01-15T12:00:00.000Z",updates:[],createdAt:"2026-01-01T12:00:00.000Z",updatedAt:"2026-01-15T12:00:00.000Z"}],Ct=[{id:"fg-1",focusArea:"Fund Development",goalTopic:"Annual goal",annualGoals:"Document the Conservancy\u2019s fund development plan.",annualGoalsItems:[],goalDetails:"",goalLead:"",futureGoals:"",startDate:"",dueDate:"",goalChampions:"Jeff, Haley",goalTeamMembers:"",progress:"Not Started",category:""}],b={isConfigured:()=>Ee&&$&&$.length>0,postJson:async(e,t)=>{const r=await fetch(e,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Request failed");return r.json()},fetchAll:async()=>{if(!Ee){const e=Ie();return(e==null?void 0:e.objects)||[]}if(!b.isConfigured())return console.log("Google Sheets not configured, using sample data"),Pe;try{const e=await fetch(`${$}?action=getAll`);if(!e.ok)throw new Error("Failed to fetch data");return(await e.json()).objects||[]}catch(e){return console.error("Error fetching from Google Sheets:",e),Pe}},create:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),y(h({},e),{id:Date.now().toString()});try{return(await b.postJson($,{action:"create",object:e})).result||y(h({},e),{id:Date.now().toString()})}catch(t){return console.error("Error creating in Google Sheets:",t),y(h({},e),{id:Date.now().toString()})}},update:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured, saving locally only"),e;try{return await b.postJson($,{action:"update",object:e}),e}catch(t){return console.error("Error updating from Google Sheets:",t),e}},delete:async e=>{if(!b.isConfigured())return console.log("Google Sheets not configured"),!0;try{return await b.postJson($,{action:"delete",id:e}),!0}catch(t){return console.error("Error deleting from Google Sheets:",t),!1}},uploadFile:async({filename:e,mimeType:t,data:r})=>{if(!qe)throw new Error("Drive upload not configured");const u={action:"uploadImage",filename:e,mimeType:t,data:r},p=await b.postJson(qe,u);if(!p.success)throw new Error(p.error||"Upload failed");return p.result},fetchMetrics:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${$}?action=getMetrics`);if(!e.ok)throw new Error("Failed to fetch metrics");return(await e.json()).metrics||null}catch(e){return console.error("Error fetching metrics:",e),null}},submitQuarterlyUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson($,{action:"submitQuarterlyUpdate",form:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},submitReviewUpdate:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson($,{action:"submitReviewUpdate",review:e});if(!t.success)throw new Error(t.error||"Submission failed");return t.result},fetchVisionStatements:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${$}?action=getVisionStatements`);if(!e.ok)throw new Error("Failed to fetch vision statements");return(await e.json()).vision||[]}catch(e){return console.error("Error fetching vision statements:",e),[]}},updateVisionStatement:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson($,{action:"updateVisionStatement",vision:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},fetchFocusAreaGoals:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${$}?action=getFocusAreaGoals`);if(!e.ok)throw new Error("Failed to fetch focus area goals");return(await e.json()).goals||[]}catch(e){return console.error("Error fetching focus area goals:",e),[]}},updateFocusAreaGoal:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson($,{action:"updateFocusAreaGoal",goal:e});if(!t.success)throw new Error(t.error||"Save failed");return t.result},deleteFocusAreaGoal:async e=>{if(!b.isConfigured())throw new Error("Google Sheets not configured");const t=await b.postJson($,{action:"deleteFocusAreaGoal",id:e});if(!t.success)throw new Error(t.error||"Delete failed");return t.result},fetchQuarterlyUpdates:async()=>{if(!b.isConfigured())return[];try{const e=await fetch(`${$}?action=getQuarterlyUpdates`);if(!e.ok)throw new Error("Failed to fetch quarterly updates");return(await e.json()).updates||[]}catch(e){return console.error("Error fetching quarterly updates:",e),[]}},fetchSectionSnapshots:async()=>{if(!b.isConfigured())return null;try{const e=await fetch(`${$}?action=getSectionSnapshots`);if(!e.ok)throw new Error("Failed to fetch section snapshots");return(await e.json()).sections||null}catch(e){return console.error("Error fetching section snapshots:",e),null}}},ge=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to read cache:",t),null}},te=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn("Failed to write cache:",r)}},et=()=>`${Date.now()}-${Math.random().toString(16).slice(2,6)}`,Qe=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch(t){return e}},He=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return e;const r=String(t.getMonth()+1).padStart(2,"0"),u=String(t.getDate()).padStart(2,"0"),p=String(t.getFullYear());return`${r}-${u}-${p}`},St=e=>{switch(e){case"Q1":return"Q2";case"Q2":return"Q3";case"Q3":return"Q4";case"Q4":return"Final";default:return null}},Te=e=>e==null?"N/A":new Intl.NumberFormat("en-US").format(Number(e)||0),tt=e=>{if(e==null)return"N/A";const t=Number(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)},Re=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},At=(e,t=3)=>{const r=[];for(String(e||"").split(`
`).map(p=>p.trim()).filter(Boolean).forEach(p=>{const a=p.split("|").map(N=>N.trim()),[l="",I="",d=""]=a;r.push({action:l,owner:I,deadline:d})});r.length<t;)r.push({action:"",owner:"",deadline:""});return r.slice(0,t)},We=e=>e.map(t=>[t.action,t.owner,t.deadline].map(r=>r.trim()).join(" | ")).filter(t=>t.replace(/\|/g,"").trim()!=="").join(`
`),re=e=>y(h({},e),{focusArea:e.focusArea||e.pillar||"",progress:Number(e.progress)||0,updates:Array.isArray(e.updates)?e.updates:[]}),Ft=e=>e.slice().sort((t,r)=>new Date(r.date)-new Date(t.date)),Dt=e=>{switch(e){case"On track":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"At risk":return"bg-amber-100 text-amber-700 border-amber-200";case"Behind":return"bg-rose-100 text-rose-700 border-rose-200";case"Complete":return"bg-gold text-white border-gold";default:return"bg-stone-100 text-stone-600 border-stone-200"}},Tt=e=>{switch(e){case"Reviewed":return"text-emerald-700";case"Needs info":return"text-rose-700";default:return"text-amber-700"}},It=({size:e=24})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M12 2l2.5 6 6 2.5-6 2.5-2.5 6-2.5-6L3.5 10.5 9.5 8z"}));const ce=({size:e=22})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},React.createElement("path",{d:"M12 2.8l2.7 5.7 6.3.9-4.5 4.4 1.1 6.2L12 17.8 6.4 20l1.1-6.2-4.5-4.4 6.3-.9L12 2.8z"}));const at=({size:e=20})=>React.createElement("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"},React.createElement("path",{d:"M19 12H5"}),React.createElement("path",{d:"M11 5l-7 7 7 7"}));const Et=({value:e})=>React.createElement("div",{className:"w-full bg-stone-100 rounded-full h-3 overflow-hidden"},React.createElement("div",{className:"h-full bg-clay transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})),Ot=({status:e})=>React.createElement("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${Dt(e)}`},e);const Pt=({update:e,onReviewSave:t})=>{const[r,u]=x(e.reviewStatus||"Pending"),[p,a]=x(e.reviewNotes||"");return React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Qe(e.date)),React.createElement("h4",{className:"font-display text-lg text-ink mt-1"},e.summary||"Update"),React.createElement("p",{className:"text-sm text-stone-600"},"Submitted by ",e.author||"Team member")),React.createElement("div",{className:`text-xs font-semibold ${Tt(r)}`},r)),e.details&&React.createElement("p",{className:"text-sm text-stone-700 mt-3 whitespace-pre-wrap"},e.details),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-xs text-stone-600 mt-4"},React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Blockers"),React.createElement("div",null,e.blockers||"None noted")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Next steps"),React.createElement("div",null,e.nextSteps||"No next steps yet")),React.createElement("div",null,React.createElement("div",{className:"uppercase tracking-wide text-steel"},"Progress"),React.createElement("div",null,typeof e.progress=="number"?`${Math.round(e.progress)}%`:"Not shared"))),e.links&&React.createElement("div",{className:"mt-3 text-xs text-gold"},React.createElement("a",{href:e.links,target:"_blank",rel:"noreferrer",className:"underline"},"View supporting link")),React.createElement("div",{className:"mt-4 pt-4 border-t border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champion review"),React.createElement("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mt-2"},React.createElement("select",{value:r,onChange:l=>u(l.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white text-sm"},kt.map(l=>React.createElement("option",{key:l,value:l},l))),React.createElement("input",{type:"text",value:p,onChange:l=>a(l.target.value),placeholder:"Review notes",className:"flex-1 px-3 py-2 border border-stone-200 rounded-lg text-sm"}),React.createElement("button",{onClick:()=>t(e.id,r,p),className:"px-4 py-2 bg-gold text-white rounded-lg text-sm"},"Save review"))))},Qt=({initiative:e,onSubmit:t})=>{const[r,u]=x(""),[p,a]=x(""),[l,I]=x(""),[d,N]=x(""),[c,C]=x(""),[P,j]=x(e.progress||0),[R,V]=x("");return React.createElement("form",{onSubmit:i=>{i.preventDefault();const n={id:et(),date:new Date().toISOString(),author:r,summary:p,details:l,blockers:d,nextSteps:c,progress:Number(P)||0,links:R,reviewStatus:"Pending",reviewNotes:""};t(n),u(""),a(""),I(""),N(""),C(""),j(e.progress||0),V("")},className:"bg-white rounded-2xl border border-stone-100 p-5 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h3",{className:"font-display text-xl"},"Submit progress update"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board members")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Your name"),React.createElement("input",{type:"text",value:r,onChange:i=>u(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Name or team",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Update headline"),React.createElement("input",{type:"text",value:p,onChange:i=>a(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Short summary",required:!0})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Details"),React.createElement("textarea",{value:l,onChange:i=>I(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"What changed? What decisions were made?"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Blockers"),React.createElement("input",{type:"text",value:d,onChange:i=>N(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Risks or constraints"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next steps"),React.createElement("input",{type:"text",value:c,onChange:i=>C(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Immediate actions"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Updated progress"),React.createElement("select",{value:P,onChange:i=>j(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Xe.map(i=>React.createElement("option",{key:i,value:i},i,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Supporting link"),React.createElement("input",{type:"url",value:R,onChange:i=>V(i.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"https://"}))),React.createElement("div",{className:"mt-4 flex items-center justify-end"},React.createElement("button",{type:"submit",className:"px-5 py-2 bg-clay text-white rounded-lg"},"Submit update")))},Rt=({initiative:e,onSave:t,onCancel:r,isSaving:u})=>{const[p,a]=x(()=>({title:(e==null?void 0:e.title)||"",focusArea:(e==null?void 0:e.focusArea)||"",description:(e==null?void 0:e.description)||"",owner:(e==null?void 0:e.owner)||"",coChampions:(e==null?void 0:e.coChampions)||"",status:(e==null?void 0:e.status)||pe[0],progress:(e==null?void 0:e.progress)||0,targetDate:(e==null?void 0:e.targetDate)||"",successMetrics:(e==null?void 0:e.successMetrics)||"",threeYearVision:(e==null?void 0:e.threeYearVision)||"",annualGoals:(e==null?void 0:e.annualGoals)||"",notes:(e==null?void 0:e.notes)||""})),l=(d,N)=>{a(c=>y(h({},c),{[d]:N}))};return React.createElement("form",{onSubmit:d=>{d.preventDefault();const N=y(h(h({},e),p),{progress:Number(p.progress)||0,updates:(e==null?void 0:e.updates)||[]});t(N)},className:"bg-white rounded-2xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl"},e?"Edit initiative":"Add initiative"),React.createElement("span",{className:"text-xs text-steel"},"Visible to board leaders")),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-5"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Initiative title"),React.createElement("input",{type:"text",value:p.title,onChange:d=>l("title",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Focus area"),React.createElement("select",{value:p.focusArea,onChange:d=>l("focusArea",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},React.createElement("option",{value:""},"Select focus area"),ve.map(d=>React.createElement("option",{key:d,value:d},d)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:p.owner,onChange:d=>l("owner",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Lead or team"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Description"),React.createElement("textarea",{value:p.description,onChange:d=>l("description",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("input",{type:"text",value:p.coChampions,onChange:d=>l("coChampions",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Names or roles"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Status"),React.createElement("select",{value:p.status,onChange:d=>l("status",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},pe.map(d=>React.createElement("option",{key:d,value:d},d)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:p.progress,onChange:d=>l("progress",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},Xe.map(d=>React.createElement("option",{key:d,value:d},d,"%")))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("input",{type:"date",value:p.targetDate,onChange:d=>l("targetDate",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("input",{type:"text",value:p.successMetrics,onChange:d=>l("successMetrics",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"What does success look like?"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("textarea",{value:p.threeYearVision,onChange:d=>l("threeYearVision",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Describe what success looks like in three years."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("textarea",{value:p.annualGoals,onChange:d=>l("annualGoals",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"List the annual goals that move this forward."})),React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("textarea",{value:p.notes,onChange:d=>l("notes",d.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]"}))),React.createElement("div",{className:"mt-6 flex items-center justify-end gap-3"},React.createElement("button",{type:"button",onClick:r,className:"px-4 py-2 border border-stone-200 rounded-lg"},"Cancel"),React.createElement("button",{type:"submit",disabled:u,className:"px-5 py-2 bg-gold text-white rounded-lg"},u?"Saving...":"Save initiative")))},Ze=()=>({focusArea:"",quarter:"",year:new Date().getFullYear().toString(),submittedDate:new Date().toISOString().slice(0,10),primaryFocus:"",goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:"",challenges:{capacity:!1,budget:!1,scheduling:!1,coordination:!1,external:!1,other:!1,otherText:"",details:""},supportNeeded:"",supportTypes:{staff:!1,marketing:!1,board:!1,funding:!1,facilities:!1,other:!1,otherText:""},decisionsNeeded:"",nextQuarterFocus:"",nextPriorities:["","",""],finalTallyOverview:""}),jt=({onSubmitted:e,initialData:t,hidePrimaryGoals:r=!1,defaultFocusArea:u="",lockFocusArea:p=!1})=>{const[a,l]=x(()=>y(h({},Ze()),{focusArea:u||""})),[I,d]=x(!1),[N,c]=x(!1),[C,P]=x([]),j=`nsh-quarterly-next-${a.focusArea||"area"}-${a.quarter||"quarter"}`,R=(s,w)=>{l(v=>y(h({},v),{[s]:w}))},V=(s,w,v)=>{l(O=>{const G=O.goals.map((Z,K)=>K===s?y(h({},Z),{[w]:v}):Z);return y(h({},O),{goals:G})})},U=(s,w)=>{l(v=>y(h({},v),{challenges:y(h({},v.challenges),{[s]:w})}))},i=(s,w)=>{l(v=>y(h({},v),{supportTypes:y(h({},v.supportTypes),{[s]:w})}))},n=(s,w)=>{l(v=>{const O=v.nextPriorities.map((G,Z)=>Z===s?w:G);return y(h({},v),{nextPriorities:O})})};ue(()=>{t&&(l(s=>y(h(h({},Ze()),t),{challenges:h(h({},s.challenges),t.challenges||{}),supportTypes:h(h({},s.supportTypes),t.supportTypes||{})})),P(t.uploadedFiles||[]))},[t]),ue(()=>{var w;if(t||!a.focusArea||!a.quarter||a.primaryFocus||(w=a.goals)!=null&&w.some(v=>v.goal))return;const s=localStorage.getItem(j);if(s)try{const v=JSON.parse(s);if(!v)return;l(O=>{var G;return y(h({},O),{primaryFocus:v.primaryFocus||O.primaryFocus,goals:(G=v.goals)!=null&&G.length?v.goals:O.goals})})}catch(v){console.warn("Failed to read quarterly suggestion:",v)}},[t,a.focusArea,a.quarter,a.primaryFocus,a.goals,j]);const E=async s=>{s.preventDefault(),c(!0);try{await b.submitQuarterlyUpdate(y(h({},a),{uploadedFiles:C}));const w=St(a.quarter);if(w&&a.focusArea){const v=`nsh-quarterly-next-${a.focusArea}-${w}`,O=a.nextPriorities||[],G={primaryFocus:a.nextQuarterFocus||O[0]||"",goals:[{goal:O[0]||"",status:"On Track",summary:""},{goal:O[1]||"",status:"On Track",summary:""},{goal:O[2]||"",status:"On Track",summary:""}]};localStorage.setItem(v,JSON.stringify(G))}await(e==null?void 0:e())}catch(w){console.error("Quarterly update submit failed:",w),alert("Submission failed. Please try again.")}c(!1)},Q=async s=>{const w=Array.from(s.target.files||[]);if(w.length){d(!0);try{const v=await Promise.all(w.map(O=>new Promise((G,Z)=>{const K=new FileReader;K.onload=async()=>{const ne=String(K.result||"").split(",")[1]||"";try{const le=await b.uploadFile({filename:O.name,mimeType:O.type,data:ne});G(le)}catch(le){Z(le)}},K.onerror=Z,K.readAsDataURL(O)})));P(O=>[...O,...v])}catch(v){console.error("Failed to upload files:",v),alert("Failed to upload files. Please try again.")}d(!1),s.target.value=""}};return React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("h1",{className:"font-display text-3xl text-ink"},"Quarterly Strategic Area Update Form"),React.createElement("p",{className:"text-stone-600 mt-2"},"Share quarterly progress, challenges, and support needs for each focus area."),React.createElement("form",{onSubmit:E,className:"mt-6 space-y-8"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Organizational area"),React.createElement("select",{value:a.focusArea,onChange:s=>R("focusArea",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0,disabled:p},React.createElement("option",{value:""},"Select area"),Oe.map(s=>React.createElement("option",{key:s.label,value:s.label},s.label)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("select",{value:a.quarter,onChange:s=>R("quarter",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white",required:!0},React.createElement("option",{value:""},"Select quarter"),["Q1","Q2","Q3","Q4","Final"].map(s=>React.createElement("option",{key:s,value:s},s==="Q1"?"Q1 (Jan 1 - Mar 31)":s==="Q2"?"Q2 (Apr 1 - Jun 30)":s==="Q3"?"Q3 (Jul 1 - Sep 30)":s==="Q4"?"Q4 (Oct 1 - Dec 31)":s)))),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Year"),React.createElement("input",{type:"text",value:a.year,onChange:s=>R("year",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Date submitted"),React.createElement("input",{type:"date",value:a.submittedDate,onChange:s=>R("submittedDate",s.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"}))),!r&&React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-lg font-display text-ink"},`${quarter} Primary Focus and Goals`),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Primary focus this quarter"),React.createElement("textarea",{value:a.primaryFocus,onChange:s=>R("primaryFocus",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Main priorities or themes."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Quarterly goals and status"),React.createElement("div",{className:"mt-3 space-y-4"},a.goals.map((s,w)=>React.createElement("div",{key:w,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:s.goal,onChange:v=>V(w,"goal",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${w+1}`}),React.createElement("select",{value:s.status,onChange:v=>V(w,"status",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(v=>React.createElement("option",{key:v,value:v},v))),React.createElement("input",{type:"text",value:s.summary,onChange:v=>V(w,"summary",v.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-lg font-display text-ink"},`${quarter} Quarterly Reflection`),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"What went well"),React.createElement("textarea",{value:a.wins,onChange:s=>R("wins",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[120px]",placeholder:"Milestones, events, completed projects."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Challenges encountered"),React.createElement("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.capacity,onChange:s=>U("capacity",s.target.checked)}),"Capacity or volunteer limitations"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.budget,onChange:s=>U("budget",s.target.checked)}),"Budget or funding constraints"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.scheduling,onChange:s=>U("scheduling",s.target.checked)}),"Scheduling or timing issues"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.coordination,onChange:s=>U("coordination",s.target.checked)}),"Cross-area coordination gaps"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.external,onChange:s=>U("external",s.target.checked)}),"External factors"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.challenges.other,onChange:s=>U("other",s.target.checked)}),"Other")),a.challenges.other&&React.createElement("input",{type:"text",value:a.challenges.otherText,onChange:s=>U("otherText",s.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other challenges"}),React.createElement("textarea",{value:a.challenges.details,onChange:s=>U("details",s.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Details"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Support needed to stay on track"),React.createElement("textarea",{value:a.supportNeeded,onChange:s=>R("supportNeeded",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Be specific about the help needed."}),React.createElement("div",{className:"mt-4 text-xs uppercase tracking-wide text-steel"},"Type of support needed"),React.createElement("div",{className:"mt-2 space-y-2 text-sm text-stone-700"},React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.staff,onChange:s=>i("staff",s.target.checked)}),"Staff or volunteer help"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.marketing,onChange:s=>i("marketing",s.target.checked)}),"Marketing or communications"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.board,onChange:s=>i("board",s.target.checked)}),"Board guidance or decision"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.funding,onChange:s=>i("funding",s.target.checked)}),"Funding or fundraising support"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.facilities,onChange:s=>i("facilities",s.target.checked)}),"Facilities or logistics"),React.createElement("label",{className:"flex items-center gap-2"},React.createElement("input",{type:"checkbox",checked:a.supportTypes.other,onChange:s=>i("other",s.target.checked)}),"Other")),a.supportTypes.other&&React.createElement("input",{type:"text",value:a.supportTypes.otherText,onChange:s=>i("otherText",s.target.value),className:"mt-3 w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Other support type"}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Decisions needed"),React.createElement("textarea",{value:a.decisionsNeeded,onChange:s=>R("decisionsNeeded",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Decisions or approvals needed."}),React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel mt-4 block"},"Next quarter focus area and goals"),React.createElement("input",{type:"text",value:a.nextQuarterFocus,onChange:s=>R("nextQuarterFocus",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Primary focus for next quarter"}),React.createElement("div",{className:"mt-3 space-y-2"},a.nextPriorities.map((s,w)=>React.createElement("input",{key:w,type:"text",value:s,onChange:v=>n(w,v.target.value),className:"w-full px-3 py-2 border border-stone-200 rounded-lg",placeholder:`${w+1}.`})))),a.quarter==="Final"&&React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Final tally overview"),React.createElement("textarea",{value:a.finalTallyOverview,onChange:s=>R("finalTallyOverview",s.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[140px]",placeholder:"End-of-year summary and tally overview."})),React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"submit",className:"px-6 py-3 bg-gold text-white rounded-lg",disabled:N},N?"Submitting...":"Submit quarterly update")))))},Mt=({areaLabel:e,quarter:t,review:r,onSave:u})=>{const p=n=>({statusAfterReview:(n==null?void 0:n.statusAfterReview)||"",actionsRows:At(n==null?void 0:n.actionsAssigned),crossAreaImpacts:(n==null?void 0:n.crossAreaImpacts)||"",areasImpacted:(n==null?void 0:n.areasImpacted)||"",coordinationNeeded:(n==null?void 0:n.coordinationNeeded)||"",priorityConfirmation:(n==null?void 0:n.priorityConfirmation)||"",escalationFlag:(n==null?void 0:n.escalationFlag)||"",reviewCompletedOn:Re(n==null?void 0:n.reviewCompletedOn),nextCheckInDate:Re(n==null?void 0:n.nextCheckInDate)}),[a,l]=x(()=>p(r)),[I,d]=x(!1),[N,c]=x(!1);ue(()=>{l(p(r))},[r,e,t]),ue(()=>{c(!1)},[e,t]);const C=(n,E)=>{l(Q=>y(h({},Q),{[n]:E}))},P=(n,E,Q)=>{l(s=>{const w=s.actionsRows.map((v,O)=>O===n?y(h({},v),{[E]:Q}):v);return y(h({},s),{actionsRows:w})})},j=async()=>{d(!0);const n=a.crossAreaImpacts==="Affects another area",E={focusArea:e,quarter:t,statusAfterReview:a.statusAfterReview,actionsAssigned:We(a.actionsRows),crossAreaImpacts:a.crossAreaImpacts,areasImpacted:n?a.areasImpacted:"",coordinationNeeded:n?a.coordinationNeeded:"",priorityConfirmation:a.priorityConfirmation,escalationFlag:a.escalationFlag,reviewCompletedOn:a.reviewCompletedOn,nextCheckInDate:a.nextCheckInDate};try{await u(E)}catch(Q){console.error("Failed to save review:",Q),alert("Failed to save review. Please try again.")}d(!1)},R=["On track","Minor adjustments needed","Off track - intervention required"],V=["None","Affects another area"],U=["Approved","Adjusted","Replaced"],i=["No escalation needed","Requires board attention","Requires budget review","Requires policy clarification"];if(!N){const E=[{label:"Status After Review",value:a.statusAfterReview},{label:"Actions Assigned",value:We(a.actionsRows)},{label:"Cross-Area Impacts",value:a.crossAreaImpacts},{label:"Area(s) impacted",value:a.areasImpacted},{label:"Coordination needed",value:a.coordinationNeeded},{label:"Priority Confirmation (Next Quarter)",value:a.priorityConfirmation},{label:"Escalation Flag",value:a.escalationFlag},{label:"Review completed on",value:a.reviewCompletedOn},{label:"Next check-in date",value:a.nextCheckInDate}].filter(Q=>Q.value);return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>c(!0),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Edit review")),E.length===0?React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No review submitted yet."):React.createElement("div",{className:"mt-4 space-y-2 text-sm text-stone-700"},E.map(Q=>React.createElement("div",{key:Q.label},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},Q.label),React.createElement("div",{className:"whitespace-pre-wrap"},Q.value)))))}return React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-5 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},t," review"),React.createElement("button",{type:"button",onClick:()=>c(!1),className:"px-3 py-1.5 border border-stone-200 rounded-lg text-xs text-ink"},"Close")),React.createElement("div",{className:"mt-3 space-y-5 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Status After Review"),React.createElement("div",{className:"mt-2 space-y-2"},R.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-status`,value:n,checked:a.statusAfterReview===n,onChange:E=>C("statusAfterReview",E.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Actions Assigned"),React.createElement("div",{className:"mt-2 grid grid-cols-3 gap-2 text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Action"),React.createElement("span",null,"Owner"),React.createElement("span",null,"Deadline")),React.createElement("div",{className:"mt-2 space-y-2"},a.actionsRows.map((n,E)=>React.createElement("div",{key:E,className:"grid grid-cols-1 md:grid-cols-3 gap-2"},React.createElement("input",{type:"text",value:n.action,onChange:Q=>P(E,"action",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:n.owner,onChange:Q=>P(E,"owner",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}),React.createElement("input",{type:"text",value:n.deadline,onChange:Q=>P(E,"deadline",Q.target.value),className:"px-3 py-2 border border-stone-200 rounded-lg"}))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Cross-Area Impacts"),React.createElement("div",{className:"mt-2 space-y-2"},V.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-impact`,value:n,checked:a.crossAreaImpacts===n,onChange:E=>C("crossAreaImpacts",E.target.value),className:"accent-clay"}),React.createElement("span",null,n)))),a.crossAreaImpacts==="Affects another area"&&React.createElement("div",{className:"mt-3 grid grid-cols-1 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Area(s) impacted"),React.createElement("input",{type:"text",value:a.areasImpacted,onChange:n=>C("areasImpacted",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Coordination needed"),React.createElement("textarea",{value:a.coordinationNeeded,onChange:n=>C("coordinationNeeded",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg min-h-[90px]"})))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Priority Confirmation (Next Quarter)"),React.createElement("div",{className:"mt-2 space-y-2"},U.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-priority`,value:n,checked:a.priorityConfirmation===n,onChange:E=>C("priorityConfirmation",E.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Escalation Flag"),React.createElement("div",{className:"mt-2 space-y-2"},i.map(n=>React.createElement("label",{key:n,className:"flex items-center gap-2"},React.createElement("input",{type:"radio",name:`${e}-${t}-escalation`,value:n,checked:a.escalationFlag===n,onChange:E=>C("escalationFlag",E.target.value),className:"accent-clay"}),React.createElement("span",null,n))))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Review completed on"),React.createElement("input",{type:"date",value:a.reviewCompletedOn,onChange:n=>C("reviewCompletedOn",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Next check-in date"),React.createElement("input",{type:"date",value:a.nextCheckInDate,onChange:n=>C("nextCheckInDate",n.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})))),React.createElement("div",{className:"mt-5 flex items-center justify-end"},React.createElement("button",{type:"button",onClick:j,disabled:I,className:"px-4 py-2 bg-clay text-white rounded-lg text-sm"},I?"Saving...":"Save review")))},$t=({focusArea:e,vision:t,onSave:r,isSaving:u})=>{const[p,a]=x(!1),[l,I]=x(t||"");return ue(()=>{p||I(t||"")},[t,p]),React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e),React.createElement("div",{className:"flex items-center gap-2 text-xs"},p?React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:()=>{a(!1),I(t||"")},className:"px-2 py-1 border border-stone-200 rounded-lg",disabled:u},"Cancel"),React.createElement("button",{type:"button",onClick:()=>{r(e,l),a(!1)},className:"px-2 py-1 bg-gold text-white rounded-lg",disabled:u},u?"Saving...":"Save")):React.createElement("button",{type:"button",onClick:()=>a(!0),className:"px-2 py-1 border border-stone-200 rounded-lg"},"Edit"))),p?React.createElement("textarea",{value:l,onChange:N=>I(N.target.value),className:"w-full mt-3 px-3 py-2 border border-stone-200 rounded-lg text-sm min-h-[120px]",placeholder:"Describe what success looks like in three years."}):React.createElement("div",{className:"text-sm text-stone-700 mt-2 space-y-1"},t?String(t).split(`
`).map(N=>N.trim()).filter(Boolean).map((N,c)=>React.createElement("div",{key:`${e}-vision-${c}`,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ce,{size:12})),React.createElement("span",{className:"whitespace-pre-wrap"},N))):React.createElement("span",null,"Add a three-year vision for this focus area.")))},Ut=({focusArea:e,initialGoal:t,presetCategory:r,onSave:u,onCancel:p,isSaving:a})=>{const[l,I]=x(()=>({id:(t==null?void 0:t.id)||"",focusArea:e,goalTopic:"Annual goal",annualGoals:(t==null?void 0:t.annualGoals)||"",startDate:(t==null?void 0:t.startDate)||"",dueDate:(t==null?void 0:t.dueDate)||"",progress:(t==null?void 0:t.progress)||pe[0],category:(t==null?void 0:t.category)||r||"Annual goals",goalDetails:(t==null?void 0:t.goalDetails)||"",goalLead:(t==null?void 0:t.goalLead)||"",futureGoals:(t==null?void 0:t.futureGoals)||""})),d=(c,C)=>{I(P=>y(h({},P),{[c]:C}))};return React.createElement("form",{onSubmit:c=>{c.preventDefault(),u(y(h({},l),{goalTopic:"Annual goal",annualGoalsItems:[]}))},className:"mt-4 bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},React.createElement("div",{className:"md:col-span-2"},React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goal"),React.createElement("input",{type:"text",value:l.annualGoals,onChange:c=>d("annualGoals",c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg",required:!0})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("input",{type:"text",value:l.goalLead,onChange:c=>d("goalLead",c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",{className:"md:col-span-2"},React.createElement("textarea",{value:l.goalDetails,onChange:c=>d("goalDetails",c.target.value),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[60px]",placeholder:"Add details, notes, or key steps."})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Due date"),React.createElement("input",{type:"date",value:Re(l.dueDate),onChange:c=>d("dueDate",c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg"})),React.createElement("div",null,React.createElement("label",{className:"text-xs uppercase tracking-wide text-steel"},"Progress"),React.createElement("select",{value:l.progress,onChange:c=>d("progress",c.target.value),className:"w-full mt-1 px-3 py-2 border border-stone-200 rounded-lg bg-white"},pe.map(c=>React.createElement("option",{key:c,value:c},c))))),React.createElement("div",{className:"mt-4 flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:p,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm",disabled:a},"Cancel"),React.createElement("button",{type:"submit",className:"px-4 py-2 bg-gold text-white rounded-lg text-sm",disabled:a},a?"Saving...":"Save goal")))},st=({focusArea:e,goals:t,onSaveGoal:r,onDeleteGoal:u,isSaving:p,hideTitle:a})=>{const[l,I]=x(null),[d,N]=x(!1),[c,C]=x("Annual goals"),P=fe(()=>t.filter(i=>!i.category||i.category==="Annual goals"||i.category==="Goals"),[t]),j=fe(()=>t.filter(i=>i.category==="Future Goals"),[t]),R=i=>{N(!1),I(i),C(i.category||"Annual goals")},V=i=>{I(null),N(!0),C(i)},U=i=>{r(i),I(null),N(!1)};return React.createElement("div",{className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},!a&&React.createElement("div",{className:"font-display text-xl text-ink"},e),React.createElement("div",{className:"mt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Annual goals"),React.createElement("button",{type:"button",onClick:()=>V("Annual goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),P.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No annual goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},P.map(i=>React.createElement("div",{key:i.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ce,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},i.annualGoals||"Untitled goal")),i.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},i.goalDetails)),React.createElement("button",{type:"button",onClick:()=>R(i),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,i.dueDate?`Due: ${Qe(i.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},i.progress||pe[0])))))),React.createElement("div",{className:"mt-6 border-t border-stone-200 pt-4"},React.createElement("div",{className:"flex items-center justify-between text-xs uppercase tracking-wide text-steel"},React.createElement("span",null,"Future goals"),React.createElement("button",{type:"button",onClick:()=>V("Future Goals"),className:"text-xs px-2 py-1 border border-stone-200 rounded-lg normal-case"},"Add goal")),j.length===0?React.createElement("div",{className:"mt-3 text-sm text-stone-600"},"No future goals yet."):React.createElement("div",{className:"mt-3 space-y-3"},j.map(i=>React.createElement("div",{key:i.id,className:"border border-stone-100 rounded-xl p-3 bg-white"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("div",{className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ce,{size:12})),React.createElement("div",{className:"font-semibold text-ink"},i.annualGoals||"Untitled goal")),i.goalDetails&&React.createElement("div",{className:"text-xs text-stone-500 mt-2 whitespace-pre-wrap"},i.goalDetails)),React.createElement("button",{type:"button",onClick:()=>R(i),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),React.createElement("div",{className:"mt-3 flex items-center justify-between text-xs text-stone-500"},React.createElement("div",null,i.dueDate?`Due: ${Qe(i.dueDate)}`:""),React.createElement("div",{className:"text-stone-600"},i.progress||pe[0])))))),(d||l)&&React.createElement(Ut,{focusArea:e,initialGoal:l,presetCategory:c,onSave:U,onCancel:()=>{N(!1),I(null)},isSaving:p}))},Gt=({goals:e,onSaveGoal:t,onDeleteGoal:r,isSaving:u,focusFilter:p})=>{const a=p?ve.filter(l=>l===p):ve;return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"flex items-center justify-between mb-6"},React.createElement("div",null,React.createElement("h2",{className:"font-display text-3xl text-ink"},"Focus areas"),React.createElement("p",{className:"text-stone-600 mt-1"},"Track goals by strategic focus area."))),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},a.map(l=>React.createElement(st,{key:l,focusArea:l,goals:e.filter(I=>I.focusArea===l),onSaveGoal:t,onDeleteGoal:r,isSaving:u}))))},Vt=({initiatives:e,metrics:t,visionStatements:r,onSaveVision:u,isSavingVision:p})=>{const[a,l]=x(null),I=e.length?Math.round(e.reduce((c,C)=>c+(Number(C.progress)||0),0)/e.length):0,d=ve.map(c=>({focusArea:c,count:e.filter(C=>C.focusArea===c).length})),N=ve.map(c=>{const C=r==null?void 0:r.find(j=>j.focusArea===c),P=e.find(j=>j.focusArea===c&&j.threeYearVision);return{focusArea:c,vision:(C==null?void 0:C.threeYearVision)||(P==null?void 0:P.threeYearVision)||""}});return React.createElement("div",{className:"max-w-6xl mx-auto fade-up"},React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-[1.2fr_0.8fr] gap-6"},React.createElement("div",{className:"glass rounded-3xl p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-center gap-3 text-gold"},React.createElement(It,{size:28}),React.createElement("span",{className:"text-xs uppercase tracking-wide"},"Mission and vision")),React.createElement("h1",{className:"font-display text-xl md:text-2xl text-ink mt-4"},"Mission: To revitalize North Star House as a cultural gathering place that connects people of all ages through the arts, theater, literature, history, and music\u2014fostering creativity, learning, and community for generations to come."),React.createElement("p",{className:"text-stone-600 mt-2 text-xs md:text-sm"},"Vision: [Add your vision statement here]")),React.createElement("div",{className:"grid grid-cols-2 gap-4"},[{label:"Volunteers",value:Te(t==null?void 0:t.volunteersCount)},{label:"Events booked",value:Te(t==null?void 0:t.eventsCount)},{label:"Donation total",value:tt(t==null?void 0:t.donationsTotal)},{label:"Sponsors",value:Te(t==null?void 0:t.sponsorsCount)}].map(c=>React.createElement("div",{key:c.label,className:"bg-white rounded-2xl p-5 border border-stone-100 card-shadow"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},c.label),React.createElement("div",{className:"font-display text-3xl text-ink mt-3"},c.value))))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Three-year vision"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"By focus area")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},N.map(c=>React.createElement($t,{key:c.focusArea,focusArea:c.focusArea,vision:c.vision,onSave:u,isSaving:p})))),React.createElement("div",{className:"mt-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("h2",{className:"font-display text-2xl text-ink"},"Quarterly focus"),React.createElement("span",{className:"text-xs uppercase tracking-wide text-steel"},"Tap to expand")),React.createElement("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4"},["Q1","Q2","Q3","Q4","Final"].map(c=>{const C=a===c;return React.createElement("div",{key:c,className:"bg-white rounded-2xl border border-stone-100 card-shadow"},React.createElement("button",{type:"button",onClick:()=>l(C?null:c),className:"w-full flex items-center justify-between px-5 py-4 text-left"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Quarter"),React.createElement("div",{className:"font-display text-xl text-ink"},c)),React.createElement("span",{className:"text-sm text-gold"},C?"Close":"Open")),C&&React.createElement("div",{className:"px-5 pb-5 text-sm text-stone-700"},"Add quarterly priorities, milestones, and key outcomes here."))}))))};const Lt=({initiative:e,onBack:t,onEdit:r,onSubmitUpdate:u,onReviewUpdate:p})=>{const a=Ft(e.updates||[]);return React.createElement("div",{className:"max-w-5xl mx-auto fade-up"},React.createElement("button",{onClick:t,className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(at,{size:18})," Back to initiatives"),React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},e.focusArea),React.createElement("h1",{className:"font-display text-3xl text-ink mt-2"},e.title),React.createElement("p",{className:"text-stone-600 mt-2"},e.description)),React.createElement("div",{className:"flex flex-col items-start gap-3"},React.createElement(Ot,{status:e.status}),React.createElement("button",{onClick:r,className:"px-4 py-2 border border-stone-200 rounded-lg text-sm"},"Edit initiative"))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goal lead"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.owner||"Unassigned")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Co-champions"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.coChampions||"Not listed")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Target date"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.targetDate||"TBD"))),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between text-xs text-steel mb-2"},React.createElement("span",null,"Progress"),React.createElement("span",null,Math.round(e.progress),"%")),React.createElement(Et,{value:e.progress})),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Success metrics"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.successMetrics||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Notes"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.notes||"No notes yet"))),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Three-year vision for success"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.threeYearVision||"Not defined")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Annual goals"),React.createElement("div",{className:"text-sm text-ink mt-1"},e.annualGoals||"Not defined")))),React.createElement("div",{className:"mt-6"},React.createElement(Qt,{initiative:e,onSubmit:l=>u(e,l)})),React.createElement("div",{className:"mt-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h2",{className:"font-display text-2xl"},"Update log"),React.createElement("span",{className:"text-xs text-steel"},a.length," updates")),a.length===0?React.createElement("div",{className:"bg-white rounded-2xl border border-stone-100 p-6 text-stone-600"},"No updates yet. Submit the first update to start the log."):React.createElement("div",{className:"grid grid-cols-1 gap-4"},a.map(l=>React.createElement(Pt,{key:l.id,update:l,onReviewSave:(I,d,N)=>p(e,I,d,N)})))))},Bt=()=>{const[e,t]=x([]),[r,u]=x("dashboard"),[p,a]=x(null),[l,I]=x(null),[d,N]=x(!0),[c,C]=x(!1),[P,j]=x(!1),[R,V]=x({donationsTotal:null,volunteersCount:null,eventsCount:null,sponsorsCount:null}),[U,i]=x([]),[n,E]=x(!1),[Q,s]=x([]),[w,v]=x(!1),[O,G]=x(null),[Z,K]=x(!1),[ne,le]=x(null),ye={Construction:"House and Grounds Development",Grounds:"House and Grounds Development",Interiors:"House and Grounds Development",Fundraising:"Fund Development",Marketing:"Organizational Development",Venue:"Fund Development",Docents:"Programs and Events",Events:"Programs and Events"},[rt,je]=x({Construction:null,Grounds:null,Interiors:null,Docents:null,Fundraising:null,Events:null,Marketing:null,Venue:null}),[Me,we]=x([]),[ot,Ne]=x(null),[de,ke]=x(null),[ae,oe]=x(null),[Ce,$e]=x(!1),se=Oe.reduce((o,m)=>(o[m.key]={label:m.label,key:m.sheet},o),{}),Se=fe(()=>e.find(o=>o.id===p)||null,[e,p]),xe=fe(()=>e.find(o=>o.id===l)||null,[e,l]);ue(()=>{Ae()},[]);const Ae=async({useCache:o=!0}={})=>{var X,ee;if(!Ee){const q=Ie();t(((q==null?void 0:q.objects)||[]).map(re)),j(!1),s(Ct),N(!1);return}const m=o?Ie():null,S=m&&Date.now()-m.updatedAt<Nt,g=o?ge(Ye):null,f=o?ge(ze):null,F=o?ge(Fe):null,D=o?ge(De):null,M=o?ge(be):null;(X=m==null?void 0:m.objects)!=null&&X.length?(t(m.objects.map(re)),j(b.isConfigured()),N(!1)):N(!0),g&&V(g),f&&je(f),F&&we(F),D&&i(D),M&&s(M);try{const _=(await b.fetchAll()||[]).map(re);t(_),j(b.isConfigured()),me(_)}catch(q){console.error("Failed to load data:",q),(ee=m==null?void 0:m.objects)!=null&&ee.length||t(Pe.map(re))}N(!1);const L=await b.fetchMetrics();L&&(V(L),te(Ye,L));const k=await b.fetchSectionSnapshots();k&&(je(k),te(ze,k));const A=await b.fetchQuarterlyUpdates();A.length&&(we(A),te(Fe,A));const T=await b.fetchVisionStatements();T.length&&(i(T),te(De,T));const B=await b.fetchFocusAreaGoals();B.length&&(s(B),te(be,B))},Jt=o=>{a(o),u("detail"),window.scrollTo(0,0)},Yt=()=>{I(null),u("add"),window.scrollTo(0,0)},nt=o=>{I(o.id),u("edit"),window.scrollTo(0,0)},lt=async o=>{C(!0);try{if(xe){const m=await b.update(y(h({},o),{updates:o.updates||[]}));t(S=>{const g=S.map(f=>f.id===m.id?re(m):f);return me(g),g}),a(m.id),u("detail")}else{const m=await b.create(y(h({},o),{id:o.id||et(),updates:o.updates||[]}));t(S=>{const g=[...S,re(m)];return me(g),g}),a(m.id),u("detail")}}catch(m){console.error("Failed to save initiative:",m),alert("Failed to save. Please try again.")}C(!1)},dt=async(o,m)=>{const S=[m,...o.updates||[]],g=y(h({},o),{updates:S,progress:m.progress,lastUpdateAt:m.date});try{await b.update(g),t(f=>{const F=f.map(D=>D.id===o.id?re(g):D);return me(F),F})}catch(f){console.error("Failed to submit update:",f),alert("Failed to submit update. Please try again.")}},it=async(o,m,S,g)=>{const f=(o.updates||[]).map(D=>D.id===m?y(h({},D),{reviewStatus:S,reviewNotes:g}):D),F=y(h({},o),{updates:f});try{await b.update(F),t(D=>{const M=D.map(L=>L.id===o.id?re(F):L);return me(M),M})}catch(D){console.error("Failed to save review:",D),alert("Failed to save review. Please try again.")}},ct=o=>{Ne({focusArea:o}),u("quarterly"),a(null),G(null),window.scrollTo(0,0)},ut=async o=>{const f=o,{focusArea:m,quarter:S}=f,g=Je(f,["focusArea","quarter"]);await b.submitReviewUpdate(o),we(F=>{const D=F.findIndex(k=>k.focusArea===m&&k.quarter===S),M=D>=0?y(h({},F[D]),{payload:y(h({},F[D].payload||{}),{review:g})}):{focusArea:m,quarter:S,submittedDate:"",payload:{review:g}},L=D>=0?F.map((k,A)=>A===D?M:k):[...F,M];return te(Fe,L),L})},zt=(o,m)=>{const g=Me.filter(M=>M.focusArea===o&&M.quarter===m).sort((M,L)=>new Date(L.submittedDate||L.createdAt)-new Date(M.submittedDate||M.createdAt))[0],f=(g==null?void 0:g.payload)||{},F=f.year||String(new Date().getFullYear()),D=f.submittedDate||(g==null?void 0:g.submittedDate)||new Date().toISOString().slice(0,10);Ne({focusArea:o,quarter:m,year:F,submittedDate:D,primaryFocus:f.primaryFocus||"",goals:f.goals&&f.goals.length?f.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:f.wins||"",challenges:f.challenges||{},supportNeeded:f.supportNeeded||"",supportTypes:f.supportTypes||{},decisionsNeeded:f.decisionsNeeded||"",nextQuarterFocus:f.nextQuarterFocus||"",nextPriorities:f.nextPriorities||["","",""],finalTallyOverview:f.finalTallyOverview||""}),u("quarterly"),window.scrollTo(0,0)},pt=(o,m,S,g)=>{if(m!=="Q1")return;const f=g.year||String(new Date().getFullYear()),F=g.submittedDate||(S==null?void 0:S.submittedDate)||new Date().toISOString().slice(0,10);ke({areaLabel:o,quarter:m}),oe({focusArea:o,quarter:m,year:f,submittedDate:F,primaryFocus:g.primaryFocus||"",goals:g.goals&&g.goals.length?g.goals:[{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""},{goal:"",status:"On Track",summary:""}],wins:g.wins||"",challenges:g.challenges||{},supportNeeded:g.supportNeeded||"",supportTypes:g.supportTypes||{},decisionsNeeded:g.decisionsNeeded||"",nextQuarterFocus:g.nextQuarterFocus||"",nextPriorities:g.nextPriorities||["","",""],finalTallyOverview:g.finalTallyOverview||"",uploadedFiles:g.uploadedFiles||[]})},mt=async()=>{if(ae){$e(!0);try{await b.submitQuarterlyUpdate(ae),await Ae({useCache:!1}),ke(null),oe(null)}catch(o){console.error("Failed to save inline quarterly update:",o),alert("Failed to save. Please try again.")}$e(!1)}},gt=async()=>{await Ae({useCache:!1}),Ne(null),u("dashboard")},vt=o=>{const m=ye[o]||o;le(m),K(!0)},xt=async(o,m)=>{E(!0);try{const S=await b.updateVisionStatement({focusArea:o,threeYearVision:m});i(g=>{const f=g.findIndex(D=>D.focusArea===o),F=f>=0?g.map((D,M)=>M===f?S:D):[...g,S];return te(De,F),F})}catch(S){console.error("Failed to save vision statement:",S),alert("Failed to save. Please try again.")}E(!1)},Ue=async o=>{v(!0);try{const m=await b.updateFocusAreaGoal(o);s(S=>{const g=S.findIndex(F=>F.id===m.id),f=g>=0?S.map((F,D)=>D===g?m:F):[...S,m];return te(be,f),f})}catch(m){console.error("Failed to save focus goal:",m),alert("Failed to save. Please try again.")}v(!1)},Ge=async o=>{v(!0);try{await b.deleteFocusAreaGoal(o),s(m=>{const S=m.filter(g=>g.id!==o);return te(be,S),S})}catch(m){console.error("Failed to delete focus goal:",m),alert("Failed to delete. Please try again.")}v(!1)},ht=r==="detail"&&Se;return React.createElement("div",{className:"min-h-screen"},React.createElement("header",{className:"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-stone-100"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"w-10 h-10 rounded-full bg-gold text-white flex items-center justify-center shadow-sm"},React.createElement(ce,{size:18})),React.createElement("div",null,React.createElement("div",{className:"font-display text-lg text-ink"},"North Star Strategic Plan"),React.createElement("div",{className:"text-xs text-steel"},"Board progress tracker"))),React.createElement("div",{className:"flex items-center gap-2 text-sm flex-wrap"},React.createElement("button",{onClick:()=>{u("dashboard"),a(null),G(null)},className:`px-3 py-2 rounded-lg ${r==="dashboard"?"bg-stone-100":""}`},"Overview"),React.createElement("button",{onClick:()=>{u("quarterly"),a(null),G(null)},className:`px-3 py-2 rounded-lg ${r==="quarterly"?"bg-stone-100":""}`},"Quarterly Form"),React.createElement("span",{className:`text-xs ${P?"text-emerald-600":"text-steel"}`},P?"Synced":"Local"))),React.createElement("div",{className:"pb-4"},React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("button",{onClick:()=>{u("focus"),a(null),G(null)},className:`tab-button text-sm ${r==="focus"?"active":""}`},"Focus Areas"),Oe.map(o=>React.createElement("button",{key:o.key,onClick:()=>{u(o.key),a(null)},className:`tab-button text-sm ${r===o.key?"active":""}`},o.label)))))),React.createElement("main",{className:"px-4 sm:px-6 lg:px-8 py-8"},d?React.createElement("div",{className:"max-w-4xl mx-auto bg-white rounded-2xl border border-stone-100 p-8 text-center text-stone-600"},"Loading strategic plan data..."):React.createElement(React.Fragment,null,r==="dashboard"&&React.createElement(Vt,{initiatives:e,metrics:R,visionStatements:U,onSaveVision:xt,isSavingVision:n}),r==="focus"&&React.createElement(Gt,{goals:Q,onSaveGoal:Ue,onDeleteGoal:Ge,isSaving:w,focusFilter:O}),r==="quarterly"&&React.createElement(jt,{onSubmitted:gt,initialData:ot}),["construction","grounds","interiors","docents","fund","events","marketing","venue"].includes(r)&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("div",{className:"bg-white rounded-3xl border border-stone-100 p-6 md:p-8 card-shadow"},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h2",{className:"font-display text-3xl text-ink"},se[r].label),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>ct(se[r].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Quarterly form"),React.createElement("button",{type:"button",onClick:()=>vt(se[r].label),className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},`Focus area: ${ye[se[r].label]||se[r].label}`))),React.createElement("p",{className:"text-stone-600 mt-2"},"Beginning 2026 snapshot."),React.createElement("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4"},(()=>{const o=rt[se[r].key];return React.createElement(React.Fragment,null,React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Lead name"),React.createElement("div",{className:"text-lg text-ink mt-2"},(o==null?void 0:o.lead)||"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Budget"),React.createElement("div",{className:"text-lg text-ink mt-2"},o!=null&&o.budget?tt(o.budget):"N/A")),React.createElement("div",{className:"bg-stone-50 rounded-2xl p-4 border border-stone-100"},React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Volunteers (2026)"),React.createElement("div",{className:"text-lg text-ink mt-2"},(o==null?void 0:o.volunteers)||"N/A")))})())),Z&&ne===ye[se[r].label]&&React.createElement("div",{className:"mt-6 bg-white rounded-3xl border border-stone-100 p-6 card-shadow"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",{className:"font-display text-2xl text-ink"},ne),React.createElement("button",{type:"button",onClick:()=>{K(!1),le(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm"},"Close")),React.createElement("div",{className:"mt-4"},React.createElement(st,{focusArea:ne,goals:Q.filter(o=>o.focusArea===ne),onSaveGoal:Ue,onDeleteGoal:Ge,isSaving:w,hideTitle:!0}))),(()=>{const o=se[r].label,m=[["Q1","Q2"],["Q3","Q4"]],S={Q1:"Jan 1 - Mar 31",Q2:"Apr 1 - Jun 30",Q3:"Jul 1 - Sep 30",Q4:"Oct 1 - Dec 31"},g={capacity:"Capacity or volunteer limitations",budget:"Budget or funding constraints",scheduling:"Scheduling or timing issues",coordination:"Cross-area coordination gaps",external:"External factors",other:"Other"},f={staff:"Staff or volunteer help",marketing:"Marketing or communications",board:"Board guidance or decision",funding:"Funding or fundraising support",facilities:"Facilities or logistics",other:"Other"},F=k=>Me.filter(T=>T.focusArea===o&&T.quarter===k).sort((T,B)=>new Date(B.submittedDate||B.createdAt)-new Date(T.submittedDate||T.createdAt))[0],D=k=>{const A=F(k),T=(A==null?void 0:A.payload)||{},B=T.goals&&T.goals.length?T.goals:[{},{},{}],X=(de==null?void 0:de.areaLabel)===o&&(de==null?void 0:de.quarter)===k,ee=T.submittedDate||(A==null?void 0:A.submittedDate)||"",q=k==="Q1";return React.createElement("div",{key:`primary-${k}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"text-lg font-display text-ink"},`${k} Primary Focus and Goals`),React.createElement("div",{className:"text-xs text-steel"},`${k} (${S[k]})`),React.createElement("div",{className:"text-xs text-steel"},ee?He(ee):"00-00-0000")),q&&React.createElement("button",{type:"button",onClick:()=>pt(o,k,A,T),className:"px-2 py-1 border border-stone-200 rounded-lg text-xs"},"Edit")),X?React.createElement("div",{className:"mt-4 space-y-4"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("textarea",{value:(ae==null?void 0:ae.primaryFocus)||"",onChange:_=>oe(Y=>y(h({},Y),{primaryFocus:_.target.value})),className:"w-full mt-2 px-3 py-2 border border-stone-200 rounded-lg min-h-[100px]",placeholder:"Main priorities or themes."})),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"mt-2 space-y-3"},((ae==null?void 0:ae.goals)||[]).map((_,Y)=>React.createElement("div",{key:Y,className:"grid grid-cols-1 md:grid-cols-[1.2fr_0.6fr_1fr] gap-3"},React.createElement("input",{type:"text",value:_.goal,onChange:z=>oe(H=>y(h({},H),{goals:H.goals.map((W,ie)=>ie===Y?y(h({},W),{goal:z.target.value}):W)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:`Goal ${Y+1}`}),React.createElement("select",{value:_.status,onChange:z=>oe(H=>y(h({},H),{goals:H.goals.map((W,ie)=>ie===Y?y(h({},W),{status:z.target.value}):W)})),className:"px-3 py-2 border border-stone-200 rounded-lg bg-white"},["On Track","At Risk","Off Track"].map(z=>React.createElement("option",{key:z,value:z},z))),React.createElement("input",{type:"text",value:_.summary,onChange:z=>oe(H=>y(h({},H),{goals:H.goals.map((W,ie)=>ie===Y?y(h({},W),{summary:z.target.value}):W)})),className:"px-3 py-2 border border-stone-200 rounded-lg",placeholder:"Progress summary"}))))),React.createElement("div",{className:"flex items-center justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{ke(null),oe(null)},className:"px-3 py-2 border border-stone-200 rounded-lg text-sm",disabled:Ce},"Cancel"),React.createElement("button",{type:"button",onClick:mt,className:"px-3 py-2 bg-gold text-white rounded-lg text-sm",disabled:Ce},Ce?"Saving...":"Save"))):React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Primary focus"),React.createElement("div",{className:"whitespace-pre-line"},T.primaryFocus||"-")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Goals"),React.createElement("div",{className:"space-y-1"},B.map((_,Y)=>React.createElement("div",{key:Y,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ce,{size:12})),React.createElement("div",null,React.createElement("strong",null,_.goal||"-"),_.status?` - ${_.status}`:"")))))))},M=k=>{const A=F(k),T=(A==null?void 0:A.payload)||{},B=T.submittedDate||(A==null?void 0:A.submittedDate)||"",X=T.challenges||{},ee=T.supportTypes||{},q=T.challengesChecked||"",_=T.supportTypesChecked||"",Y=Object.keys(g).filter(J=>X[J]).map(J=>J==="other"&&X.otherText?`Other: ${X.otherText}`:g[J]),z=Object.keys(f).filter(J=>ee[J]).map(J=>J==="other"&&ee.otherText?`Other: ${ee.otherText}`:f[J]),H=q||(Y.length?Y.join(", "):""),W=_||(z.length?z.join(", "):""),Ve=(T.nextPriorities||[]).filter(J=>String(J||"").trim());return React.createElement("div",{key:`overview-${k}`,className:"bg-white rounded-3xl border border-stone-100 p-6 card-shadow quarter-card"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},`${k} QUARTERLY FORM OVERVIEW`),React.createElement("div",{className:"text-xs text-steel"},`${k} (${S[k]})`),React.createElement("div",{className:"text-xs text-steel"},B?He(B):"00-00-0000")),A?React.createElement("div",{className:"mt-4 space-y-3 text-sm text-stone-700"},React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"What went well"),React.createElement("div",{className:"whitespace-pre-line"},T.wins||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges"),React.createElement("div",{className:"whitespace-pre-line"},X.details||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Challenges (checked)"),React.createElement("div",null,H||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support needed"),React.createElement("div",{className:"whitespace-pre-line"},T.supportNeeded||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Support types"),React.createElement("div",null,W||"None noted")),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Next quarter focus area and goals"),React.createElement("div",{className:"whitespace-pre-line"},T.nextQuarterFocus||"None noted"),React.createElement("div",{className:"mt-2 space-y-1"},Ve.length?Ve.map((J,bt)=>React.createElement("div",{key:bt,className:"flex items-start gap-2"},React.createElement("span",{className:"text-gold mt-0.5"},React.createElement(ce,{size:12})),React.createElement("div",null,J||"-"))):React.createElement("div",null,"None noted"))),React.createElement("div",null,React.createElement("div",{className:"text-xs uppercase tracking-wide text-steel"},"Decisions needed"),React.createElement("div",{className:"whitespace-pre-line"},T.decisionsNeeded||"None noted"))):React.createElement("div",{className:"mt-4 text-sm text-stone-600"},"No submission yet."))},L=k=>{var B;const A=F(k),T=((B=A==null?void 0:A.payload)==null?void 0:B.review)||null;return React.createElement(Mt,{key:`review-${k}`,areaLabel:o,quarter:k,review:T,onSave:ut})};return React.createElement("div",{className:"mt-6 space-y-6"},m.map(k=>React.createElement("div",{key:k.join("-"),className:"space-y-6"},React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(A=>D(A))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(A=>M(A))),React.createElement("div",{className:"grid grid-cols-2 gap-4"},k.map(A=>L(A))))))})()),ht&&React.createElement(Lt,{initiative:Se,onBack:()=>u("list"),onEdit:()=>nt(Se),onSubmitUpdate:dt,onReviewUpdate:it}),(r==="add"||r==="edit")&&React.createElement("div",{className:"max-w-4xl mx-auto fade-up"},React.createElement("button",{onClick:()=>u(xe?"detail":"list"),className:"flex items-center gap-2 text-sm text-gold mb-4"},React.createElement(at,{size:18})," Cancel"),React.createElement(Rt,{initiative:xe,onSave:lt,onCancel:()=>u(xe?"detail":"list"),isSaving:c})))),React.createElement("footer",{className:"mt-12 pb-10 text-center text-xs text-steel"},"Built for shared accountability and board-level clarity."))},_t=ReactDOM.createRoot(document.getElementById("root"));_t.render(React.createElement(Bt,null));})();
